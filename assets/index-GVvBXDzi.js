(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Vy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fy={exports:{}},Wc={},Uy={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Na=Symbol.for("react.element"),s1=Symbol.for("react.portal"),i1=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),u1=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),h1=Symbol.for("react.memo"),f1=Symbol.for("react.lazy"),Hm=Symbol.iterator;function p1(t){return t===null||typeof t!="object"?null:(t=Hm&&t[Hm]||t["@@iterator"],typeof t=="function"?t:null)}var zy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},By=Object.assign,$y={};function Hi(t,e,n){this.props=t,this.context=e,this.refs=$y,this.updater=n||zy}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qy(){}qy.prototype=Hi.prototype;function sf(t,e,n){this.props=t,this.context=e,this.refs=$y,this.updater=n||zy}var of=sf.prototype=new qy;of.constructor=sf;By(of,Hi.prototype);of.isPureReactComponent=!0;var Wm=Array.isArray,Hy=Object.prototype.hasOwnProperty,af={current:null},Wy={key:!0,ref:!0,__self:!0,__source:!0};function Ky(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Hy.call(e,r)&&!Wy.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Na,type:t,key:i,ref:a,props:s,_owner:af.current}}function m1(t,e){return{$$typeof:Na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Na}function g1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Km=/\/+/g;function Xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g1(""+t.key):e.toString(36)}function Pl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Na:case s1:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Xu(a,0):r,Wm(s)?(n="",t!=null&&(n=t.replace(Km,"$&/")+"/"),Pl(s,e,n,"",function(d){return d})):s!=null&&(lf(s)&&(s=m1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Km,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Wm(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Xu(i,c);a+=Pl(i,e,n,u,s)}else if(u=p1(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Xu(i,c++),a+=Pl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function al(t,e,n){if(t==null)return t;var r=[],s=0;return Pl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function v1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},bl={transition:null},y1={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:bl,ReactCurrentOwner:af};function Gy(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:al,forEach:function(t,e,n){al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return al(t,function(){e++}),e},toArray:function(t){return al(t,function(e){return e})||[]},only:function(t){if(!lf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Hi;Ce.Fragment=i1;Ce.Profiler=a1;Ce.PureComponent=sf;Ce.StrictMode=o1;Ce.Suspense=d1;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y1;Ce.act=Gy;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=By({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=af.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Hy.call(e,u)&&!Wy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Na,type:t.type,key:s,ref:i,props:r,_owner:a}};Ce.createContext=function(t){return t={$$typeof:c1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l1,_context:t},t.Consumer=t};Ce.createElement=Ky;Ce.createFactory=function(t){var e=Ky.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:u1,render:t}};Ce.isValidElement=lf;Ce.lazy=function(t){return{$$typeof:f1,_payload:{_status:-1,_result:t},_init:v1}};Ce.memo=function(t,e){return{$$typeof:h1,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=bl.transition;bl.transition={};try{t()}finally{bl.transition=e}};Ce.unstable_act=Gy;Ce.useCallback=function(t,e){return Kt.current.useCallback(t,e)};Ce.useContext=function(t){return Kt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Kt.current.useEffect(t,e)};Ce.useId=function(){return Kt.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Kt.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};Ce.useRef=function(t){return Kt.current.useRef(t)};Ce.useState=function(t){return Kt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Kt.current.useTransition()};Ce.version="18.3.1";Uy.exports=Ce;var D=Uy.exports;const cf=Vy(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=D,w1=Symbol.for("react.element"),x1=Symbol.for("react.fragment"),E1=Object.prototype.hasOwnProperty,T1=_1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S1={key:!0,ref:!0,__self:!0,__source:!0};function Qy(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)E1.call(e,r)&&!S1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:w1,type:t,key:i,ref:a,props:s,_owner:T1.current}}Wc.Fragment=x1;Wc.jsx=Qy;Wc.jsxs=Qy;Fy.exports=Wc;var o=Fy.exports,Fd={},Yy={exports:{}},fn={},Xy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var F=B.length;B.push(Y);e:for(;0<F;){var $=F-1>>>1,q=B[$];if(0<s(q,Y))B[$]=Y,B[F]=q,F=$;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],F=B.pop();if(F!==Y){B[0]=F;e:for(var $=0,q=B.length,Z=q>>>1;$<Z;){var fe=2*($+1)-1,G=B[fe],re=fe+1,ie=B[re];if(0>s(G,F))re<q&&0>s(ie,G)?(B[$]=ie,B[re]=F,$=re):(B[$]=G,B[fe]=F,$=fe);else if(re<q&&0>s(ie,F))B[$]=ie,B[re]=F,$=re;else break e}}return Y}function s(B,Y){var F=B.sortIndex-Y.sortIndex;return F!==0?F:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],p=1,m=null,v=3,x=!1,A=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function C(B){if(R=!1,N(B),!A)if(n(u)!==null)A=!0,X(b);else{var Y=n(d);Y!==null&&ye(C,Y.startTime-B)}}function b(B,Y){A=!1,R&&(R=!1,j(g),g=-1),x=!0;var F=v;try{for(N(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||B&&!E());){var $=m.callback;if(typeof $=="function"){m.callback=null,v=m.priorityLevel;var q=$(m.expirationTime<=Y);Y=t.unstable_now(),typeof q=="function"?m.callback=q:m===n(u)&&r(u),N(Y)}else r(u);m=n(u)}if(m!==null)var Z=!0;else{var fe=n(d);fe!==null&&ye(C,fe.startTime-Y),Z=!1}return Z}finally{m=null,v=F,x=!1}}var M=!1,T=null,g=-1,k=5,y=-1;function E(){return!(t.unstable_now()-y<k)}function w(){if(T!==null){var B=t.unstable_now();y=B;var Y=!0;try{Y=T(!0,B)}finally{Y?I():(M=!1,T=null)}}else M=!1}var I;if(typeof _=="function")I=function(){_(w)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,le=z.port2;z.port1.onmessage=w,I=function(){le.postMessage(null)}}else I=function(){P(w,0)};function X(B){T=B,M||(M=!0,I())}function ye(B,Y){g=P(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){A||x||(A=!0,X(b))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var F=v;v=Y;try{return B()}finally{v=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var F=v;v=B;try{return Y()}finally{v=F}},t.unstable_scheduleCallback=function(B,Y,F){var $=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?$+F:$):F=$,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=F+q,B={id:p++,callback:Y,priorityLevel:B,startTime:F,expirationTime:q,sortIndex:-1},F>$?(B.sortIndex=F,e(d,B),n(u)===null&&B===n(d)&&(R?(j(g),g=-1):R=!0,ye(C,F-$))):(B.sortIndex=q,e(u,B),A||x||(A=!0,X(b))),B},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(B){var Y=v;return function(){var F=v;v=Y;try{return B.apply(this,arguments)}finally{v=F}}}})(Jy);Xy.exports=Jy;var I1=Xy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=D,hn=I1;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zy=new Set,Xo={};function $s(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(Xo[t]=e,t=0;t<e.length;t++)Zy.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ud=Object.prototype.hasOwnProperty,k1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gm={},Qm={};function j1(t){return Ud.call(Qm,t)?!0:Ud.call(Gm,t)?!1:k1.test(t)?Qm[t]=!0:(Gm[t]=!0,!1)}function A1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C1(t,e,n,r){if(e===null||typeof e>"u"||A1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var uf=/[\-:]([a-z])/g;function df(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uf,df);Ct[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uf,df);Ct[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uf,df);Ct[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function hf(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(C1(e,n,s,r)&&(n=null),r||s===null?j1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _r=N1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ll=Symbol.for("react.element"),oi=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),ff=Symbol.for("react.strict_mode"),zd=Symbol.for("react.profiler"),e_=Symbol.for("react.provider"),t_=Symbol.for("react.context"),pf=Symbol.for("react.forward_ref"),Bd=Symbol.for("react.suspense"),$d=Symbol.for("react.suspense_list"),mf=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),n_=Symbol.for("react.offscreen"),Ym=Symbol.iterator;function ho(t){return t===null||typeof t!="object"?null:(t=Ym&&t[Ym]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,Ju;function To(t){if(Ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ju=e&&e[1]||""}return`
`+Ju+t}var Zu=!1;function ed(t,e){if(!t||Zu)return"";Zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?To(t):""}function R1(t){switch(t.tag){case 5:return To(t.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return t=ed(t.type,!1),t;case 11:return t=ed(t.type.render,!1),t;case 1:return t=ed(t.type,!0),t;default:return""}}function qd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case oi:return"Portal";case zd:return"Profiler";case ff:return"StrictMode";case Bd:return"Suspense";case $d:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t_:return(t.displayName||"Context")+".Consumer";case e_:return(t._context.displayName||"Context")+".Provider";case pf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mf:return e=t.displayName||null,e!==null?e:qd(t.type)||"Memo";case kr:e=t._payload,t=t._init;try{return qd(t(e))}catch{}}return null}function P1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qd(e);case 8:return e===ff?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b1(t){var e=r_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cl(t){t._valueTracker||(t._valueTracker=b1(t))}function s_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=r_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hd(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i_(t,e){e=e.checked,e!=null&&hf(t,"checked",e,!1)}function Wd(t,e){i_(t,e);var n=Zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kd(t,e.type,Zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kd(t,e,n){(e!=="number"||Zl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var So=Array.isArray;function _i(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(So(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zr(n)}}function o_(t,e){var n=Zr(e.value),r=Zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ul,l_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ul=ul||document.createElement("div"),ul.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ul.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D1=["Webkit","ms","Moz","O"];Object.keys(bo).forEach(function(t){D1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bo[e]=bo[t]})});function c_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bo.hasOwnProperty(t)&&bo[t]?(""+e).trim():e+"px"}function u_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=c_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var L1=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yd(t,e){if(e){if(L1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Xd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jd=null;function gf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zd=null,wi=null,xi=null;function tg(t){if(t=Aa(t)){if(typeof Zd!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Xc(e),Zd(t.stateNode,t.type,e))}}function d_(t){wi?xi?xi.push(t):xi=[t]:wi=t}function h_(){if(wi){var t=wi,e=xi;if(xi=wi=null,tg(t),e)for(t=0;t<e.length;t++)tg(e[t])}}function f_(t,e){return t(e)}function p_(){}var td=!1;function m_(t,e,n){if(td)return t(e,n);td=!0;try{return f_(t,e,n)}finally{td=!1,(wi!==null||xi!==null)&&(p_(),h_())}}function Zo(t,e){var n=t.stateNode;if(n===null)return null;var r=Xc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var eh=!1;if(ur)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){eh=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{eh=!1}function M1(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Do=!1,ec=null,tc=!1,th=null,O1={onError:function(t){Do=!0,ec=t}};function V1(t,e,n,r,s,i,a,c,u){Do=!1,ec=null,M1.apply(O1,arguments)}function F1(t,e,n,r,s,i,a,c,u){if(V1.apply(this,arguments),Do){if(Do){var d=ec;Do=!1,ec=null}else throw Error(Q(198));tc||(tc=!0,th=d)}}function qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function g_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ng(t){if(qs(t)!==t)throw Error(Q(188))}function U1(t){var e=t.alternate;if(!e){if(e=qs(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ng(s),t;if(i===r)return ng(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function v_(t){return t=U1(t),t!==null?y_(t):null}function y_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y_(t);if(e!==null)return e;t=t.sibling}return null}var __=hn.unstable_scheduleCallback,rg=hn.unstable_cancelCallback,z1=hn.unstable_shouldYield,B1=hn.unstable_requestPaint,ht=hn.unstable_now,$1=hn.unstable_getCurrentPriorityLevel,vf=hn.unstable_ImmediatePriority,w_=hn.unstable_UserBlockingPriority,nc=hn.unstable_NormalPriority,q1=hn.unstable_LowPriority,x_=hn.unstable_IdlePriority,Kc=null,zn=null;function H1(t){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Kc,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:G1,W1=Math.log,K1=Math.LN2;function G1(t){return t>>>=0,t===0?32:31-(W1(t)/K1|0)|0}var dl=64,hl=4194304;function Io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=Io(c):(i&=a,i!==0&&(r=Io(i)))}else a=n&~s,a!==0?r=Io(a):i!==0&&(r=Io(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),s=1<<n,r|=t[n],e&=~s;return r}function Q1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Cn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=Q1(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function nh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E_(){var t=dl;return dl<<=1,!(dl&4194240)&&(dl=64),t}function nd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ka(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function X1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ue=0;function T_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S_,_f,I_,N_,k_,rh=!1,fl=[],zr=null,Br=null,$r=null,ea=new Map,ta=new Map,Cr=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sg(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(e.pointerId)}}function po(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Aa(e),e!==null&&_f(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Z1(t,e,n,r,s){switch(e){case"focusin":return zr=po(zr,t,e,n,r,s),!0;case"dragenter":return Br=po(Br,t,e,n,r,s),!0;case"mouseover":return $r=po($r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ea.set(i,po(ea.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ta.set(i,po(ta.get(i)||null,t,e,n,r,s)),!0}return!1}function j_(t){var e=ws(t.target);if(e!==null){var n=qs(e);if(n!==null){if(e=n.tag,e===13){if(e=g_(n),e!==null){t.blockedOn=e,k_(t.priority,function(){I_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jd=r,n.target.dispatchEvent(r),Jd=null}else return e=Aa(n),e!==null&&_f(e),t.blockedOn=n,!1;e.shift()}return!0}function ig(t,e,n){Dl(t)&&n.delete(e)}function eT(){rh=!1,zr!==null&&Dl(zr)&&(zr=null),Br!==null&&Dl(Br)&&(Br=null),$r!==null&&Dl($r)&&($r=null),ea.forEach(ig),ta.forEach(ig)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,rh||(rh=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,eT)))}function na(t){function e(s){return mo(s,t)}if(0<fl.length){mo(fl[0],t);for(var n=1;n<fl.length;n++){var r=fl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&mo(zr,t),Br!==null&&mo(Br,t),$r!==null&&mo($r,t),ea.forEach(e),ta.forEach(e),n=0;n<Cr.length;n++)r=Cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)j_(n),n.blockedOn===null&&Cr.shift()}var Ei=_r.ReactCurrentBatchConfig,sc=!0;function tT(t,e,n,r){var s=Ue,i=Ei.transition;Ei.transition=null;try{Ue=1,wf(t,e,n,r)}finally{Ue=s,Ei.transition=i}}function nT(t,e,n,r){var s=Ue,i=Ei.transition;Ei.transition=null;try{Ue=4,wf(t,e,n,r)}finally{Ue=s,Ei.transition=i}}function wf(t,e,n,r){if(sc){var s=sh(t,e,n,r);if(s===null)hd(t,e,r,ic,n),sg(t,r);else if(Z1(s,t,e,n,r))r.stopPropagation();else if(sg(t,r),e&4&&-1<J1.indexOf(t)){for(;s!==null;){var i=Aa(s);if(i!==null&&S_(i),i=sh(t,e,n,r),i===null&&hd(t,e,r,ic,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hd(t,e,r,null,n)}}var ic=null;function sh(t,e,n,r){if(ic=null,t=gf(r),t=ws(t),t!==null)if(e=qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=g_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ic=t,null}function A_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($1()){case vf:return 1;case w_:return 4;case nc:case q1:return 16;case x_:return 536870912;default:return 16}default:return 16}}var Or=null,xf=null,Ll=null;function C_(){if(Ll)return Ll;var t,e=xf,n=e.length,r,s="value"in Or?Or.value:Or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Ll=s.slice(t,1<r?1-r:void 0)}function Ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pl(){return!0}function og(){return!1}function pn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pl:og,this.isPropagationStopped=og,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pl)},persist:function(){},isPersistent:pl}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ef=pn(Wi),ja=st({},Wi,{view:0,detail:0}),rT=pn(ja),rd,sd,go,Gc=st({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(rd=t.screenX-go.screenX,sd=t.screenY-go.screenY):sd=rd=0,go=t),rd)},movementY:function(t){return"movementY"in t?t.movementY:sd}}),ag=pn(Gc),sT=st({},Gc,{dataTransfer:0}),iT=pn(sT),oT=st({},ja,{relatedTarget:0}),id=pn(oT),aT=st({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),lT=pn(aT),cT=st({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uT=pn(cT),dT=st({},Wi,{data:0}),lg=pn(dT),hT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pT[t])?!!e[t]:!1}function Tf(){return mT}var gT=st({},ja,{key:function(t){if(t.key){var e=hT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tf,charCode:function(t){return t.type==="keypress"?Ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vT=pn(gT),yT=st({},Gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cg=pn(yT),_T=st({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tf}),wT=pn(_T),xT=st({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ET=pn(xT),TT=st({},Gc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ST=pn(TT),IT=[9,13,27,32],Sf=ur&&"CompositionEvent"in window,Lo=null;ur&&"documentMode"in document&&(Lo=document.documentMode);var NT=ur&&"TextEvent"in window&&!Lo,R_=ur&&(!Sf||Lo&&8<Lo&&11>=Lo),ug=" ",dg=!1;function P_(t,e){switch(t){case"keyup":return IT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function kT(t,e){switch(t){case"compositionend":return b_(e);case"keypress":return e.which!==32?null:(dg=!0,ug);case"textInput":return t=e.data,t===ug&&dg?null:t;default:return null}}function jT(t,e){if(li)return t==="compositionend"||!Sf&&P_(t,e)?(t=C_(),Ll=xf=Or=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return R_&&e.locale!=="ko"?null:e.data;default:return null}}var AT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AT[t.type]:e==="textarea"}function D_(t,e,n,r){d_(r),e=oc(e,"onChange"),0<e.length&&(n=new Ef("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mo=null,ra=null;function CT(t){H_(t,0)}function Qc(t){var e=di(t);if(s_(e))return t}function RT(t,e){if(t==="change")return e}var L_=!1;if(ur){var od;if(ur){var ad="oninput"in document;if(!ad){var fg=document.createElement("div");fg.setAttribute("oninput","return;"),ad=typeof fg.oninput=="function"}od=ad}else od=!1;L_=od&&(!document.documentMode||9<document.documentMode)}function pg(){Mo&&(Mo.detachEvent("onpropertychange",M_),ra=Mo=null)}function M_(t){if(t.propertyName==="value"&&Qc(ra)){var e=[];D_(e,ra,t,gf(t)),m_(CT,e)}}function PT(t,e,n){t==="focusin"?(pg(),Mo=e,ra=n,Mo.attachEvent("onpropertychange",M_)):t==="focusout"&&pg()}function bT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(ra)}function DT(t,e){if(t==="click")return Qc(e)}function LT(t,e){if(t==="input"||t==="change")return Qc(e)}function MT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pn=typeof Object.is=="function"?Object.is:MT;function sa(t,e){if(Pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ud.call(e,s)||!Pn(t[s],e[s]))return!1}return!0}function mg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,e){var n=mg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mg(n)}}function O_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?O_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function V_(){for(var t=window,e=Zl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zl(t.document)}return e}function If(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OT(t){var e=V_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&O_(n.ownerDocument.documentElement,n)){if(r!==null&&If(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=gg(n,i);var a=gg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VT=ur&&"documentMode"in document&&11>=document.documentMode,ci=null,ih=null,Oo=null,oh=!1;function vg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oh||ci==null||ci!==Zl(r)||(r=ci,"selectionStart"in r&&If(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&sa(Oo,r)||(Oo=r,r=oc(ih,"onSelect"),0<r.length&&(e=new Ef("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ci)))}function ml(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionend:ml("Transition","TransitionEnd")},ld={},F_={};ur&&(F_=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Yc(t){if(ld[t])return ld[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in F_)return ld[t]=e[n];return t}var U_=Yc("animationend"),z_=Yc("animationiteration"),B_=Yc("animationstart"),$_=Yc("transitionend"),q_=new Map,yg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(t,e){q_.set(t,e),$s(e,[t])}for(var cd=0;cd<yg.length;cd++){var ud=yg[cd],FT=ud.toLowerCase(),UT=ud[0].toUpperCase()+ud.slice(1);os(FT,"on"+UT)}os(U_,"onAnimationEnd");os(z_,"onAnimationIteration");os(B_,"onAnimationStart");os("dblclick","onDoubleClick");os("focusin","onFocus");os("focusout","onBlur");os($_,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zT=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function _g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,F1(r,e,void 0,t),t.currentTarget=null}function H_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;_g(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;_g(s,c,d),i=u}}}if(tc)throw t=th,tc=!1,th=null,t}function Xe(t,e){var n=e[dh];n===void 0&&(n=e[dh]=new Set);var r=t+"__bubble";n.has(r)||(W_(e,t,2,!1),n.add(r))}function dd(t,e,n){var r=0;e&&(r|=4),W_(n,t,r,e)}var gl="_reactListening"+Math.random().toString(36).slice(2);function ia(t){if(!t[gl]){t[gl]=!0,Zy.forEach(function(n){n!=="selectionchange"&&(zT.has(n)||dd(n,!1,t),dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gl]||(e[gl]=!0,dd("selectionchange",!1,e))}}function W_(t,e,n,r){switch(A_(e)){case 1:var s=tT;break;case 4:s=nT;break;default:s=wf}n=s.bind(null,e,n,t),s=void 0,!eh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=ws(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}m_(function(){var d=i,p=gf(n),m=[];e:{var v=q_.get(t);if(v!==void 0){var x=Ef,A=t;switch(t){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":x=vT;break;case"focusin":A="focus",x=id;break;case"focusout":A="blur",x=id;break;case"beforeblur":case"afterblur":x=id;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=iT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=wT;break;case U_:case z_:case B_:x=lT;break;case $_:x=ET;break;case"scroll":x=rT;break;case"wheel":x=ST;break;case"copy":case"cut":case"paste":x=uT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=cg}var R=(e&4)!==0,P=!R&&t==="scroll",j=R?v!==null?v+"Capture":null:v;R=[];for(var _=d,N;_!==null;){N=_;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,j!==null&&(C=Zo(_,j),C!=null&&R.push(oa(_,C,N)))),P)break;_=_.return}0<R.length&&(v=new x(v,A,null,n,p),m.push({event:v,listeners:R}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",v&&n!==Jd&&(A=n.relatedTarget||n.fromElement)&&(ws(A)||A[dr]))break e;if((x||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,x?(A=n.relatedTarget||n.toElement,x=d,A=A?ws(A):null,A!==null&&(P=qs(A),A!==P||A.tag!==5&&A.tag!==6)&&(A=null)):(x=null,A=d),x!==A)){if(R=ag,C="onMouseLeave",j="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=cg,C="onPointerLeave",j="onPointerEnter",_="pointer"),P=x==null?v:di(x),N=A==null?v:di(A),v=new R(C,_+"leave",x,n,p),v.target=P,v.relatedTarget=N,C=null,ws(p)===d&&(R=new R(j,_+"enter",A,n,p),R.target=N,R.relatedTarget=P,C=R),P=C,x&&A)t:{for(R=x,j=A,_=0,N=R;N;N=ni(N))_++;for(N=0,C=j;C;C=ni(C))N++;for(;0<_-N;)R=ni(R),_--;for(;0<N-_;)j=ni(j),N--;for(;_--;){if(R===j||j!==null&&R===j.alternate)break t;R=ni(R),j=ni(j)}R=null}else R=null;x!==null&&wg(m,v,x,R,!1),A!==null&&P!==null&&wg(m,P,A,R,!0)}}e:{if(v=d?di(d):window,x=v.nodeName&&v.nodeName.toLowerCase(),x==="select"||x==="input"&&v.type==="file")var b=RT;else if(hg(v))if(L_)b=LT;else{b=bT;var M=PT}else(x=v.nodeName)&&x.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(b=DT);if(b&&(b=b(t,d))){D_(m,b,n,p);break e}M&&M(t,v,d),t==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&Kd(v,"number",v.value)}switch(M=d?di(d):window,t){case"focusin":(hg(M)||M.contentEditable==="true")&&(ci=M,ih=d,Oo=null);break;case"focusout":Oo=ih=ci=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,vg(m,n,p);break;case"selectionchange":if(VT)break;case"keydown":case"keyup":vg(m,n,p)}var T;if(Sf)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else li?P_(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(R_&&n.locale!=="ko"&&(li||g!=="onCompositionStart"?g==="onCompositionEnd"&&li&&(T=C_()):(Or=p,xf="value"in Or?Or.value:Or.textContent,li=!0)),M=oc(d,g),0<M.length&&(g=new lg(g,t,null,n,p),m.push({event:g,listeners:M}),T?g.data=T:(T=b_(n),T!==null&&(g.data=T)))),(T=NT?kT(t,n):jT(t,n))&&(d=oc(d,"onBeforeInput"),0<d.length&&(p=new lg("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=T))}H_(m,e)})}function oa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zo(t,n),i!=null&&r.unshift(oa(t,i,s)),i=Zo(t,e),i!=null&&r.push(oa(t,i,s))),t=t.return}return r}function ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Zo(n,i),u!=null&&a.unshift(oa(n,u,c))):s||(u=Zo(n,i),u!=null&&a.push(oa(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var BT=/\r\n?/g,$T=/\u0000|\uFFFD/g;function xg(t){return(typeof t=="string"?t:""+t).replace(BT,`
`).replace($T,"")}function vl(t,e,n){if(e=xg(e),xg(t)!==e&&n)throw Error(Q(425))}function ac(){}var ah=null,lh=null;function ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uh=typeof setTimeout=="function"?setTimeout:void 0,qT=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,HT=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(t){return Eg.resolve(null).then(t).catch(WT)}:uh;function WT(t){setTimeout(function(){throw t})}function fd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),na(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);na(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Ki,aa="__reactProps$"+Ki,dr="__reactContainer$"+Ki,dh="__reactEvents$"+Ki,KT="__reactListeners$"+Ki,GT="__reactHandles$"+Ki;function ws(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dr]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tg(t);t!==null;){if(n=t[Vn])return n;t=Tg(t)}return e}t=n,n=t.parentNode}return null}function Aa(t){return t=t[Vn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Xc(t){return t[aa]||null}var hh=[],hi=-1;function as(t){return{current:t}}function Ze(t){0>hi||(t.current=hh[hi],hh[hi]=null,hi--)}function Qe(t,e){hi++,hh[hi]=t.current,t.current=e}var es={},zt=as(es),en=as(!1),As=es;function Ci(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tn(t){return t=t.childContextTypes,t!=null}function lc(){Ze(en),Ze(zt)}function Sg(t,e,n){if(zt.current!==es)throw Error(Q(168));Qe(zt,e),Qe(en,n)}function K_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,P1(t)||"Unknown",s));return st({},n,r)}function cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,As=zt.current,Qe(zt,t),Qe(en,en.current),!0}function Ig(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=K_(t,e,As),r.__reactInternalMemoizedMergedChildContext=t,Ze(en),Ze(zt),Qe(zt,t)):Ze(en),Qe(en,n)}var tr=null,Jc=!1,pd=!1;function G_(t){tr===null?tr=[t]:tr.push(t)}function QT(t){Jc=!0,G_(t)}function ls(){if(!pd&&tr!==null){pd=!0;var t=0,e=Ue;try{var n=tr;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}tr=null,Jc=!1}catch(s){throw tr!==null&&(tr=tr.slice(t+1)),__(vf,ls),s}finally{Ue=e,pd=!1}}return null}var fi=[],pi=0,uc=null,dc=0,mn=[],gn=0,Cs=null,nr=1,rr="";function ms(t,e){fi[pi++]=dc,fi[pi++]=uc,uc=t,dc=e}function Q_(t,e,n){mn[gn++]=nr,mn[gn++]=rr,mn[gn++]=Cs,Cs=t;var r=nr;t=rr;var s=32-Cn(r)-1;r&=~(1<<s),n+=1;var i=32-Cn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,nr=1<<32-Cn(e)+s|n<<s|r,rr=i+t}else nr=1<<i|n<<s|r,rr=t}function Nf(t){t.return!==null&&(ms(t,1),Q_(t,1,0))}function kf(t){for(;t===uc;)uc=fi[--pi],fi[pi]=null,dc=fi[--pi],fi[pi]=null;for(;t===Cs;)Cs=mn[--gn],mn[gn]=null,rr=mn[--gn],mn[gn]=null,nr=mn[--gn],mn[gn]=null}var dn=null,an=null,et=!1,An=null;function Y_(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ng(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dn=t,an=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dn=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cs!==null?{id:nr,overflow:rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dn=t,an=null,!0):!1;default:return!1}}function fh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ph(t){if(et){var e=an;if(e){var n=e;if(!Ng(t,e)){if(fh(t))throw Error(Q(418));e=qr(n.nextSibling);var r=dn;e&&Ng(t,e)?Y_(r,n):(t.flags=t.flags&-4097|2,et=!1,dn=t)}}else{if(fh(t))throw Error(Q(418));t.flags=t.flags&-4097|2,et=!1,dn=t}}}function kg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dn=t}function yl(t){if(t!==dn)return!1;if(!et)return kg(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ch(t.type,t.memoizedProps)),e&&(e=an)){if(fh(t))throw X_(),Error(Q(418));for(;e;)Y_(t,e),e=qr(e.nextSibling)}if(kg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=dn?qr(t.stateNode.nextSibling):null;return!0}function X_(){for(var t=an;t;)t=qr(t.nextSibling)}function Ri(){an=dn=null,et=!1}function jf(t){An===null?An=[t]:An.push(t)}var YT=_r.ReactCurrentBatchConfig;function vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function _l(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jg(t){var e=t._init;return e(t._payload)}function J_(t){function e(j,_){if(t){var N=j.deletions;N===null?(j.deletions=[_],j.flags|=16):N.push(_)}}function n(j,_){if(!t)return null;for(;_!==null;)e(j,_),_=_.sibling;return null}function r(j,_){for(j=new Map;_!==null;)_.key!==null?j.set(_.key,_):j.set(_.index,_),_=_.sibling;return j}function s(j,_){return j=Gr(j,_),j.index=0,j.sibling=null,j}function i(j,_,N){return j.index=N,t?(N=j.alternate,N!==null?(N=N.index,N<_?(j.flags|=2,_):N):(j.flags|=2,_)):(j.flags|=1048576,_)}function a(j){return t&&j.alternate===null&&(j.flags|=2),j}function c(j,_,N,C){return _===null||_.tag!==6?(_=xd(N,j.mode,C),_.return=j,_):(_=s(_,N),_.return=j,_)}function u(j,_,N,C){var b=N.type;return b===ai?p(j,_,N.props.children,C,N.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===kr&&jg(b)===_.type)?(C=s(_,N.props),C.ref=vo(j,_,N),C.return=j,C):(C=$l(N.type,N.key,N.props,null,j.mode,C),C.ref=vo(j,_,N),C.return=j,C)}function d(j,_,N,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==N.containerInfo||_.stateNode.implementation!==N.implementation?(_=Ed(N,j.mode,C),_.return=j,_):(_=s(_,N.children||[]),_.return=j,_)}function p(j,_,N,C,b){return _===null||_.tag!==7?(_=Is(N,j.mode,C,b),_.return=j,_):(_=s(_,N),_.return=j,_)}function m(j,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return _=xd(""+_,j.mode,N),_.return=j,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ll:return N=$l(_.type,_.key,_.props,null,j.mode,N),N.ref=vo(j,null,_),N.return=j,N;case oi:return _=Ed(_,j.mode,N),_.return=j,_;case kr:var C=_._init;return m(j,C(_._payload),N)}if(So(_)||ho(_))return _=Is(_,j.mode,N,null),_.return=j,_;_l(j,_)}return null}function v(j,_,N,C){var b=_!==null?_.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return b!==null?null:c(j,_,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ll:return N.key===b?u(j,_,N,C):null;case oi:return N.key===b?d(j,_,N,C):null;case kr:return b=N._init,v(j,_,b(N._payload),C)}if(So(N)||ho(N))return b!==null?null:p(j,_,N,C,null);_l(j,N)}return null}function x(j,_,N,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return j=j.get(N)||null,c(_,j,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ll:return j=j.get(C.key===null?N:C.key)||null,u(_,j,C,b);case oi:return j=j.get(C.key===null?N:C.key)||null,d(_,j,C,b);case kr:var M=C._init;return x(j,_,N,M(C._payload),b)}if(So(C)||ho(C))return j=j.get(N)||null,p(_,j,C,b,null);_l(_,C)}return null}function A(j,_,N,C){for(var b=null,M=null,T=_,g=_=0,k=null;T!==null&&g<N.length;g++){T.index>g?(k=T,T=null):k=T.sibling;var y=v(j,T,N[g],C);if(y===null){T===null&&(T=k);break}t&&T&&y.alternate===null&&e(j,T),_=i(y,_,g),M===null?b=y:M.sibling=y,M=y,T=k}if(g===N.length)return n(j,T),et&&ms(j,g),b;if(T===null){for(;g<N.length;g++)T=m(j,N[g],C),T!==null&&(_=i(T,_,g),M===null?b=T:M.sibling=T,M=T);return et&&ms(j,g),b}for(T=r(j,T);g<N.length;g++)k=x(T,j,g,N[g],C),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?g:k.key),_=i(k,_,g),M===null?b=k:M.sibling=k,M=k);return t&&T.forEach(function(E){return e(j,E)}),et&&ms(j,g),b}function R(j,_,N,C){var b=ho(N);if(typeof b!="function")throw Error(Q(150));if(N=b.call(N),N==null)throw Error(Q(151));for(var M=b=null,T=_,g=_=0,k=null,y=N.next();T!==null&&!y.done;g++,y=N.next()){T.index>g?(k=T,T=null):k=T.sibling;var E=v(j,T,y.value,C);if(E===null){T===null&&(T=k);break}t&&T&&E.alternate===null&&e(j,T),_=i(E,_,g),M===null?b=E:M.sibling=E,M=E,T=k}if(y.done)return n(j,T),et&&ms(j,g),b;if(T===null){for(;!y.done;g++,y=N.next())y=m(j,y.value,C),y!==null&&(_=i(y,_,g),M===null?b=y:M.sibling=y,M=y);return et&&ms(j,g),b}for(T=r(j,T);!y.done;g++,y=N.next())y=x(T,j,g,y.value,C),y!==null&&(t&&y.alternate!==null&&T.delete(y.key===null?g:y.key),_=i(y,_,g),M===null?b=y:M.sibling=y,M=y);return t&&T.forEach(function(w){return e(j,w)}),et&&ms(j,g),b}function P(j,_,N,C){if(typeof N=="object"&&N!==null&&N.type===ai&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ll:e:{for(var b=N.key,M=_;M!==null;){if(M.key===b){if(b=N.type,b===ai){if(M.tag===7){n(j,M.sibling),_=s(M,N.props.children),_.return=j,j=_;break e}}else if(M.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===kr&&jg(b)===M.type){n(j,M.sibling),_=s(M,N.props),_.ref=vo(j,M,N),_.return=j,j=_;break e}n(j,M);break}else e(j,M);M=M.sibling}N.type===ai?(_=Is(N.props.children,j.mode,C,N.key),_.return=j,j=_):(C=$l(N.type,N.key,N.props,null,j.mode,C),C.ref=vo(j,_,N),C.return=j,j=C)}return a(j);case oi:e:{for(M=N.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===N.containerInfo&&_.stateNode.implementation===N.implementation){n(j,_.sibling),_=s(_,N.children||[]),_.return=j,j=_;break e}else{n(j,_);break}else e(j,_);_=_.sibling}_=Ed(N,j.mode,C),_.return=j,j=_}return a(j);case kr:return M=N._init,P(j,_,M(N._payload),C)}if(So(N))return A(j,_,N,C);if(ho(N))return R(j,_,N,C);_l(j,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,_!==null&&_.tag===6?(n(j,_.sibling),_=s(_,N),_.return=j,j=_):(n(j,_),_=xd(N,j.mode,C),_.return=j,j=_),a(j)):n(j,_)}return P}var Pi=J_(!0),Z_=J_(!1),hc=as(null),fc=null,mi=null,Af=null;function Cf(){Af=mi=fc=null}function Rf(t){var e=hc.current;Ze(hc),t._currentValue=e}function mh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ti(t,e){fc=t,Af=mi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Af!==t)if(t={context:t,memoizedValue:e,next:null},mi===null){if(fc===null)throw Error(Q(308));mi=t,fc.dependencies={lanes:0,firstContext:t}}else mi=mi.next=t;return e}var xs=null;function Pf(t){xs===null?xs=[t]:xs.push(t)}function e0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Pf(e)):(n.next=s.next,s.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jr=!1;function bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hr(t,n)}return s=r.interleaved,s===null?(e.next=e,Pf(r)):(e.next=s.next,s.next=e),r.interleaved=e,hr(t,n)}function Ol(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yf(t,n)}}function Ag(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pc(t,e,n,r){var s=t.updateQueue;jr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==a&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,p=d=u=null,c=i;do{var v=c.lane,x=c.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var A=t,R=c;switch(v=e,x=n,R.tag){case 1:if(A=R.payload,typeof A=="function"){m=A.call(x,m,v);break e}m=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=R.payload,v=typeof A=="function"?A.call(x,m,v):A,v==null)break e;m=st({},m,v);break e;case 2:jr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[c]:v.push(c))}else x={eventTime:x,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=x,u=m):p=p.next=x,a|=v;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;v=c,c=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ps|=a,t.lanes=a,t.memoizedState=m}}function Cg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var Ca={},Bn=as(Ca),la=as(Ca),ca=as(Ca);function Es(t){if(t===Ca)throw Error(Q(174));return t}function Df(t,e){switch(Qe(ca,e),Qe(la,t),Qe(Bn,Ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qd(e,t)}Ze(Bn),Qe(Bn,e)}function bi(){Ze(Bn),Ze(la),Ze(ca)}function n0(t){Es(ca.current);var e=Es(Bn.current),n=Qd(e,t.type);e!==n&&(Qe(la,t),Qe(Bn,n))}function Lf(t){la.current===t&&(Ze(Bn),Ze(la))}var nt=as(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var md=[];function Mf(){for(var t=0;t<md.length;t++)md[t]._workInProgressVersionPrimary=null;md.length=0}var Vl=_r.ReactCurrentDispatcher,gd=_r.ReactCurrentBatchConfig,Rs=0,rt=null,gt=null,xt=null,gc=!1,Vo=!1,ua=0,XT=0;function Dt(){throw Error(Q(321))}function Of(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pn(t[n],e[n]))return!1;return!0}function Vf(t,e,n,r,s,i){if(Rs=i,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vl.current=t===null||t.memoizedState===null?tS:nS,t=n(r,s),Vo){i=0;do{if(Vo=!1,ua=0,25<=i)throw Error(Q(301));i+=1,xt=gt=null,e.updateQueue=null,Vl.current=rS,t=n(r,s)}while(Vo)}if(Vl.current=vc,e=gt!==null&&gt.next!==null,Rs=0,xt=gt=rt=null,gc=!1,e)throw Error(Q(300));return t}function Ff(){var t=ua!==0;return ua=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?rt.memoizedState=xt=t:xt=xt.next=t,xt}function xn(){if(gt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=xt===null?rt.memoizedState:xt.next;if(e!==null)xt=e,gt=t;else{if(t===null)throw Error(Q(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},xt===null?rt.memoizedState=xt=t:xt=xt.next=t}return xt}function da(t,e){return typeof e=="function"?e(t):e}function vd(t){var e=xn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=gt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var p=d.lane;if((Rs&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,rt.lanes|=p,Ps|=p}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,Pn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,rt.lanes|=i,Ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yd(t){var e=xn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Pn(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function r0(){}function s0(t,e){var n=rt,r=xn(),s=e(),i=!Pn(r.memoizedState,s);if(i&&(r.memoizedState=s,Zt=!0),r=r.queue,Uf(a0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,ha(9,o0.bind(null,n,r,s,e),void 0,null),Et===null)throw Error(Q(349));Rs&30||i0(n,e,s)}return s}function i0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o0(t,e,n,r){e.value=n,e.getSnapshot=r,l0(e)&&c0(t)}function a0(t,e,n){return n(function(){l0(e)&&c0(t)})}function l0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pn(t,n)}catch{return!0}}function c0(t){var e=hr(t,1);e!==null&&Rn(e,t,1,-1)}function Rg(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e.queue=t,t=t.dispatch=eS.bind(null,rt,t),[e.memoizedState,t]}function ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function u0(){return xn().memoizedState}function Fl(t,e,n,r){var s=On();rt.flags|=t,s.memoizedState=ha(1|e,n,void 0,r===void 0?null:r)}function Zc(t,e,n,r){var s=xn();r=r===void 0?null:r;var i=void 0;if(gt!==null){var a=gt.memoizedState;if(i=a.destroy,r!==null&&Of(r,a.deps)){s.memoizedState=ha(e,n,i,r);return}}rt.flags|=t,s.memoizedState=ha(1|e,n,i,r)}function Pg(t,e){return Fl(8390656,8,t,e)}function Uf(t,e){return Zc(2048,8,t,e)}function d0(t,e){return Zc(4,2,t,e)}function h0(t,e){return Zc(4,4,t,e)}function f0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p0(t,e,n){return n=n!=null?n.concat([t]):null,Zc(4,4,f0.bind(null,e,t),n)}function zf(){}function m0(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Of(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g0(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Of(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function v0(t,e,n){return Rs&21?(Pn(n,e)||(n=E_(),rt.lanes|=n,Ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function JT(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=gd.transition;gd.transition={};try{t(!1),e()}finally{Ue=n,gd.transition=r}}function y0(){return xn().memoizedState}function ZT(t,e,n){var r=Kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_0(t))w0(e,n);else if(n=e0(t,e,n,r),n!==null){var s=Wt();Rn(n,t,r,s),x0(n,e,r)}}function eS(t,e,n){var r=Kr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_0(t))w0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,Pn(c,a)){var u=e.interleaved;u===null?(s.next=s,Pf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=e0(t,e,s,r),n!==null&&(s=Wt(),Rn(n,t,r,s),x0(n,e,r))}}function _0(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function w0(t,e){Vo=gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function x0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yf(t,n)}}var vc={readContext:wn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},tS={readContext:wn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:Pg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fl(4194308,4,f0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fl(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=On();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZT.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:Rg,useDebugValue:zf,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=Rg(!1),e=t[0];return t=JT.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,s=On();if(et){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Et===null)throw Error(Q(349));Rs&30||i0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Pg(a0.bind(null,r,i,t),[t]),r.flags|=2048,ha(9,o0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=On(),e=Et.identifierPrefix;if(et){var n=rr,r=nr;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nS={readContext:wn,useCallback:m0,useContext:wn,useEffect:Uf,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:vd,useRef:u0,useState:function(){return vd(da)},useDebugValue:zf,useDeferredValue:function(t){var e=xn();return v0(e,gt.memoizedState,t)},useTransition:function(){var t=vd(da)[0],e=xn().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:s0,useId:y0,unstable_isNewReconciler:!1},rS={readContext:wn,useCallback:m0,useContext:wn,useEffect:Uf,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:yd,useRef:u0,useState:function(){return yd(da)},useDebugValue:zf,useDeferredValue:function(t){var e=xn();return gt===null?e.memoizedState=t:v0(e,gt.memoizedState,t)},useTransition:function(){var t=yd(da)[0],e=xn().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:s0,useId:y0,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eu={isMounted:function(t){return(t=t._reactInternals)?qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=Kr(t),i=lr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(Rn(e,t,s,r),Ol(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wt(),s=Kr(t),i=lr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(Rn(e,t,s,r),Ol(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),r=Kr(t),s=lr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hr(t,s,r),e!==null&&(Rn(e,t,r,n),Ol(e,t,r))}};function bg(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!sa(n,r)||!sa(s,i):!0}function E0(t,e,n){var r=!1,s=es,i=e.contextType;return typeof i=="object"&&i!==null?i=wn(i):(s=tn(e)?As:zt.current,r=e.contextTypes,i=(r=r!=null)?Ci(t,s):es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eu.enqueueReplaceState(e,e.state,null)}function vh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=wn(i):(i=tn(e)?As:zt.current,s.context=Ci(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eu.enqueueReplaceState(s,s.state,null),pc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Di(t,e){try{var n="",r=e;do n+=R1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function _d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sS=typeof WeakMap=="function"?WeakMap:Map;function T0(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_c||(_c=!0,jh=r),yh(t,e)},n}function S0(t,e,n){n=lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yh(t,e),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Lg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=yS.bind(null,t,e,n),e.then(t,t))}function Mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Og(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var iS=_r.ReactCurrentOwner,Zt=!1;function Ht(t,e,n,r){e.child=t===null?Z_(e,null,n,r):Pi(e,t.child,n,r)}function Vg(t,e,n,r,s){n=n.render;var i=e.ref;return Ti(e,s),r=Vf(t,e,n,r,i,s),n=Ff(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(et&&n&&Nf(e),e.flags|=1,Ht(t,e,r,s),e.child)}function Fg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,I0(t,e,i,r,s)):(t=$l(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:sa,n(a,r)&&t.ref===e.ref)return fr(t,e,s)}return e.flags|=1,t=Gr(i,r),t.ref=e.ref,t.return=e,e.child=t}function I0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(sa(i,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,fr(t,e,s)}return _h(t,e,n,r,s)}function N0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(vi,on),on|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(vi,on),on|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qe(vi,on),on|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Qe(vi,on),on|=r;return Ht(t,e,s,n),e.child}function k0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _h(t,e,n,r,s){var i=tn(n)?As:zt.current;return i=Ci(e,i),Ti(e,s),n=Vf(t,e,n,r,i,s),r=Ff(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(et&&r&&Nf(e),e.flags|=1,Ht(t,e,n,s),e.child)}function Ug(t,e,n,r,s){if(tn(n)){var i=!0;cc(e)}else i=!1;if(Ti(e,s),e.stateNode===null)Ul(t,e),E0(e,n,r),vh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=wn(d):(d=tn(n)?As:zt.current,d=Ci(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Dg(e,a,r,d),jr=!1;var v=e.memoizedState;a.state=v,pc(e,r,a,s),u=e.memoizedState,c!==r||v!==u||en.current||jr?(typeof p=="function"&&(gh(e,n,p,r),u=e.memoizedState),(c=jr||bg(e,n,c,r,v,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,t0(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:kn(e.type,c),a.props=d,m=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=wn(u):(u=tn(n)?As:zt.current,u=Ci(e,u));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||v!==u)&&Dg(e,a,r,u),jr=!1,v=e.memoizedState,a.state=v,pc(e,r,a,s);var A=e.memoizedState;c!==m||v!==A||en.current||jr?(typeof x=="function"&&(gh(e,n,x,r),A=e.memoizedState),(d=jr||bg(e,n,d,r,v,A,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,A,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,A,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),a.props=r,a.state=A,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return wh(t,e,n,r,i,s)}function wh(t,e,n,r,s,i){k0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ig(e,n,!1),fr(t,e,i);r=e.stateNode,iS.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Pi(e,t.child,null,i),e.child=Pi(e,null,c,i)):Ht(t,e,c,i),e.memoizedState=r.state,s&&Ig(e,n,!0),e.child}function j0(t){var e=t.stateNode;e.pendingContext?Sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sg(t,e.context,!1),Df(t,e.containerInfo)}function zg(t,e,n,r,s){return Ri(),jf(s),e.flags|=256,Ht(t,e,n,r),e.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function Eh(t){return{baseLanes:t,cachePool:null,transitions:null}}function A0(t,e,n){var r=e.pendingProps,s=nt.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qe(nt,s&1),t===null)return ph(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ru(a,r,0,null),t=Is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Eh(n),e.memoizedState=xh,t):Bf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return oS(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Gr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Gr(c,i):(i=Is(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Eh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=xh,r}return i=t.child,t=i.sibling,r=Gr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bf(t,e){return e=ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wl(t,e,n,r){return r!==null&&jf(r),Pi(e,t.child,null,n),t=Bf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oS(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=_d(Error(Q(422))),wl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ru({mode:"visible",children:r.children},s,0,null),i=Is(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pi(e,t.child,null,a),e.child.memoizedState=Eh(a),e.memoizedState=xh,i);if(!(e.mode&1))return wl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(Q(419)),r=_d(i,r,void 0),wl(t,e,a,r)}if(c=(a&t.childLanes)!==0,Zt||c){if(r=Et,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(t,s),Rn(r,t,s,-1))}return Gf(),r=_d(Error(Q(421))),wl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_S.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,an=qr(s.nextSibling),dn=e,et=!0,An=null,t!==null&&(mn[gn++]=nr,mn[gn++]=rr,mn[gn++]=Cs,nr=t.id,rr=t.overflow,Cs=e),e=Bf(e,r.children),e.flags|=4096,e)}function Bg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mh(t.return,e,n)}function wd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function C0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ht(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bg(t,n,e);else if(t.tag===19)Bg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(nt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wd(e,!0,n,null,i);break;case"together":wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ul(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aS(t,e,n){switch(e.tag){case 3:j0(e),Ri();break;case 5:n0(e);break;case 1:tn(e.type)&&cc(e);break;case 4:Df(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qe(hc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?A0(t,e,n):(Qe(nt,nt.current&1),t=fr(t,e,n),t!==null?t.sibling:null);Qe(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return C0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,N0(t,e,n)}return fr(t,e,n)}var R0,Th,P0,b0;R0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Th=function(){};P0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Es(Bn.current);var i=null;switch(n){case"input":s=Hd(t,s),r=Hd(t,r),i=[];break;case"select":s=st({},s,{value:void 0}),r=st({},r,{value:void 0}),i=[];break;case"textarea":s=Gd(t,s),r=Gd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ac)}Yd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Xe("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};b0=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lS(t,e,n){var r=e.pendingProps;switch(kf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return tn(e.type)&&lc(),Lt(e),null;case 3:return r=e.stateNode,bi(),Ze(en),Ze(zt),Mf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,An!==null&&(Rh(An),An=null))),Th(t,e),Lt(e),null;case 5:Lf(e);var s=Es(ca.current);if(n=e.type,t!==null&&e.stateNode!=null)P0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Lt(e),null}if(t=Es(Bn.current),yl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vn]=e,r[aa]=i,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)Xe(No[s],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":Xm(r,i),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",r);break;case"textarea":Zm(r,i),Xe("invalid",r)}Yd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&vl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&vl(r.textContent,c,t),s=["children",""+c]):Xo.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Xe("scroll",r)}switch(n){case"input":cl(r),Jm(r,i,!0);break;case"textarea":cl(r),eg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ac)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Vn]=e,t[aa]=r,R0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Xd(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),s=r;break;case"iframe":case"object":case"embed":Xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)Xe(No[s],t);s=r;break;case"source":Xe("error",t),s=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),s=r;break;case"details":Xe("toggle",t),s=r;break;case"input":Xm(t,r),s=Hd(t,r),Xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=st({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":Zm(t,r),s=Gd(t,r),Xe("invalid",t);break;default:s=r}Yd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?u_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&l_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Jo(t,u):typeof u=="number"&&Jo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Xe("scroll",t):u!=null&&hf(t,i,u,a))}switch(n){case"input":cl(t),Jm(t,r,!1);break;case"textarea":cl(t),eg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_i(t,!!r.multiple,i,!1):r.defaultValue!=null&&_i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)b0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Es(ca.current),Es(Bn.current),yl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vn]=e,(i=r.nodeValue!==n)&&(t=dn,t!==null))switch(t.tag){case 3:vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=e,e.stateNode=r}return Lt(e),null;case 13:if(Ze(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&an!==null&&e.mode&1&&!(e.flags&128))X_(),Ri(),e.flags|=98560,i=!1;else if(i=yl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Vn]=e}else Ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),i=!1}else An!==null&&(Rh(An),An=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?vt===0&&(vt=3):Gf())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return bi(),Th(t,e),t===null&&ia(e.stateNode.containerInfo),Lt(e),null;case 10:return Rf(e.type._context),Lt(e),null;case 17:return tn(e.type)&&lc(),Lt(e),null;case 19:if(Ze(nt),i=e.memoizedState,i===null)return Lt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)yo(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=mc(t),a!==null){for(e.flags|=128,yo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(nt,nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ht()>Li&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=mc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!et)return Lt(e),null}else 2*ht()-i.renderingStartTime>Li&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ht(),e.sibling=null,n=nt.current,Qe(nt,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Kf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?on&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function cS(t,e){switch(kf(e),e.tag){case 1:return tn(e.type)&&lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bi(),Ze(en),Ze(zt),Mf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lf(e),null;case 13:if(Ze(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(nt),null;case 4:return bi(),null;case 10:return Rf(e.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var xl=!1,Vt=!1,uS=typeof WeakSet=="function"?WeakSet:Set,se=null;function gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lt(t,e,r)}else n.current=null}function Sh(t,e,n){try{n()}catch(r){lt(t,e,r)}}var $g=!1;function dS(t,e){if(ah=sc,t=V_(),If(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,p=0,m=t,v=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(x=m.firstChild)!==null;)v=m,m=x;for(;;){if(m===t)break t;if(v===n&&++d===s&&(c=a),v===i&&++p===r&&(u=a),(x=m.nextSibling)!==null)break;m=v,v=m.parentNode}m=x}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(lh={focusedElem:t,selectionRange:n},sc=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var R=A.memoizedProps,P=A.memoizedState,j=e.stateNode,_=j.getSnapshotBeforeUpdate(e.elementType===e.type?R:kn(e.type,R),P);j.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(C){lt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return A=$g,$g=!1,A}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sh(e,n,i)}s=s.next}while(s!==r)}}function tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ih(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D0(t){var e=t.alternate;e!==null&&(t.alternate=null,D0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vn],delete e[aa],delete e[dh],delete e[KT],delete e[GT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L0(t){return t.tag===5||t.tag===3||t.tag===4}function qg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ac));else if(r!==4&&(t=t.child,t!==null))for(Nh(t,e,n),t=t.sibling;t!==null;)Nh(t,e,n),t=t.sibling}function kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kh(t,e,n),t=t.sibling;t!==null;)kh(t,e,n),t=t.sibling}var It=null,jn=!1;function Sr(t,e,n){for(n=n.child;n!==null;)M0(t,e,n),n=n.sibling}function M0(t,e,n){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Kc,n)}catch{}switch(n.tag){case 5:Vt||gi(n,e);case 6:var r=It,s=jn;It=null,Sr(t,e,n),It=r,jn=s,It!==null&&(jn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(jn?(t=It,n=n.stateNode,t.nodeType===8?fd(t.parentNode,n):t.nodeType===1&&fd(t,n),na(t)):fd(It,n.stateNode));break;case 4:r=It,s=jn,It=n.stateNode.containerInfo,jn=!0,Sr(t,e,n),It=r,jn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Sh(n,e,a),s=s.next}while(s!==r)}Sr(t,e,n);break;case 1:if(!Vt&&(gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){lt(n,e,c)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Sr(t,e,n),Vt=r):Sr(t,e,n);break;default:Sr(t,e,n)}}function Hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uS),e.forEach(function(r){var s=wS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:It=c.stateNode,jn=!1;break e;case 3:It=c.stateNode.containerInfo,jn=!0;break e;case 4:It=c.stateNode.containerInfo,jn=!0;break e}c=c.return}if(It===null)throw Error(Q(160));M0(i,a,s),It=null,jn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){lt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O0(e,t),e=e.sibling}function O0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),Mn(t),r&4){try{Fo(3,t,t.return),tu(3,t)}catch(R){lt(t,t.return,R)}try{Fo(5,t,t.return)}catch(R){lt(t,t.return,R)}}break;case 1:Nn(e,t),Mn(t),r&512&&n!==null&&gi(n,n.return);break;case 5:if(Nn(e,t),Mn(t),r&512&&n!==null&&gi(n,n.return),t.flags&32){var s=t.stateNode;try{Jo(s,"")}catch(R){lt(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&i_(s,i),Xd(c,a);var d=Xd(c,i);for(a=0;a<u.length;a+=2){var p=u[a],m=u[a+1];p==="style"?u_(s,m):p==="dangerouslySetInnerHTML"?l_(s,m):p==="children"?Jo(s,m):hf(s,p,m,d)}switch(c){case"input":Wd(s,i);break;case"textarea":o_(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?_i(s,!!i.multiple,x,!1):v!==!!i.multiple&&(i.defaultValue!=null?_i(s,!!i.multiple,i.defaultValue,!0):_i(s,!!i.multiple,i.multiple?[]:"",!1))}s[aa]=i}catch(R){lt(t,t.return,R)}}break;case 6:if(Nn(e,t),Mn(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){lt(t,t.return,R)}}break;case 3:if(Nn(e,t),Mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{na(e.containerInfo)}catch(R){lt(t,t.return,R)}break;case 4:Nn(e,t),Mn(t);break;case 13:Nn(e,t),Mn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hf=ht())),r&4&&Hg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(d=Vt)||p,Nn(e,t),Vt=d):Nn(e,t),Mn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(se=t,p=t.child;p!==null;){for(m=se=p;se!==null;){switch(v=se,x=v.child,v.tag){case 0:case 11:case 14:case 15:Fo(4,v,v.return);break;case 1:gi(v,v.return);var A=v.stateNode;if(typeof A.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(R){lt(r,n,R)}}break;case 5:gi(v,v.return);break;case 22:if(v.memoizedState!==null){Kg(m);continue}}x!==null?(x.return=v,se=x):Kg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=c_("display",a))}catch(R){lt(t,t.return,R)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){lt(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Nn(e,t),Mn(t),r&4&&Hg(t);break;case 21:break;default:Nn(e,t),Mn(t)}}function Mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L0(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Jo(s,""),r.flags&=-33);var i=qg(t);kh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=qg(t);Nh(t,c,a);break;default:throw Error(Q(161))}}catch(u){lt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hS(t,e,n){se=t,V0(t)}function V0(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||xl;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Vt;c=xl;var d=Vt;if(xl=a,(Vt=u)&&!d)for(se=s;se!==null;)a=se,u=a.child,a.tag===22&&a.memoizedState!==null?Gg(s):u!==null?(u.return=a,se=u):Gg(s);for(;i!==null;)se=i,V0(i),i=i.sibling;se=s,xl=c,Vt=d}Wg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):Wg(t)}}function Wg(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Cg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cg(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&na(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Vt||e.flags&512&&Ih(e)}catch(v){lt(e,e.return,v)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Kg(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Gg(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tu(4,e)}catch(u){lt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){lt(e,s,u)}}var i=e.return;try{Ih(e)}catch(u){lt(e,i,u)}break;case 5:var a=e.return;try{Ih(e)}catch(u){lt(e,a,u)}}}catch(u){lt(e,e.return,u)}if(e===t){se=null;break}var c=e.sibling;if(c!==null){c.return=e.return,se=c;break}se=e.return}}var fS=Math.ceil,yc=_r.ReactCurrentDispatcher,$f=_r.ReactCurrentOwner,yn=_r.ReactCurrentBatchConfig,Me=0,Et=null,pt=null,jt=0,on=0,vi=as(0),vt=0,fa=null,Ps=0,nu=0,qf=0,Uo=null,Xt=null,Hf=0,Li=1/0,Zn=null,_c=!1,jh=null,Wr=null,El=!1,Vr=null,wc=0,zo=0,Ah=null,zl=-1,Bl=0;function Wt(){return Me&6?ht():zl!==-1?zl:zl=ht()}function Kr(t){return t.mode&1?Me&2&&jt!==0?jt&-jt:YT.transition!==null?(Bl===0&&(Bl=E_()),Bl):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:A_(t.type)),t):1}function Rn(t,e,n,r){if(50<zo)throw zo=0,Ah=null,Error(Q(185));ka(t,n,r),(!(Me&2)||t!==Et)&&(t===Et&&(!(Me&2)&&(nu|=n),vt===4&&Rr(t,jt)),nn(t,r),n===1&&Me===0&&!(e.mode&1)&&(Li=ht()+500,Jc&&ls()))}function nn(t,e){var n=t.callbackNode;Y1(t,e);var r=rc(t,t===Et?jt:0);if(r===0)n!==null&&rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rg(n),e===1)t.tag===0?QT(Qg.bind(null,t)):G_(Qg.bind(null,t)),HT(function(){!(Me&6)&&ls()}),n=null;else{switch(T_(r)){case 1:n=vf;break;case 4:n=w_;break;case 16:n=nc;break;case 536870912:n=x_;break;default:n=nc}n=W0(n,F0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F0(t,e){if(zl=-1,Bl=0,Me&6)throw Error(Q(327));var n=t.callbackNode;if(Si()&&t.callbackNode!==n)return null;var r=rc(t,t===Et?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xc(t,r);else{e=r;var s=Me;Me|=2;var i=z0();(Et!==t||jt!==e)&&(Zn=null,Li=ht()+500,Ss(t,e));do try{gS();break}catch(c){U0(t,c)}while(!0);Cf(),yc.current=i,Me=s,pt!==null?e=0:(Et=null,jt=0,e=vt)}if(e!==0){if(e===2&&(s=nh(t),s!==0&&(r=s,e=Ch(t,s))),e===1)throw n=fa,Ss(t,0),Rr(t,r),nn(t,ht()),n;if(e===6)Rr(t,r);else{if(s=t.current.alternate,!(r&30)&&!pS(s)&&(e=xc(t,r),e===2&&(i=nh(t),i!==0&&(r=i,e=Ch(t,i))),e===1))throw n=fa,Ss(t,0),Rr(t,r),nn(t,ht()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:gs(t,Xt,Zn);break;case 3:if(Rr(t,r),(r&130023424)===r&&(e=Hf+500-ht(),10<e)){if(rc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=uh(gs.bind(null,t,Xt,Zn),e);break}gs(t,Xt,Zn);break;case 4:if(Rr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Cn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fS(r/1960))-r,10<r){t.timeoutHandle=uh(gs.bind(null,t,Xt,Zn),r);break}gs(t,Xt,Zn);break;case 5:gs(t,Xt,Zn);break;default:throw Error(Q(329))}}}return nn(t,ht()),t.callbackNode===n?F0.bind(null,t):null}function Ch(t,e){var n=Uo;return t.current.memoizedState.isDehydrated&&(Ss(t,e).flags|=256),t=xc(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Rh(e)),t}function Rh(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function pS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~qf,e&=~nu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function Qg(t){if(Me&6)throw Error(Q(327));Si();var e=rc(t,0);if(!(e&1))return nn(t,ht()),null;var n=xc(t,e);if(t.tag!==0&&n===2){var r=nh(t);r!==0&&(e=r,n=Ch(t,r))}if(n===1)throw n=fa,Ss(t,0),Rr(t,e),nn(t,ht()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,Xt,Zn),nn(t,ht()),null}function Wf(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(Li=ht()+500,Jc&&ls())}}function bs(t){Vr!==null&&Vr.tag===0&&!(Me&6)&&Si();var e=Me;Me|=1;var n=yn.transition,r=Ue;try{if(yn.transition=null,Ue=1,t)return t()}finally{Ue=r,yn.transition=n,Me=e,!(Me&6)&&ls()}}function Kf(){on=vi.current,Ze(vi)}function Ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qT(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(kf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lc();break;case 3:bi(),Ze(en),Ze(zt),Mf();break;case 5:Lf(r);break;case 4:bi();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:Rf(r.type._context);break;case 22:case 23:Kf()}n=n.return}if(Et=t,pt=t=Gr(t.current,null),jt=on=e,vt=0,fa=null,qf=nu=Ps=0,Xt=Uo=null,xs!==null){for(e=0;e<xs.length;e++)if(n=xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}xs=null}return t}function U0(t,e){do{var n=pt;try{if(Cf(),Vl.current=vc,gc){for(var r=rt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}gc=!1}if(Rs=0,xt=gt=rt=null,Vo=!1,ua=0,$f.current=null,n===null||n.return===null){vt=1,fa=e,pt=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=jt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Mg(a);if(x!==null){x.flags&=-257,Og(x,a,c,i,e),x.mode&1&&Lg(i,d,e),e=x,u=d;var A=e.updateQueue;if(A===null){var R=new Set;R.add(u),e.updateQueue=R}else A.add(u);break e}else{if(!(e&1)){Lg(i,d,e),Gf();break e}u=Error(Q(426))}}else if(et&&c.mode&1){var P=Mg(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Og(P,a,c,i,e),jf(Di(u,c));break e}}i=u=Di(u,c),vt!==4&&(vt=2),Uo===null?Uo=[i]:Uo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var j=T0(i,u,e);Ag(i,j);break e;case 1:c=u;var _=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Wr===null||!Wr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=S0(i,c,e);Ag(i,C);break e}}i=i.return}while(i!==null)}$0(n)}catch(b){e=b,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function z0(){var t=yc.current;return yc.current=vc,t===null?vc:t}function Gf(){(vt===0||vt===3||vt===2)&&(vt=4),Et===null||!(Ps&268435455)&&!(nu&268435455)||Rr(Et,jt)}function xc(t,e){var n=Me;Me|=2;var r=z0();(Et!==t||jt!==e)&&(Zn=null,Ss(t,e));do try{mS();break}catch(s){U0(t,s)}while(!0);if(Cf(),Me=n,yc.current=r,pt!==null)throw Error(Q(261));return Et=null,jt=0,vt}function mS(){for(;pt!==null;)B0(pt)}function gS(){for(;pt!==null&&!z1();)B0(pt)}function B0(t){var e=H0(t.alternate,t,on);t.memoizedProps=t.pendingProps,e===null?$0(t):pt=e,$f.current=null}function $0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cS(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,pt=null;return}}else if(n=lS(n,e,on),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);vt===0&&(vt=5)}function gs(t,e,n){var r=Ue,s=yn.transition;try{yn.transition=null,Ue=1,vS(t,e,n,r)}finally{yn.transition=s,Ue=r}return null}function vS(t,e,n,r){do Si();while(Vr!==null);if(Me&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(X1(t,i),t===Et&&(pt=Et=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||El||(El=!0,W0(nc,function(){return Si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=yn.transition,yn.transition=null;var a=Ue;Ue=1;var c=Me;Me|=4,$f.current=null,dS(t,n),O0(n,t),OT(lh),sc=!!ah,lh=ah=null,t.current=n,hS(n),B1(),Me=c,Ue=a,yn.transition=i}else t.current=n;if(El&&(El=!1,Vr=t,wc=s),i=t.pendingLanes,i===0&&(Wr=null),H1(n.stateNode),nn(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_c)throw _c=!1,t=jh,jh=null,t;return wc&1&&t.tag!==0&&Si(),i=t.pendingLanes,i&1?t===Ah?zo++:(zo=0,Ah=t):zo=0,ls(),null}function Si(){if(Vr!==null){var t=T_(wc),e=yn.transition,n=Ue;try{if(yn.transition=null,Ue=16>t?16:t,Vr===null)var r=!1;else{if(t=Vr,Vr=null,wc=0,Me&6)throw Error(Q(331));var s=Me;for(Me|=4,se=t.current;se!==null;){var i=se,a=i.child;if(se.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(se=d;se!==null;){var p=se;switch(p.tag){case 0:case 11:case 15:Fo(8,p,i)}var m=p.child;if(m!==null)m.return=p,se=m;else for(;se!==null;){p=se;var v=p.sibling,x=p.return;if(D0(p),p===d){se=null;break}if(v!==null){v.return=x,se=v;break}se=x}}}var A=i.alternate;if(A!==null){var R=A.child;if(R!==null){A.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}se=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,se=a;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,se=j;break e}se=i.return}}var _=t.current;for(se=_;se!==null;){a=se;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,se=N;else e:for(a=_;se!==null;){if(c=se,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:tu(9,c)}}catch(b){lt(c,c.return,b)}if(c===a){se=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,se=C;break e}se=c.return}}if(Me=s,ls(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Kc,t)}catch{}r=!0}return r}finally{Ue=n,yn.transition=e}}return!1}function Yg(t,e,n){e=Di(n,e),e=T0(t,e,1),t=Hr(t,e,1),e=Wt(),t!==null&&(ka(t,1,e),nn(t,e))}function lt(t,e,n){if(t.tag===3)Yg(t,t,n);else for(;e!==null;){if(e.tag===3){Yg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){t=Di(n,t),t=S0(e,t,1),e=Hr(e,t,1),t=Wt(),e!==null&&(ka(e,1,t),nn(e,t));break}}e=e.return}}function yS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(jt&n)===n&&(vt===4||vt===3&&(jt&130023424)===jt&&500>ht()-Hf?Ss(t,0):qf|=n),nn(t,e)}function q0(t,e){e===0&&(t.mode&1?(e=hl,hl<<=1,!(hl&130023424)&&(hl=4194304)):e=1);var n=Wt();t=hr(t,e),t!==null&&(ka(t,e,n),nn(t,n))}function _S(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),q0(t,n)}function wS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),q0(t,n)}var H0;H0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,aS(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,et&&e.flags&1048576&&Q_(e,dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ul(t,e),t=e.pendingProps;var s=Ci(e,zt.current);Ti(e,n),s=Vf(null,e,r,t,s,n);var i=Ff();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)?(i=!0,cc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bf(e),s.updater=eu,e.stateNode=s,s._reactInternals=e,vh(e,r,t,n),e=wh(null,e,r,!0,i,n)):(e.tag=0,et&&i&&Nf(e),Ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ul(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ES(r),t=kn(r,t),s){case 0:e=_h(null,e,r,t,n);break e;case 1:e=Ug(null,e,r,t,n);break e;case 11:e=Vg(null,e,r,t,n);break e;case 14:e=Fg(null,e,r,kn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),_h(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Ug(t,e,r,s,n);case 3:e:{if(j0(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,t0(t,e),pc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Di(Error(Q(423)),e),e=zg(t,e,r,n,s);break e}else if(r!==s){s=Di(Error(Q(424)),e),e=zg(t,e,r,n,s);break e}else for(an=qr(e.stateNode.containerInfo.firstChild),dn=e,et=!0,An=null,n=Z_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===s){e=fr(t,e,n);break e}Ht(t,e,r,n)}e=e.child}return e;case 5:return n0(e),t===null&&ph(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ch(r,s)?a=null:i!==null&&ch(r,i)&&(e.flags|=32),k0(t,e),Ht(t,e,a,n),e.child;case 6:return t===null&&ph(e),null;case 13:return A0(t,e,n);case 4:return Df(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):Ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Vg(t,e,r,s,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Qe(hc,r._currentValue),r._currentValue=a,i!==null)if(Pn(i.value,a)){if(i.children===s.children&&!en.current){e=fr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=lr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),mh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Q(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),mh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ti(e,n),s=wn(s),r=r(s),e.flags|=1,Ht(t,e,r,n),e.child;case 14:return r=e.type,s=kn(r,e.pendingProps),s=kn(r.type,s),Fg(t,e,r,s,n);case 15:return I0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Ul(t,e),e.tag=1,tn(r)?(t=!0,cc(e)):t=!1,Ti(e,n),E0(e,r,s),vh(e,r,s,n),wh(null,e,r,!0,t,n);case 19:return C0(t,e,n);case 22:return N0(t,e,n)}throw Error(Q(156,e.tag))};function W0(t,e){return __(t,e)}function xS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,r){return new xS(t,e,n,r)}function Qf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ES(t){if(typeof t=="function")return Qf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pf)return 11;if(t===mf)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $l(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Qf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ai:return Is(n.children,s,i,e);case ff:a=8,s|=8;break;case zd:return t=vn(12,n,e,s|2),t.elementType=zd,t.lanes=i,t;case Bd:return t=vn(13,n,e,s),t.elementType=Bd,t.lanes=i,t;case $d:return t=vn(19,n,e,s),t.elementType=$d,t.lanes=i,t;case n_:return ru(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e_:a=10;break e;case t_:a=9;break e;case pf:a=11;break e;case mf:a=14;break e;case kr:a=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=vn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Is(t,e,n,r){return t=vn(7,t,r,e),t.lanes=n,t}function ru(t,e,n,r){return t=vn(22,t,r,e),t.elementType=n_,t.lanes=n,t.stateNode={isHidden:!1},t}function xd(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function Ed(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nd(0),this.expirationTimes=nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yf(t,e,n,r,s,i,a,c,u){return t=new TS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bf(i),t}function SS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K0(t){if(!t)return es;t=t._reactInternals;e:{if(qs(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(tn(n))return K_(t,n,e)}return e}function G0(t,e,n,r,s,i,a,c,u){return t=Yf(n,r,!0,t,s,i,a,c,u),t.context=K0(null),n=t.current,r=Wt(),s=Kr(n),i=lr(r,s),i.callback=e??null,Hr(n,i,s),t.current.lanes=s,ka(t,s,r),nn(t,r),t}function su(t,e,n,r){var s=e.current,i=Wt(),a=Kr(s);return n=K0(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(s,e,a),t!==null&&(Rn(t,s,a,i),Ol(t,s,a)),a}function Ec(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xf(t,e){Xg(t,e),(t=t.alternate)&&Xg(t,e)}function IS(){return null}var Q0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jf(t){this._internalRoot=t}iu.prototype.render=Jf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));su(t,e,null,null)};iu.prototype.unmount=Jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){su(null,t,null,null)}),e[dr]=null}};function iu(t){this._internalRoot=t}iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=N_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&j_(t)}};function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ou(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jg(){}function NS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ec(a);i.call(d)}}var a=G0(e,r,t,0,null,!1,!1,"",Jg);return t._reactRootContainer=a,t[dr]=a.current,ia(t.nodeType===8?t.parentNode:t),bs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Ec(u);c.call(d)}}var u=Yf(t,0,!1,null,null,!1,!1,"",Jg);return t._reactRootContainer=u,t[dr]=u.current,ia(t.nodeType===8?t.parentNode:t),bs(function(){su(e,u,n,r)}),u}function au(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=Ec(a);c.call(u)}}su(e,a,t,s)}else a=NS(n,e,t,s,r);return Ec(a)}S_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Io(e.pendingLanes);n!==0&&(yf(e,n|1),nn(e,ht()),!(Me&6)&&(Li=ht()+500,ls()))}break;case 13:bs(function(){var r=hr(t,1);if(r!==null){var s=Wt();Rn(r,t,1,s)}}),Xf(t,1)}};_f=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Wt();Rn(e,t,134217728,n)}Xf(t,134217728)}};I_=function(t){if(t.tag===13){var e=Kr(t),n=hr(t,e);if(n!==null){var r=Wt();Rn(n,t,e,r)}Xf(t,e)}};N_=function(){return Ue};k_=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};Zd=function(t,e,n){switch(e){case"input":if(Wd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Xc(r);if(!s)throw Error(Q(90));s_(r),Wd(r,s)}}}break;case"textarea":o_(t,n);break;case"select":e=n.value,e!=null&&_i(t,!!n.multiple,e,!1)}};f_=Wf;p_=bs;var kS={usingClientEntryPoint:!1,Events:[Aa,di,Xc,d_,h_,Wf]},_o={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jS={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v_(t),t===null?null:t.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||IS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{Kc=Tl.inject(jS),zn=Tl}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kS;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zf(e))throw Error(Q(200));return SS(t,e,null,n)};fn.createRoot=function(t,e){if(!Zf(t))throw Error(Q(299));var n=!1,r="",s=Q0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yf(t,1,!1,null,null,n,!1,r,s),t[dr]=e.current,ia(t.nodeType===8?t.parentNode:t),new Jf(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=v_(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return bs(t)};fn.hydrate=function(t,e,n){if(!ou(e))throw Error(Q(200));return au(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Zf(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Q0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=G0(e,null,t,1,n??null,s,!1,i,a),t[dr]=e.current,ia(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new iu(e)};fn.render=function(t,e,n){if(!ou(e))throw Error(Q(200));return au(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!ou(t))throw Error(Q(40));return t._reactRootContainer?(bs(function(){au(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1};fn.unstable_batchedUpdates=Wf;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ou(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return au(t,e,n,!1,r)};fn.version="18.3.1-next-f1338f8080-20240426";function Y0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y0)}catch(t){console.error(t)}}Y0(),Yy.exports=fn;var AS=Yy.exports,Zg=AS;Fd.createRoot=Zg.createRoot,Fd.hydrateRoot=Zg.hydrateRoot;const CS={},ev=t=>{let e;const n=new Set,r=(p,m)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const x=e;e=m??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(A=>A(e,x))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(CS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,u);return u},RS=t=>t?ev(t):ev;var X0={exports:{}},J0={},Z0={exports:{}},ew={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=D;function PS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bS=typeof Object.is=="function"?Object.is:PS,DS=Mi.useState,LS=Mi.useEffect,MS=Mi.useLayoutEffect,OS=Mi.useDebugValue;function VS(t,e){var n=e(),r=DS({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return MS(function(){s.value=n,s.getSnapshot=e,Td(s)&&i({inst:s})},[t,n,e]),LS(function(){return Td(s)&&i({inst:s}),t(function(){Td(s)&&i({inst:s})})},[t]),OS(n),n}function Td(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bS(t,n)}catch{return!0}}function FS(t,e){return e()}var US=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FS:VS;ew.useSyncExternalStore=Mi.useSyncExternalStore!==void 0?Mi.useSyncExternalStore:US;Z0.exports=ew;var zS=Z0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lu=D,BS=zS;function $S(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qS=typeof Object.is=="function"?Object.is:$S,HS=BS.useSyncExternalStore,WS=lu.useRef,KS=lu.useEffect,GS=lu.useMemo,QS=lu.useDebugValue;J0.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=WS(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=GS(function(){function u(x){if(!d){if(d=!0,p=x,x=r(x),s!==void 0&&a.hasValue){var A=a.value;if(s(A,x))return m=A}return m=x}if(A=m,qS(p,x))return A;var R=r(x);return s!==void 0&&s(A,R)?(p=x,A):(p=x,m=R)}var d=!1,p,m,v=n===void 0?null:n;return[function(){return u(e())},v===null?void 0:function(){return u(v())}]},[e,n,r,s]);var c=HS(t,i[0],i[1]);return KS(function(){a.hasValue=!0,a.value=c},[c]),QS(c),c};X0.exports=J0;var YS=X0.exports;const XS=Vy(YS),tw={},{useDebugValue:JS}=cf,{useSyncExternalStoreWithSelector:ZS}=XS;let tv=!1;const eI=t=>t;function tI(t,e=eI,n){(tw?"production":void 0)!=="production"&&n&&!tv&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),tv=!0);const r=ZS(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return JS(r),r}const nv=t=>{(tw?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?RS(t):t,n=(r,s)=>tI(e,r,s);return Object.assign(n,e),n},nI=t=>t?nv(t):nv;var rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},rw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let v=(c&15)<<2|d>>6,x=d&63;u||(x=64,a||(v=64)),r.push(n[p],n[m],n[v],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new sI;const v=i<<2|c>>4;if(r.push(v),d!==64){const x=c<<4&240|d>>2;if(r.push(x),m!==64){const A=d<<6&192|m;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iI=function(t){const e=nw(t);return rw.encodeByteArray(e,!0)},Tc=function(t){return iI(t).replace(/\./g,"")},sw=function(t){try{return rw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=()=>oI().__FIREBASE_DEFAULTS__,lI=()=>{if(typeof process>"u"||typeof rv>"u")return;const t=rv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sw(t[1]);return e&&JSON.parse(e)},cu=()=>{try{return aI()||lI()||cI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iw=t=>{var e,n;return(n=(e=cu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ow=t=>{const e=iw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aw=()=>{var t;return(t=cu())===null||t===void 0?void 0:t.config},lw=t=>{var e;return(e=cu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tc(JSON.stringify(n)),Tc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function hI(){var t;const e=(t=cu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gI(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vI(){return!hI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yI(){try{return typeof indexedDB=="object"}catch{return!1}}function _I(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="FirebaseError";class Qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wI,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ra.prototype.create)}}class Ra{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?xI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Qn(s,c,r)}}function xI(t,e){return t.replace(EI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const EI=/\{\$([^}]+)}/g;function TI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(sv(i)&&sv(a)){if(!Sc(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function sv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ko(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SI(t,e){const n=new II(t,e);return n.subscribe.bind(n)}class II{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sd),s.error===void 0&&(s.error=Sd),s.complete===void 0&&(s.complete=Sd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AI(e))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vs){return this.instances.has(e)}getOptions(e=vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vs){return this.component?this.component.multipleInstances?e:vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jI(t){return t===vs?void 0:t}function AI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const RI={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},PI=Pe.INFO,bI={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},DI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ep{constructor(e){this.name=e,this._logLevel=PI,this._logHandler=DI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const LI=(t,e)=>e.some(n=>t instanceof n);let iv,ov;function MI(){return iv||(iv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OI(){return ov||(ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uw=new WeakMap,Ph=new WeakMap,dw=new WeakMap,Id=new WeakMap,tp=new WeakMap;function VI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Qr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uw.set(n,t)}).catch(()=>{}),tp.set(e,t),e}function FI(t){if(Ph.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ph.set(t,e)}let bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ph.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UI(t){bh=t(bh)}function zI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nd(this),e,...n);return dw.set(r,e.sort?e.sort():[e]),Qr(r)}:OI().includes(t)?function(...e){return t.apply(Nd(this),e),Qr(uw.get(this))}:function(...e){return Qr(t.apply(Nd(this),e))}}function BI(t){return typeof t=="function"?zI(t):(t instanceof IDBTransaction&&FI(t),LI(t,MI())?new Proxy(t,bh):t)}function Qr(t){if(t instanceof IDBRequest)return VI(t);if(Id.has(t))return Id.get(t);const e=BI(t);return e!==t&&(Id.set(t,e),tp.set(e,t)),e}const Nd=t=>tp.get(t);function $I(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Qr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Qr(a.result),u.oldVersion,u.newVersion,Qr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const qI=["get","getKey","getAll","getAllKeys","count"],HI=["put","add","delete","clear"],kd=new Map;function av(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kd.get(e))return kd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qI.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return kd.set(e,i),i}UI(t=>({...t,get:(e,n,r)=>av(e,n)||t.get(e,n,r),has:(e,n)=>!!av(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dh="@firebase/app",lv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new ep("@firebase/app"),GI="@firebase/app-compat",QI="@firebase/analytics-compat",YI="@firebase/analytics",XI="@firebase/app-check-compat",JI="@firebase/app-check",ZI="@firebase/auth",eN="@firebase/auth-compat",tN="@firebase/database",nN="@firebase/data-connect",rN="@firebase/database-compat",sN="@firebase/functions",iN="@firebase/functions-compat",oN="@firebase/installations",aN="@firebase/installations-compat",lN="@firebase/messaging",cN="@firebase/messaging-compat",uN="@firebase/performance",dN="@firebase/performance-compat",hN="@firebase/remote-config",fN="@firebase/remote-config-compat",pN="@firebase/storage",mN="@firebase/storage-compat",gN="@firebase/firestore",vN="@firebase/vertexai-preview",yN="@firebase/firestore-compat",_N="firebase",wN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="[DEFAULT]",xN={[Dh]:"fire-core",[GI]:"fire-core-compat",[YI]:"fire-analytics",[QI]:"fire-analytics-compat",[JI]:"fire-app-check",[XI]:"fire-app-check-compat",[ZI]:"fire-auth",[eN]:"fire-auth-compat",[tN]:"fire-rtdb",[nN]:"fire-data-connect",[rN]:"fire-rtdb-compat",[sN]:"fire-fn",[iN]:"fire-fn-compat",[oN]:"fire-iid",[aN]:"fire-iid-compat",[lN]:"fire-fcm",[cN]:"fire-fcm-compat",[uN]:"fire-perf",[dN]:"fire-perf-compat",[hN]:"fire-rc",[fN]:"fire-rc-compat",[pN]:"fire-gcs",[mN]:"fire-gcs-compat",[gN]:"fire-fst",[yN]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[_N]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,EN=new Map,Mh=new Map;function cv(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ds(t){const e=t.name;if(Mh.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Mh.set(e,t);for(const n of Ic.values())cv(n,t);for(const n of EN.values())cv(n,t);return!0}function uu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Ra("app","Firebase",TN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=wN;function hw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Yr.create("bad-app-name",{appName:String(s)});if(n||(n=aw()),!n)throw Yr.create("no-options");const i=Ic.get(s);if(i){if(Sc(n,i.options)&&Sc(r,i.config))return i;throw Yr.create("duplicate-app",{appName:s})}const a=new CI(s);for(const u of Mh.values())a.addComponent(u);const c=new SN(n,r,a);return Ic.set(s,c),c}function np(t=Lh){const e=Ic.get(t);if(!e&&t===Lh&&aw())return hw();if(!e)throw Yr.create("no-app",{appName:t});return e}function $n(t,e,n){var r;let s=(r=xN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(c.join(" "));return}Ds(new ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="firebase-heartbeat-database",NN=1,pa="firebase-heartbeat-store";let jd=null;function fw(){return jd||(jd=$I(IN,NN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),jd}async function kN(t){try{const n=(await fw()).transaction(pa),r=await n.objectStore(pa).get(pw(t));return await n.done,r}catch(e){if(e instanceof Qn)pr.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function uv(t,e){try{const r=(await fw()).transaction(pa,"readwrite");await r.objectStore(pa).put(e,pw(t)),await r.done}catch(n){if(n instanceof Qn)pr.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(r.message)}}}function pw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=1024,AN=30*24*60*60*1e3;class CN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=AN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dv(),{heartbeatsToSend:r,unsentEntries:s}=RN(this._heartbeatsCache.heartbeats),i=Tc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return pr.warn(n),""}}}function dv(){return new Date().toISOString().substring(0,10)}function RN(t,e=jN){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),hv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yI()?_I().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hv(t){return Tc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){Ds(new ts("platform-logger",e=>new WI(e),"PRIVATE")),Ds(new ts("heartbeat",e=>new CN(e),"PRIVATE")),$n(Dh,lv,t),$n(Dh,lv,"esm2017"),$n("fire-js","")}bN("");var DN="firebase",LN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n(DN,LN,"app");function rp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function mw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MN=mw,gw=new Ra("auth","Firebase",mw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new ep("@firebase/auth");function ON(t,...e){Nc.logLevel<=Pe.WARN&&Nc.warn(`Auth (${Hs}): ${t}`,...e)}function ql(t,...e){Nc.logLevel<=Pe.ERROR&&Nc.error(`Auth (${Hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,...e){throw sp(t,...e)}function qn(t,...e){return sp(t,...e)}function vw(t,e,n){const r=Object.assign(Object.assign({},MN()),{[e]:n});return new Ra("auth","Firebase",r).create(e,{appName:t.name})}function Xr(t){return vw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gw.create(t,...e)}function ve(t,e,...n){if(!t)throw sp(e,...n)}function ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ql(e),new Error(e)}function mr(t,e){t||ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VN(){return fv()==="http:"||fv()==="https:"}function fv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VN()||pI()||"connection"in navigator)?navigator.onLine:!0}function UN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=dI()||mI()}get(){return FN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new ba(3e4,6e4);function Ws(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cs(t,e,n,r,s={}){return _w(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Pa(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return fI()||(d.referrerPolicy="no-referrer"),yw.fetch()(ww(t,t.config.apiHost,n,c),d)})}async function _w(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zN),e);try{const s=new qN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Sl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Sl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Sl(t,"user-disabled",a);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vw(t,p,d);bn(t,p)}}catch(s){if(s instanceof Qn)throw s;bn(t,"network-request-failed",{message:String(s)})}}async function du(t,e,n,r,s={}){const i=await cs(t,e,n,r,s);return"mfaPendingCredential"in i&&bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function ww(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ip(t.config,s):`${t.config.apiScheme}://${s}`}function $N(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),BN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qn(t,e,r);return s.customData._tokenResponse=n,s}function pv(t){return t!==void 0&&t.enterprise!==void 0}class HN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $N(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function WN(t,e){return cs(t,"GET","/v2/recaptchaConfig",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e){return cs(t,"POST","/v1/accounts:delete",e)}async function xw(t,e){return cs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GN(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=op(r);ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Bo(Ad(s.auth_time)),issuedAtTime:Bo(Ad(s.iat)),expirationTime:Bo(Ad(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ad(t){return Number(t)*1e3}function op(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ql("JWT malformed, contained fewer than 3 sections"),null;try{const s=sw(n);return s?JSON.parse(s):(ql("Failed to decode base64 JWT payload"),null)}catch(s){return ql("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function mv(t){const e=op(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Qn&&QN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function QN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ma(t,xw(n,{idToken:r}));ve(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ew(i.providerUserInfo):[],c=JN(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Vh(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function XN(t){const e=it(t);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ew(t){return t.map(e=>{var{providerId:n}=e,r=rp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){const n=await _w(t,{},async()=>{const r=Pa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=ww(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",yw.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ek(t,e){return cs(t,"POST","/v2/accounts:revokeToken",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await ZN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Ii;return r&&(ve(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ve(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ve(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ii,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class or{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=rp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ma(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GN(this,e)}reload(){return XN(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await ma(this,KN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(a=n.photoURL)!==null&&a!==void 0?a:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,j=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:N,emailVerified:C,isAnonymous:b,providerData:M,stsTokenManager:T}=n;ve(N&&T,e,"internal-error");const g=Ii.fromJSON(this.name,T);ve(typeof N=="string",e,"internal-error"),Ir(m,e.name),Ir(v,e.name),ve(typeof C=="boolean",e,"internal-error"),ve(typeof b=="boolean",e,"internal-error"),Ir(x,e.name),Ir(A,e.name),Ir(R,e.name),Ir(P,e.name),Ir(j,e.name),Ir(_,e.name);const k=new or({uid:N,auth:e,email:v,emailVerified:C,displayName:m,isAnonymous:b,photoURL:A,phoneNumber:x,tenantId:R,stsTokenManager:g,createdAt:j,lastLoginAt:_});return M&&Array.isArray(M)&&(k.providerData=M.map(y=>Object.assign({},y))),P&&(k._redirectEventId=P),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ii;s.updateFromServerResponse(n);const i=new or({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ve(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ew(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ii;c.updateFromIdToken(r);const u=new or({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Vh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function ar(t){mr(t instanceof Function,"Expected a class definition");let e=gv.get(t);return e?(mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tw.type="NONE";const vv=Tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ni{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Hl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Hl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ni(ar(vv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||ar(vv);const a=Hl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(a);if(p){const m=or._fromJSON(e,p);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ni(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Ni(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Aw(e))return"Blackberry";if(Cw(e))return"Webos";if(Iw(e))return"Safari";if((e.includes("chrome/")||Nw(e))&&!e.includes("edge/"))return"Chrome";if(jw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Sw(t=Bt()){return/firefox\//i.test(t)}function Iw(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nw(t=Bt()){return/crios\//i.test(t)}function kw(t=Bt()){return/iemobile/i.test(t)}function jw(t=Bt()){return/android/i.test(t)}function Aw(t=Bt()){return/blackberry/i.test(t)}function Cw(t=Bt()){return/webos/i.test(t)}function ap(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tk(t=Bt()){var e;return ap(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nk(){return gI()&&document.documentMode===10}function Rw(t=Bt()){return ap(t)||jw(t)||Cw(t)||Aw(t)||/windows phone/i.test(t)||kw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e=[]){let n;switch(t){case"Browser":n=yv(Bt());break;case"Worker":n=`${yv(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(t,e={}){return cs(t,"GET","/v2/passwordPolicy",Ws(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=6;class ok{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:ik,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new rk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ni.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xw(this,{idToken:e}),r=await or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Xr(this));const n=e?it(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sk(this),n=new ok(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ra("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ek(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ar(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Ni.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ON(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Gi(t){return it(t)}class _v{constructor(e){this.auth=e,this.observer=null,this.addObserver=SI(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lk(t){hu=t}function bw(t){return hu.loadJS(t)}function ck(){return hu.recaptchaEnterpriseScript}function uk(){return hu.gapiScript}function dk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hk="recaptcha-enterprise",fk="NO_RECAPTCHA";class pk{constructor(e){this.type=hk,this.auth=Gi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{WN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new HN(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;pv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(fk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&pv(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=ck();u.length!==0&&(u+=c),bw(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function wv(t,e,n,r=!1){const s=new pk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function xv(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await wv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await wv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e){const n=uu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Sc(i,e??{}))return s;bn(s,"already-initialized")}return n.initialize({options:e})}function gk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vk(t,e,n){const r=Gi(t);ve(r._canInitEmulator,r,"emulator-config-failed"),ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Dw(e),{host:a,port:c}=yk(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),_k()}function Dw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yk(t){const e=Dw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ev(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Ev(a)}}}function Ev(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _k(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,n){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}}async function wk(t,e){return cs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e){return du(t,"POST","/v1/accounts:signInWithPassword",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(t,e){return du(t,"POST","/v1/accounts:signInWithEmailLink",Ws(t,e))}async function Tk(t,e){return du(t,"POST","/v1/accounts:signInWithEmailLink",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends lp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ga(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ga(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xv(e,n,"signInWithPassword",xk);case"emailLink":return Ek(e,{email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xv(e,r,"signUpPassword",wk);case"emailLink":return Tk(e,{idToken:n,email:this._email,oobCode:this._password});default:bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t,e){return du(t,"POST","/v1/accounts:signInWithIdp",Ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="http://localhost";class Ls extends lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=rp(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new Ls(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ki(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ki(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ki(e,n)}buildRequest(){const e={requestUri:Sk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Nk(t){const e=ko(jo(t)).link,n=e?ko(jo(e)).deep_link_id:null,r=ko(jo(t)).deep_link_id;return(r?ko(jo(r)).link:null)||r||n||e||t}class cp{constructor(e){var n,r,s,i,a,c;const u=ko(jo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,m=Ik((s=u.mode)!==null&&s!==void 0?s:null);ve(d&&p&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=Nk(e);try{return new cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.providerId=Qi.PROVIDER_ID}static credential(e,n){return ga._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cp.parseLink(n);return ve(r,"argument-error"),ga._fromEmailAndCode(e,r.code,r.tenantId)}}Qi.PROVIDER_ID="password";Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Lw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Da{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Da{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ls._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return br.credential(n,r)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Da{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Da{constructor(){super("twitter.com")}static credential(e,n){return Ls._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await or._fromIdTokenResponse(e,r,s),a=Tv(r);return new Oi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Tv(r);return new Oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Tv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Qn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jc(e,n,r,s)}}function Mw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(t,i,e,r):i})}async function kk(t,e,n=!1){const r=await ma(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk(t,e,n=!1){const{auth:r}=t;if(sr(r.app))return Promise.reject(Xr(r));const s="reauthenticate";try{const i=await ma(t,Mw(r,s,e,t),n);ve(i.idToken,r,"internal-error");const a=op(i.idToken);ve(a,r,"internal-error");const{sub:c}=a;return ve(t.uid===c,r,"user-mismatch"),Oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(t,e,n=!1){if(sr(t.app))return Promise.reject(Xr(t));const r="signIn",s=await Mw(t,r,e),i=await Oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Ak(t,e){return Ow(Gi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t){const e=Gi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Rk(t,e,n){return sr(t.app)?Promise.reject(Xr(t)):Ak(it(t),Qi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ck(t),r})}function Pk(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function bk(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function Dk(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function Lk(t){return it(t).signOut()}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=1e3,Ok=10;class Fw extends Vw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);nk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ok):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Mk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fw.type="LOCAL";const Vk=Fw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Vw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Uw.type="SESSION";const zw=Uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new fu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await Fk(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=up("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(v.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return window}function zk(t){Hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}async function Bk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $k(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qk(){return Bw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="firebaseLocalStorageDb",Hk=1,Cc="firebaseLocalStorage",qw="fbase_key";class La{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pu(t,e){return t.transaction([Cc],e?"readwrite":"readonly").objectStore(Cc)}function Wk(){const t=indexedDB.deleteDatabase($w);return new La(t).toPromise()}function Fh(){const t=indexedDB.open($w,Hk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cc,{keyPath:qw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cc)?e(r):(r.close(),await Wk(),e(await Fh()))})})}async function Sv(t,e,n){const r=pu(t,!0).put({[qw]:e,value:n});return new La(r).toPromise()}async function Kk(t,e){const n=pu(t,!1).get(e),r=await new La(n).toPromise();return r===void 0?null:r.value}function Iv(t,e){const n=pu(t,!0).delete(e);return new La(n).toPromise()}const Gk=800,Qk=3;class Hw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Qk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fu._getInstance(qk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Bk(),!this.activeServiceWorker)return;this.sender=new Uk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$k()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fh();return await Sv(e,Ac,"1"),await Iv(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Kk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=pu(s,!1).getAll();return new La(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Hw.type="LOCAL";const Yk=Hw;new ba(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e){return e?ar(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends lp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ki(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ki(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Jk(t){return Ow(t.auth,new dp(t),t.bypassAuthState)}function Zk(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),jk(n,new dp(t),t.bypassAuthState)}async function ej(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),kk(n,new dp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jk;case"linkViaPopup":case"linkViaRedirect":return ej;case"reauthViaPopup":case"reauthViaRedirect":return Zk;default:bn(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new ba(2e3,1e4);class yi extends Ww{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,yi.currentPopupAction&&yi.currentPopupAction.cancel(),yi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tj.get())};e()}}yi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="pendingRedirect",Wl=new Map;class rj extends Ww{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wl.get(this.auth._key());if(!e){try{const r=await sj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wl.set(this.auth._key(),e)}return this.bypassAuthState||Wl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sj(t,e){const n=aj(e),r=oj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ij(t,e){Wl.set(t._key(),e)}function oj(t){return ar(t._redirectPersistence)}function aj(t){return Hl(nj,t.config.apiKey,t.name)}async function lj(t,e,n=!1){if(sr(t.app))return Promise.reject(Xr(t));const r=Gi(t),s=Xk(r,e),a=await new rj(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=10*60*1e3;class uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Kw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nv(e))}saveEventToCache(e){this.cachedEventUids.add(Nv(e)),this.lastProcessedEventTime=Date.now()}}function Nv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(t,e={}){return cs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pj=/^https?/;async function mj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hj(t);for(const n of e)try{if(gj(n))return}catch{}bn(t,"unauthorized-domain")}function gj(t){const e=Oh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!pj.test(n))return!1;if(fj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new ba(3e4,6e4);function kv(){const t=Hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yj(t){return new Promise((e,n)=>{var r,s,i;function a(){kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kv(),n(qn(t,"network-request-failed"))},timeout:vj.get()})}if(!((s=(r=Hn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Hn().gapi)===null||i===void 0)&&i.load)a();else{const c=dk("iframefcb");return Hn()[c]=()=>{gapi.load?a():n(qn(t,"network-request-failed"))},bw(`${uk()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Kl=null,e})}let Kl=null;function _j(t){return Kl=Kl||yj(t),Kl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new ba(5e3,15e3),xj="__/auth/iframe",Ej="emulator/auth/iframe",Tj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ij(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ip(e,Ej):`https://${t.config.authDomain}/${xj}`,r={apiKey:e.apiKey,appName:t.name,v:Hs},s=Sj.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Pa(r).slice(1)}`}async function Nj(t){const e=await _j(t),n=Hn().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:Ij(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=qn(t,"network-request-failed"),c=Hn().setTimeout(()=>{i(a)},wj.get());function u(){Hn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jj=500,Aj=600,Cj="_blank",Rj="http://localhost";class jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pj(t,e,n,r=jj,s=Aj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},kj),{width:r.toString(),height:s.toString(),top:i,left:a}),d=Bt().toLowerCase();n&&(c=Nw(d)?Cj:n),Sw(d)&&(e=e||Rj,u.scrollbars="yes");const p=Object.entries(u).reduce((v,[x,A])=>`${v}${x}=${A},`,"");if(tk(d)&&c!=="_self")return bj(e||"",c),new jv(null);const m=window.open(e||"",c,p);ve(m,t,"popup-blocked");try{m.focus()}catch{}return new jv(m)}function bj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="__/auth/handler",Lj="emulator/auth/handler",Mj=encodeURIComponent("fac");async function Av(t,e,n,r,s,i){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hs,eventId:s};if(e instanceof Lw){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",TI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof Da){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),d=u?`#${Mj}=${encodeURIComponent(u)}`:"";return`${Oj(t)}?${Pa(c).slice(1)}${d}`}function Oj({config:t}){return t.emulator?ip(t,Lj):`https://${t.authDomain}/${Dj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="webStorageSupport";class Vj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zw,this._completeRedirectFn=lj,this._overrideRedirectResult=ij}async _openPopup(e,n,r,s){var i;mr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Av(e,n,r,Oh(),s);return Pj(e,a,up())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Av(e,n,r,Oh(),s);return zk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(mr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Nj(e),r=new uj(e);return n.register("authEvent",s=>(ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cd,{type:Cd},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Cd];a!==void 0&&n(!!a),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rw()||Iw()||ap()}}const Fj=Vj;var Cv="@firebase/auth",Rv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bj(t){Ds(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ve(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pw(t)},d=new ak(r,s,i,u);return gk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ds(new ts("auth-internal",e=>{const n=Gi(e.getProvider("auth").getImmediate());return(r=>new Uj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$n(Cv,Rv,zj(t)),$n(Cv,Rv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=5*60,qj=lw("authIdTokenMaxAge")||$j;let Pv=null;const Hj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qj)return;const s=n==null?void 0:n.token;Pv!==s&&(Pv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Wj(t=np()){const e=uu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mk(t,{popupRedirectResolver:Fj,persistence:[Yk,Vk,zw]}),r=lw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=Hj(i.toString());bk(n,a,()=>a(n.currentUser)),Pk(n,c=>a(c))}}const s=iw("auth");return s&&vk(n,`http://${s}`),n}function Kj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Kj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bj("Browser");var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ns,Gw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,g){function k(){}k.prototype=g.prototype,T.D=g.prototype,T.prototype=new k,T.prototype.constructor=T,T.C=function(y,E,w){for(var I=Array(arguments.length-2),z=2;z<arguments.length;z++)I[z-2]=arguments[z];return g.prototype[E].apply(y,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,g,k){k||(k=0);var y=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)y[E]=g.charCodeAt(k++)|g.charCodeAt(k++)<<8|g.charCodeAt(k++)<<16|g.charCodeAt(k++)<<24;else for(E=0;16>E;++E)y[E]=g[k++]|g[k++]<<8|g[k++]<<16|g[k++]<<24;g=T.g[0],k=T.g[1],E=T.g[2];var w=T.g[3],I=g+(w^k&(E^w))+y[0]+3614090360&4294967295;g=k+(I<<7&4294967295|I>>>25),I=w+(E^g&(k^E))+y[1]+3905402710&4294967295,w=g+(I<<12&4294967295|I>>>20),I=E+(k^w&(g^k))+y[2]+606105819&4294967295,E=w+(I<<17&4294967295|I>>>15),I=k+(g^E&(w^g))+y[3]+3250441966&4294967295,k=E+(I<<22&4294967295|I>>>10),I=g+(w^k&(E^w))+y[4]+4118548399&4294967295,g=k+(I<<7&4294967295|I>>>25),I=w+(E^g&(k^E))+y[5]+1200080426&4294967295,w=g+(I<<12&4294967295|I>>>20),I=E+(k^w&(g^k))+y[6]+2821735955&4294967295,E=w+(I<<17&4294967295|I>>>15),I=k+(g^E&(w^g))+y[7]+4249261313&4294967295,k=E+(I<<22&4294967295|I>>>10),I=g+(w^k&(E^w))+y[8]+1770035416&4294967295,g=k+(I<<7&4294967295|I>>>25),I=w+(E^g&(k^E))+y[9]+2336552879&4294967295,w=g+(I<<12&4294967295|I>>>20),I=E+(k^w&(g^k))+y[10]+4294925233&4294967295,E=w+(I<<17&4294967295|I>>>15),I=k+(g^E&(w^g))+y[11]+2304563134&4294967295,k=E+(I<<22&4294967295|I>>>10),I=g+(w^k&(E^w))+y[12]+1804603682&4294967295,g=k+(I<<7&4294967295|I>>>25),I=w+(E^g&(k^E))+y[13]+4254626195&4294967295,w=g+(I<<12&4294967295|I>>>20),I=E+(k^w&(g^k))+y[14]+2792965006&4294967295,E=w+(I<<17&4294967295|I>>>15),I=k+(g^E&(w^g))+y[15]+1236535329&4294967295,k=E+(I<<22&4294967295|I>>>10),I=g+(E^w&(k^E))+y[1]+4129170786&4294967295,g=k+(I<<5&4294967295|I>>>27),I=w+(k^E&(g^k))+y[6]+3225465664&4294967295,w=g+(I<<9&4294967295|I>>>23),I=E+(g^k&(w^g))+y[11]+643717713&4294967295,E=w+(I<<14&4294967295|I>>>18),I=k+(w^g&(E^w))+y[0]+3921069994&4294967295,k=E+(I<<20&4294967295|I>>>12),I=g+(E^w&(k^E))+y[5]+3593408605&4294967295,g=k+(I<<5&4294967295|I>>>27),I=w+(k^E&(g^k))+y[10]+38016083&4294967295,w=g+(I<<9&4294967295|I>>>23),I=E+(g^k&(w^g))+y[15]+3634488961&4294967295,E=w+(I<<14&4294967295|I>>>18),I=k+(w^g&(E^w))+y[4]+3889429448&4294967295,k=E+(I<<20&4294967295|I>>>12),I=g+(E^w&(k^E))+y[9]+568446438&4294967295,g=k+(I<<5&4294967295|I>>>27),I=w+(k^E&(g^k))+y[14]+3275163606&4294967295,w=g+(I<<9&4294967295|I>>>23),I=E+(g^k&(w^g))+y[3]+4107603335&4294967295,E=w+(I<<14&4294967295|I>>>18),I=k+(w^g&(E^w))+y[8]+1163531501&4294967295,k=E+(I<<20&4294967295|I>>>12),I=g+(E^w&(k^E))+y[13]+2850285829&4294967295,g=k+(I<<5&4294967295|I>>>27),I=w+(k^E&(g^k))+y[2]+4243563512&4294967295,w=g+(I<<9&4294967295|I>>>23),I=E+(g^k&(w^g))+y[7]+1735328473&4294967295,E=w+(I<<14&4294967295|I>>>18),I=k+(w^g&(E^w))+y[12]+2368359562&4294967295,k=E+(I<<20&4294967295|I>>>12),I=g+(k^E^w)+y[5]+4294588738&4294967295,g=k+(I<<4&4294967295|I>>>28),I=w+(g^k^E)+y[8]+2272392833&4294967295,w=g+(I<<11&4294967295|I>>>21),I=E+(w^g^k)+y[11]+1839030562&4294967295,E=w+(I<<16&4294967295|I>>>16),I=k+(E^w^g)+y[14]+4259657740&4294967295,k=E+(I<<23&4294967295|I>>>9),I=g+(k^E^w)+y[1]+2763975236&4294967295,g=k+(I<<4&4294967295|I>>>28),I=w+(g^k^E)+y[4]+1272893353&4294967295,w=g+(I<<11&4294967295|I>>>21),I=E+(w^g^k)+y[7]+4139469664&4294967295,E=w+(I<<16&4294967295|I>>>16),I=k+(E^w^g)+y[10]+3200236656&4294967295,k=E+(I<<23&4294967295|I>>>9),I=g+(k^E^w)+y[13]+681279174&4294967295,g=k+(I<<4&4294967295|I>>>28),I=w+(g^k^E)+y[0]+3936430074&4294967295,w=g+(I<<11&4294967295|I>>>21),I=E+(w^g^k)+y[3]+3572445317&4294967295,E=w+(I<<16&4294967295|I>>>16),I=k+(E^w^g)+y[6]+76029189&4294967295,k=E+(I<<23&4294967295|I>>>9),I=g+(k^E^w)+y[9]+3654602809&4294967295,g=k+(I<<4&4294967295|I>>>28),I=w+(g^k^E)+y[12]+3873151461&4294967295,w=g+(I<<11&4294967295|I>>>21),I=E+(w^g^k)+y[15]+530742520&4294967295,E=w+(I<<16&4294967295|I>>>16),I=k+(E^w^g)+y[2]+3299628645&4294967295,k=E+(I<<23&4294967295|I>>>9),I=g+(E^(k|~w))+y[0]+4096336452&4294967295,g=k+(I<<6&4294967295|I>>>26),I=w+(k^(g|~E))+y[7]+1126891415&4294967295,w=g+(I<<10&4294967295|I>>>22),I=E+(g^(w|~k))+y[14]+2878612391&4294967295,E=w+(I<<15&4294967295|I>>>17),I=k+(w^(E|~g))+y[5]+4237533241&4294967295,k=E+(I<<21&4294967295|I>>>11),I=g+(E^(k|~w))+y[12]+1700485571&4294967295,g=k+(I<<6&4294967295|I>>>26),I=w+(k^(g|~E))+y[3]+2399980690&4294967295,w=g+(I<<10&4294967295|I>>>22),I=E+(g^(w|~k))+y[10]+4293915773&4294967295,E=w+(I<<15&4294967295|I>>>17),I=k+(w^(E|~g))+y[1]+2240044497&4294967295,k=E+(I<<21&4294967295|I>>>11),I=g+(E^(k|~w))+y[8]+1873313359&4294967295,g=k+(I<<6&4294967295|I>>>26),I=w+(k^(g|~E))+y[15]+4264355552&4294967295,w=g+(I<<10&4294967295|I>>>22),I=E+(g^(w|~k))+y[6]+2734768916&4294967295,E=w+(I<<15&4294967295|I>>>17),I=k+(w^(E|~g))+y[13]+1309151649&4294967295,k=E+(I<<21&4294967295|I>>>11),I=g+(E^(k|~w))+y[4]+4149444226&4294967295,g=k+(I<<6&4294967295|I>>>26),I=w+(k^(g|~E))+y[11]+3174756917&4294967295,w=g+(I<<10&4294967295|I>>>22),I=E+(g^(w|~k))+y[2]+718787259&4294967295,E=w+(I<<15&4294967295|I>>>17),I=k+(w^(E|~g))+y[9]+3951481745&4294967295,T.g[0]=T.g[0]+g&4294967295,T.g[1]=T.g[1]+(E+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+E&4294967295,T.g[3]=T.g[3]+w&4294967295}r.prototype.u=function(T,g){g===void 0&&(g=T.length);for(var k=g-this.blockSize,y=this.B,E=this.h,w=0;w<g;){if(E==0)for(;w<=k;)s(this,T,w),w+=this.blockSize;if(typeof T=="string"){for(;w<g;)if(y[E++]=T.charCodeAt(w++),E==this.blockSize){s(this,y),E=0;break}}else for(;w<g;)if(y[E++]=T[w++],E==this.blockSize){s(this,y),E=0;break}}this.h=E,this.o+=g},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var g=1;g<T.length-8;++g)T[g]=0;var k=8*this.o;for(g=T.length-8;g<T.length;++g)T[g]=k&255,k/=256;for(this.u(T),T=Array(16),g=k=0;4>g;++g)for(var y=0;32>y;y+=8)T[k++]=this.g[g]>>>y&255;return T};function i(T,g){var k=c;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=g(T)}function a(T,g){this.h=g;for(var k=[],y=!0,E=T.length-1;0<=E;E--){var w=T[E]|0;y&&w==g||(k[E]=w,y=!1)}this.g=k}var c={};function u(T){return-128<=T&&128>T?i(T,function(g){return new a([g|0],0>g?-1:0)}):new a([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return P(d(-T));for(var g=[],k=1,y=0;T>=k;y++)g[y]=T/k|0,k*=4294967296;return new a(g,0)}function p(T,g){if(T.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(T.charAt(0)=="-")return P(p(T.substring(1),g));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(g,8)),y=m,E=0;E<T.length;E+=8){var w=Math.min(8,T.length-E),I=parseInt(T.substring(E,E+w),g);8>w?(w=d(Math.pow(g,w)),y=y.j(w).add(d(I))):(y=y.j(k),y=y.add(d(I)))}return y}var m=u(0),v=u(1),x=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-P(this).m();for(var T=0,g=1,k=0;k<this.g.length;k++){var y=this.i(k);T+=(0<=y?y:4294967296+y)*g,g*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(R(this))return"-"+P(this).toString(T);for(var g=d(Math.pow(T,6)),k=this,y="";;){var E=C(k,g).g;k=j(k,E.j(g));var w=((0<k.g.length?k.g[0]:k.h)>>>0).toString(T);if(k=E,A(k))return w+y;for(;6>w.length;)w="0"+w;y=w+y}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var g=0;g<T.g.length;g++)if(T.g[g]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=j(this,T),R(T)?-1:A(T)?0:1};function P(T){for(var g=T.g.length,k=[],y=0;y<g;y++)k[y]=~T.g[y];return new a(k,~T.h).add(v)}t.abs=function(){return R(this)?P(this):this},t.add=function(T){for(var g=Math.max(this.g.length,T.g.length),k=[],y=0,E=0;E<=g;E++){var w=y+(this.i(E)&65535)+(T.i(E)&65535),I=(w>>>16)+(this.i(E)>>>16)+(T.i(E)>>>16);y=I>>>16,w&=65535,I&=65535,k[E]=I<<16|w}return new a(k,k[k.length-1]&-2147483648?-1:0)};function j(T,g){return T.add(P(g))}t.j=function(T){if(A(this)||A(T))return m;if(R(this))return R(T)?P(this).j(P(T)):P(P(this).j(T));if(R(T))return P(this.j(P(T)));if(0>this.l(x)&&0>T.l(x))return d(this.m()*T.m());for(var g=this.g.length+T.g.length,k=[],y=0;y<2*g;y++)k[y]=0;for(y=0;y<this.g.length;y++)for(var E=0;E<T.g.length;E++){var w=this.i(y)>>>16,I=this.i(y)&65535,z=T.i(E)>>>16,le=T.i(E)&65535;k[2*y+2*E]+=I*le,_(k,2*y+2*E),k[2*y+2*E+1]+=w*le,_(k,2*y+2*E+1),k[2*y+2*E+1]+=I*z,_(k,2*y+2*E+1),k[2*y+2*E+2]+=w*z,_(k,2*y+2*E+2)}for(y=0;y<g;y++)k[y]=k[2*y+1]<<16|k[2*y];for(y=g;y<2*g;y++)k[y]=0;return new a(k,0)};function _(T,g){for(;(T[g]&65535)!=T[g];)T[g+1]+=T[g]>>>16,T[g]&=65535,g++}function N(T,g){this.g=T,this.h=g}function C(T,g){if(A(g))throw Error("division by zero");if(A(T))return new N(m,m);if(R(T))return g=C(P(T),g),new N(P(g.g),P(g.h));if(R(g))return g=C(T,P(g)),new N(P(g.g),g.h);if(30<T.g.length){if(R(T)||R(g))throw Error("slowDivide_ only works with positive integers.");for(var k=v,y=g;0>=y.l(T);)k=b(k),y=b(y);var E=M(k,1),w=M(y,1);for(y=M(y,2),k=M(k,2);!A(y);){var I=w.add(y);0>=I.l(T)&&(E=E.add(k),w=I),y=M(y,1),k=M(k,1)}return g=j(T,E.j(g)),new N(E,g)}for(E=m;0<=T.l(g);){for(k=Math.max(1,Math.floor(T.m()/g.m())),y=Math.ceil(Math.log(k)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),w=d(k),I=w.j(g);R(I)||0<I.l(T);)k-=y,w=d(k),I=w.j(g);A(w)&&(w=v),E=E.add(w),T=j(T,I)}return new N(E,T)}t.A=function(T){return C(this,T).h},t.and=function(T){for(var g=Math.max(this.g.length,T.g.length),k=[],y=0;y<g;y++)k[y]=this.i(y)&T.i(y);return new a(k,this.h&T.h)},t.or=function(T){for(var g=Math.max(this.g.length,T.g.length),k=[],y=0;y<g;y++)k[y]=this.i(y)|T.i(y);return new a(k,this.h|T.h)},t.xor=function(T){for(var g=Math.max(this.g.length,T.g.length),k=[],y=0;y<g;y++)k[y]=this.i(y)^T.i(y);return new a(k,this.h^T.h)};function b(T){for(var g=T.g.length+1,k=[],y=0;y<g;y++)k[y]=T.i(y)<<1|T.i(y-1)>>>31;return new a(k,T.h)}function M(T,g){var k=g>>5;g%=32;for(var y=T.g.length-k,E=[],w=0;w<y;w++)E[w]=0<g?T.i(w+k)>>>g|T.i(w+k+1)<<32-g:T.i(w+k);return new a(E,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gw=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Ns=a}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qw,Ao,Yw,Gl,Uh,Xw,Jw,Zw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,f){return l==Array.prototype||l==Object.prototype||(l[h]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Il=="object"&&Il];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var f=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var L=l[S];if(!(L in f))break e;f=f[L]}l=l[l.length-1],S=f[l],h=h(S),h!=S&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var f=0,S=!1,L={next:function(){if(!S&&f<l.length){var V=f++;return{value:h(V,l[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function p(l,h,f){return l.call.apply(l.bind,arguments)}function m(l,h,f){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function v(l,h,f){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function x(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var S=f.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function A(l,h){function f(){}f.prototype=h.prototype,l.aa=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(S,L,V){for(var J=Array(arguments.length-2),We=2;We<arguments.length;We++)J[We-2]=arguments[We];return h.prototype[L].apply(S,J)}}function R(l){const h=l.length;if(0<h){const f=Array(h);for(let S=0;S<h;S++)f[S]=l[S];return f}return[]}function P(l,h){for(let f=1;f<arguments.length;f++){const S=arguments[f];if(u(S)){const L=l.length||0,V=S.length||0;l.length=L+V;for(let J=0;J<V;J++)l[L+J]=S[J]}else l.push(S)}}class j{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(l){return/^[\s\xa0]*$/.test(l)}function N(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function C(l){return C[" "](l),l}C[" "]=function(){};var b=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function M(l,h,f){for(const S in l)h.call(f,l[S],S,l)}function T(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function g(l){const h={};for(const f in l)h[f]=l[f];return h}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(l,h){let f,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(f in S)l[f]=S[f];for(let V=0;V<k.length;V++)f=k[V],Object.prototype.hasOwnProperty.call(S,f)&&(l[f]=S[f])}}function E(l){var h=1;l=l.split(":");const f=[];for(;0<h&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function w(l){c.setTimeout(()=>{throw l},0)}function I(){var l=Y;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class z{constructor(){this.h=this.g=null}add(h,f){const S=le.get();S.set(h,f),this.h?this.h.next=S:this.g=S,this.h=S}}var le=new j(()=>new X,l=>l.reset());class X{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,B=!1,Y=new z,F=()=>{const l=c.Promise.resolve(void 0);ye=()=>{l.then($)}};var $=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(f){w(f)}var h=le;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return l}();function G(l,h){if(Z.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(b){e:{try{C(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement);this.relatedTarget=h,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:re[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&G.aa.h.call(this)}}A(G,Z);var re={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),ce=0;function pe(l,h,f,S,L){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!S,this.ha=L,this.key=++ce,this.da=this.fa=!1}function ge(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ue(l){this.src=l,this.g={},this.h=0}ue.prototype.add=function(l,h,f,S,L){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var J=be(l,h,S,L);return-1<J?(h=l[J],f||(h.fa=!1)):(h=new pe(h,this.src,V,!!S,L),h.fa=f,l.push(h)),h};function Fe(l,h){var f=h.type;if(f in l.g){var S=l.g[f],L=Array.prototype.indexOf.call(S,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(S,L,1),V&&(ge(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function be(l,h,f,S){for(var L=0;L<l.length;++L){var V=l[L];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==S)return L}return-1}var Be="closure_lm_"+(1e6*Math.random()|0),En={};function Yt(l,h,f,S,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Yt(l,h[V],f,S,L);return null}return f=Ln(f),l&&l[ie]?l.K(h,f,d(S)?!!S.capture:!1,L):Tn(l,h,f,!1,S,L)}function Tn(l,h,f,S,L,V){if(!h)throw Error("Invalid event type");var J=d(L)?!!L.capture:!!L,We=qe(l);if(We||(l[Be]=We=new ue(l)),f=We.add(h,f,S,J,V),f.proxy)return f;if(S=H(),f.proxy=S,S.src=l,S.listener=f,l.addEventListener)fe||(L=J),L===void 0&&(L=!1),l.addEventListener(h.toString(),S,L);else if(l.attachEvent)l.attachEvent(Ae(h.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return f}function H(){function l(f){return h.call(l.src,l.listener,f)}const h=$e;return l}function Ie(l,h,f,S,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)Ie(l,h[V],f,S,L);else S=d(S)?!!S.capture:!!S,f=Ln(f),l&&l[ie]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],f=be(V,f,S,L),-1<f&&(ge(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=qe(l))&&(h=l.g[h.toString()],l=-1,h&&(l=be(h,f,S,L)),(f=-1<l?h[l]:null)&&oe(f))}function oe(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ie])Fe(h.i,l);else{var f=l.type,S=l.proxy;h.removeEventListener?h.removeEventListener(f,S,l.capture):h.detachEvent?h.detachEvent(Ae(f),S):h.addListener&&h.removeListener&&h.removeListener(S),(f=qe(h))?(Fe(f,l),f.h==0&&(f.src=null,h[Be]=null)):ge(l)}}}function Ae(l){return l in En?En[l]:En[l]="on"+l}function $e(l,h){if(l.da)l=!0;else{h=new G(h,this);var f=l.listener,S=l.ha||l.src;l.fa&&oe(l),l=f.call(S,h)}return l}function qe(l){return l=l[Be],l instanceof ue?l:null}var Ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ln(l){return typeof l=="function"?l:(l[Ke]||(l[Ke]=function(h){return l.handleEvent(h)}),l[Ke])}function tt(){q.call(this),this.i=new ue(this),this.M=this,this.F=null}A(tt,q),tt.prototype[ie]=!0,tt.prototype.removeEventListener=function(l,h,f,S){Ie(this,l,h,f,S)};function _t(l,h){var f,S=l.F;if(S)for(f=[];S;S=S.F)f.push(S);if(l=l.M,S=h.type||h,typeof h=="string")h=new Z(h,l);else if(h instanceof Z)h.target=h.target||l;else{var L=h;h=new Z(S,l),y(h,L)}if(L=!0,f)for(var V=f.length-1;0<=V;V--){var J=h.g=f[V];L=Qs(J,S,!0,h)&&L}if(J=h.g=l,L=Qs(J,S,!0,h)&&L,L=Qs(J,S,!1,h)&&L,f)for(V=0;V<f.length;V++)J=h.g=f[V],L=Qs(J,S,!1,h)&&L}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var f=l.g[h],S=0;S<f.length;S++)ge(f[S]);delete l.g[h],l.h--}}this.F=null},tt.prototype.K=function(l,h,f,S){return this.i.add(String(l),h,!1,f,S)},tt.prototype.L=function(l,h,f,S){return this.i.add(String(l),h,!0,f,S)};function Qs(l,h,f,S){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var J=h[V];if(J&&!J.da&&J.capture==f){var We=J.listener,St=J.ha||J.src;J.fa&&Fe(l.i,J),L=We.call(St,S)!==!1&&L}}return L&&!S.defaultPrevented}function $a(l,h,f){if(typeof l=="function")f&&(l=v(l,f));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function qa(l){l.g=$a(()=>{l.g=null,l.i&&(l.i=!1,qa(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Mu extends q{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:qa(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(l){q.call(this),this.h=l,this.g={}}A(Yn,q);var Ha=[];function Wa(l){M(l.g,function(h,f){this.g.hasOwnProperty(f)&&oe(h)},l),l.g={}}Yn.prototype.N=function(){Yn.aa.N.call(this),Wa(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=c.JSON.stringify,Ou=c.JSON.parse,Vu=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function eo(){}eo.prototype.h=null;function Ys(l){return l.h||(l.h=l.i())}function Xs(){}var O={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function me(){Z.call(this,"d")}A(me,Z);function _e(){Z.call(this,"c")}A(_e,Z);var we={},je=null;function He(){return je=je||new tt}we.La="serverreachability";function Tt(l){Z.call(this,we.La,l)}A(Tt,Z);function Sn(l){const h=He();_t(h,new Tt(h))}we.STAT_EVENT="statevent";function sm(l,h){Z.call(this,we.STAT_EVENT,l),this.stat=h}A(sm,Z);function $t(l){const h=He();_t(h,new sm(h,l))}we.Ma="timingevent";function im(l,h){Z.call(this,we.Ma,l),this.size=h}A(im,Z);function to(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function no(){this.g=!0}no.prototype.xa=function(){this.g=!1};function LE(l,h,f,S,L,V){l.info(function(){if(l.g)if(V)for(var J="",We=V.split("&"),St=0;St<We.length;St++){var Oe=We[St].split("=");if(1<Oe.length){var Pt=Oe[0];Oe=Oe[1];var bt=Pt.split("_");J=2<=bt.length&&bt[1]=="type"?J+(Pt+"="+Oe+"&"):J+(Pt+"=redacted&")}}else J=null;else J=V;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+h+`
`+f+`
`+J})}function ME(l,h,f,S,L,V,J){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+h+`
`+f+`
`+V+" "+J})}function Js(l,h,f,S){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+VE(l,f)+(S?" "+S:"")})}function OE(l,h){l.info(function(){return"TIMEOUT: "+h})}no.prototype.info=function(){};function VE(l,h){if(!l.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var S=f[l];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var J=1;J<L.length;J++)L[J]=""}}}}return ds(f)}catch{return h}}var Ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},om={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fu;function Ga(){}A(Ga,eo),Ga.prototype.g=function(){return new XMLHttpRequest},Ga.prototype.i=function(){return{}},Fu=new Ga;function xr(l,h,f,S){this.j=l,this.i=h,this.l=f,this.R=S||1,this.U=new Yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new am}function am(){this.i=null,this.g="",this.h=!1}var lm={},Uu={};function zu(l,h,f){l.L=1,l.v=Ja(Xn(h)),l.m=f,l.P=!0,cm(l,null)}function cm(l,h){l.F=Date.now(),Qa(l),l.A=Xn(l.v);var f=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),Tm(f.i,"t",S),l.C=0,f=l.j.J,l.h=new am,l.g=zm(l.j,f?h:null,!l.m),0<l.O&&(l.M=new Mu(v(l.Y,l,l.g),l.O)),h=l.U,f=l.g,S=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ha[0]=L.toString()),L=Ha);for(var V=0;V<L.length;V++){var J=Yt(f,L[V],S||h.handleEvent,!1,h.h||h);if(!J)break;h.g[J.key]=J}h=l.H?g(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Sn(),LE(l.i,l.u,l.A,l.l,l.R,l.m)}xr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Jn(l)==3?h.j():this.Y(l)},xr.prototype.Y=function(l){try{if(l==this.g)e:{const bt=Jn(this.g);var h=this.g.Ba();const ti=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||Cm(this.g)))){this.J||bt!=4||h==7||(h==8||0>=ti?Sn(3):Sn(2)),Bu(this);var f=this.g.Z();this.X=f;t:if(um(this)){var S=Cm(this.g);l="";var L=S.length,V=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hs(this),ro(this);var J="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(S[h],{stream:!(V&&h==L-1)});S.length=0,this.h.g+=l,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=f==200,ME(this.i,this.u,this.A,this.l,this.R,bt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var We,St=this.g;if((We=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(We)){var Oe=We;break t}}Oe=null}if(f=Oe)Js(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$u(this,f);else{this.o=!1,this.s=3,$t(12),hs(this),ro(this);break e}}if(this.P){f=!0;let In;for(;!this.J&&this.C<J.length;)if(In=FE(this,J),In==Uu){bt==4&&(this.s=4,$t(14),f=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(In==lm){this.s=4,$t(15),Js(this.i,this.l,J,"[Invalid Chunk]"),f=!1;break}else Js(this.i,this.l,In,null),$u(this,In);if(um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||J.length!=0||this.h.h||(this.s=1,$t(16),f=!1),this.o=this.o&&f,!f)Js(this.i,this.l,J,"[Invalid Chunked Response]"),hs(this),ro(this);else if(0<J.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Qu(Pt),Pt.M=!0,$t(11))}}else Js(this.i,this.l,J,null),$u(this,J);bt==4&&hs(this),this.o&&!this.J&&(bt==4?Om(this.j,this):(this.o=!1,Qa(this)))}else n1(this.g),f==400&&0<J.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),hs(this),ro(this)}}}catch{}finally{}};function um(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function FE(l,h){var f=l.C,S=h.indexOf(`
`,f);return S==-1?Uu:(f=Number(h.substring(f,S)),isNaN(f)?lm:(S+=1,S+f>h.length?Uu:(h=h.slice(S,S+f),l.C=S+f,h)))}xr.prototype.cancel=function(){this.J=!0,hs(this)};function Qa(l){l.S=Date.now()+l.I,dm(l,l.I)}function dm(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=to(v(l.ba,l),h)}function Bu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}xr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(OE(this.i,this.A),this.L!=2&&(Sn(),$t(17)),hs(this),this.s=2,ro(this)):dm(this,this.S-l)};function ro(l){l.j.G==0||l.J||Om(l.j,l)}function hs(l){Bu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Wa(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function $u(l,h){try{var f=l.j;if(f.G!=0&&(f.g==l||qu(f.h,l))){if(!l.K&&qu(f.h,l)&&f.G==3){try{var S=f.Da.g.parse(h)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)sl(f),nl(f);else break e;Gu(f),$t(18)}}else f.za=L[1],0<f.za-f.T&&37500>L[2]&&f.F&&f.v==0&&!f.C&&(f.C=to(v(f.Za,f),6e3));if(1>=pm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ps(f,11)}else if((l.K||f.g==l)&&sl(f),!_(h))for(L=f.Da.g.parse(h),h=0;h<L.length;h++){let Oe=L[h];if(f.T=Oe[0],Oe=Oe[1],f.G==2)if(Oe[0]=="c"){f.K=Oe[1],f.ia=Oe[2];const Pt=Oe[3];Pt!=null&&(f.la=Pt,f.j.info("VER="+f.la));const bt=Oe[4];bt!=null&&(f.Aa=bt,f.j.info("SVER="+f.Aa));const ti=Oe[5];ti!=null&&typeof ti=="number"&&0<ti&&(S=1.5*ti,f.L=S,f.j.info("backChannelRequestTimeoutMs_="+S)),S=f;const In=l.g;if(In){const ol=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var V=S.h;V.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Hu(V,V.h),V.h=null))}if(S.D){const Yu=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Yu&&(S.ya=Yu,Ye(S.I,S.D,Yu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),S=f;var J=l;if(S.qa=Um(S,S.J?S.ia:null,S.W),J.K){mm(S.h,J);var We=J,St=S.L;St&&(We.I=St),We.B&&(Bu(We),Qa(We)),S.g=J}else Lm(S);0<f.i.length&&rl(f)}else Oe[0]!="stop"&&Oe[0]!="close"||ps(f,7);else f.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?ps(f,7):Ku(f):Oe[0]!="noop"&&f.l&&f.l.ta(Oe),f.v=0)}}Sn(4)}catch{}}var UE=class{constructor(l,h){this.g=l,this.map=h}};function hm(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function pm(l){return l.h?1:l.g?l.g.size:0}function qu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Hu(l,h){l.g?l.g.add(h):l.h=h}function mm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}hm.prototype.cancel=function(){if(this.i=gm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function gm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.D);return h}return R(l.i)}function zE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],f=l.length,S=0;S<f;S++)h.push(l[S]);return h}h=[],f=0;for(S in l)h[f++]=l[S];return h}function BE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var f=0;f<l;f++)h.push(f);return h}h=[],f=0;for(const S in l)h[f++]=S;return h}}}function vm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var f=BE(l),S=zE(l),L=S.length,V=0;V<L;V++)h.call(void 0,S[V],f&&f[V],l)}var ym=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $E(l,h){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var S=l[f].indexOf("="),L=null;if(0<=S){var V=l[f].substring(0,S);L=l[f].substring(S+1)}else V=l[f];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function fs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof fs){this.h=l.h,Ya(this,l.j),this.o=l.o,this.g=l.g,Xa(this,l.s),this.l=l.l;var h=l.i,f=new oo;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),_m(this,f),this.m=l.m}else l&&(h=String(l).match(ym))?(this.h=!1,Ya(this,h[1]||"",!0),this.o=so(h[2]||""),this.g=so(h[3]||"",!0),Xa(this,h[4]),this.l=so(h[5]||"",!0),_m(this,h[6]||"",!0),this.m=so(h[7]||"")):(this.h=!1,this.i=new oo(null,this.h))}fs.prototype.toString=function(){var l=[],h=this.j;h&&l.push(io(h,wm,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(io(h,wm,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(io(f,f.charAt(0)=="/"?WE:HE,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",io(f,GE)),l.join("")};function Xn(l){return new fs(l)}function Ya(l,h,f){l.j=f?so(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Xa(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function _m(l,h,f){h instanceof oo?(l.i=h,QE(l.i,l.h)):(f||(h=io(h,KE)),l.i=new oo(h,l.h))}function Ye(l,h,f){l.i.set(h,f)}function Ja(l){return Ye(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function so(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function io(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,qE),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function qE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var wm=/[#\/\?@]/g,HE=/[#\?:]/g,WE=/[#\?]/g,KE=/[#\?@]/g,GE=/#/g;function oo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Er(l){l.g||(l.g=new Map,l.h=0,l.i&&$E(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=oo.prototype,t.add=function(l,h){Er(this),this.i=null,l=Zs(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function xm(l,h){Er(l),h=Zs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Em(l,h){return Er(l),h=Zs(l,h),l.g.has(h)}t.forEach=function(l,h){Er(this),this.g.forEach(function(f,S){f.forEach(function(L){l.call(h,L,S,this)},this)},this)},t.na=function(){Er(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let S=0;S<h.length;S++){const L=l[S];for(let V=0;V<L.length;V++)f.push(h[S])}return f},t.V=function(l){Er(this);let h=[];if(typeof l=="string")Em(this,l)&&(h=h.concat(this.g.get(Zs(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)h=h.concat(l[f])}return h},t.set=function(l,h){return Er(this),this.i=null,l=Zs(this,l),Em(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Tm(l,h,f){xm(l,h),0<f.length&&(l.i=null,l.g.set(Zs(l,h),R(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var S=h[f];const V=encodeURIComponent(String(S)),J=this.V(S);for(S=0;S<J.length;S++){var L=V;J[S]!==""&&(L+="="+encodeURIComponent(String(J[S]))),l.push(L)}}return this.i=l.join("&")};function Zs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function QE(l,h){h&&!l.j&&(Er(l),l.i=null,l.g.forEach(function(f,S){var L=S.toLowerCase();S!=L&&(xm(this,S),Tm(this,L,f))},l)),l.j=h}function YE(l,h){const f=new no;if(c.Image){const S=new Image;S.onload=x(Tr,f,"TestLoadImage: loaded",!0,h,S),S.onerror=x(Tr,f,"TestLoadImage: error",!1,h,S),S.onabort=x(Tr,f,"TestLoadImage: abort",!1,h,S),S.ontimeout=x(Tr,f,"TestLoadImage: timeout",!1,h,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else h(!1)}function XE(l,h){const f=new no,S=new AbortController,L=setTimeout(()=>{S.abort(),Tr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:S.signal}).then(V=>{clearTimeout(L),V.ok?Tr(f,"TestPingServer: ok",!0,h):Tr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Tr(f,"TestPingServer: error",!1,h)})}function Tr(l,h,f,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(f)}catch{}}function JE(){this.g=new Vu}function ZE(l,h,f){const S=f||"";try{vm(l,function(L,V){let J=L;d(L)&&(J=ds(L)),h.push(S+V+"="+encodeURIComponent(J))})}catch(L){throw h.push(S+"type="+encodeURIComponent("_badmap")),L}}function Za(l){this.l=l.Ub||null,this.j=l.eb||!1}A(Za,eo),Za.prototype.g=function(){return new el(this.l,this.j)},Za.prototype.i=function(l){return function(){return l}}({});function el(l,h){tt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(el,tt),t=el.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,lo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,lo(this)),this.g&&(this.readyState=3,lo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ao(this):lo(this),this.readyState==3&&Sm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ao(this))},t.Qa=function(l){this.g&&(this.response=l,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(l){l.readyState=4,l.l=null,l.j=null,l.v=null,lo(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function lo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(el.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Im(l){let h="";return M(l,function(f,S){h+=S,h+=":",h+=f,h+=`\r
`}),h}function Wu(l,h,f){e:{for(S in f){var S=!1;break e}S=!0}S||(f=Im(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):Ye(l,h,f))}function at(l){tt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(at,tt);var e1=/^https?$/i,t1=["POST","PUT"];t=at.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,f,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fu.g(),this.v=this.o?Ys(this.o):Ys(Fu),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Nm(this,V);return}if(l=f||"",f=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)f.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())f.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(t1,h,void 0))||S||L||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,J]of f)this.g.setRequestHeader(V,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Am(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Nm(this,V)}};function Nm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,km(l),tl(l)}function km(l){l.A||(l.A=!0,_t(l,"complete"),_t(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_t(this,"complete"),_t(this,"abort"),tl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tl(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jm(this):this.bb())},t.bb=function(){jm(this)};function jm(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Jn(l)!=4||l.Z()!=2)){if(l.u&&Jn(l)==4)$a(l.Ea,0,l);else if(_t(l,"readystatechange"),Jn(l)==4){l.h=!1;try{const J=l.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var S;if(S=J===0){var L=String(l.D).match(ym)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),S=!e1.test(L?L.toLowerCase():"")}f=S}if(f)_t(l,"complete"),_t(l,"success");else{l.m=6;try{var V=2<Jn(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",km(l)}}finally{tl(l)}}}}function tl(l,h){if(l.g){Am(l);const f=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||_t(l,"ready");try{f.onreadystatechange=S}catch{}}}function Am(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Ou(h)}};function Cm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function n1(l){const h={};l=(l.g&&2<=Jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(_(l[S]))continue;var f=E(l[S]);const L=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[L]||[];h[L]=V,V.push(f)}T(h,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function co(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function Rm(l){this.Aa=0,this.i=[],this.j=new no,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=co("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=co("baseRetryDelayMs",5e3,l),this.cb=co("retryDelaySeedMs",1e4,l),this.Wa=co("forwardChannelMaxRetries",2,l),this.wa=co("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new hm(l&&l.concurrentRequestLimit),this.Da=new JE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rm.prototype,t.la=8,t.G=1,t.connect=function(l,h,f,S){$t(0),this.W=l,this.H=h||{},f&&S!==void 0&&(this.H.OSID=f,this.H.OAID=S),this.F=this.X,this.I=Um(this,null,this.W),rl(this)};function Ku(l){if(Pm(l),l.G==3){var h=l.U++,f=Xn(l.I);if(Ye(f,"SID",l.K),Ye(f,"RID",h),Ye(f,"TYPE","terminate"),uo(l,f),h=new xr(l,l.j,h),h.L=2,h.v=Ja(Xn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=zm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Qa(h)}Fm(l)}function nl(l){l.g&&(Qu(l),l.g.cancel(),l.g=null)}function Pm(l){nl(l),l.u&&(c.clearTimeout(l.u),l.u=null),sl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function rl(l){if(!fm(l.h)&&!l.s){l.s=!0;var h=l.Ga;ye||F(),B||(ye(),B=!0),Y.add(h,l),l.B=0}}function r1(l,h){return pm(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=to(v(l.Ga,l,h),Vm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new xr(this,this.j,l);let V=this.o;if(this.S&&(V?(V=g(V),y(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var S=this.i[f];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(h+=S,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Dm(this,L,h),f=Xn(this.I),Ye(f,"RID",l),Ye(f,"CVER",22),this.D&&Ye(f,"X-HTTP-Session-Id",this.D),uo(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(Im(V)))+"&"+h:this.m&&Wu(f,this.m,V)),Hu(this.h,L),this.Ua&&Ye(f,"TYPE","init"),this.P?(Ye(f,"$req",h),Ye(f,"SID","null"),L.T=!0,zu(L,f,null)):zu(L,f,h),this.G=2}}else this.G==3&&(l?bm(this,l):this.i.length==0||fm(this.h)||bm(this))};function bm(l,h){var f;h?f=h.l:f=l.U++;const S=Xn(l.I);Ye(S,"SID",l.K),Ye(S,"RID",f),Ye(S,"AID",l.T),uo(l,S),l.m&&l.o&&Wu(S,l.m,l.o),f=new xr(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Dm(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Hu(l.h,f),zu(f,S,h)}function uo(l,h){l.H&&M(l.H,function(f,S){Ye(h,S,f)}),l.l&&vm({},function(f,S){Ye(h,S,f)})}function Dm(l,h,f){f=Math.min(l.i.length,f);var S=l.l?v(l.l.Na,l.l,l):null;e:{var L=l.i;let V=-1;for(;;){const J=["count="+f];V==-1?0<f?(V=L[0].g,J.push("ofs="+V)):V=0:J.push("ofs="+V);let We=!0;for(let St=0;St<f;St++){let Oe=L[St].g;const Pt=L[St].map;if(Oe-=V,0>Oe)V=Math.max(0,L[St].g-100),We=!1;else try{ZE(Pt,J,"req"+Oe+"_")}catch{S&&S(Pt)}}if(We){S=J.join("&");break e}}}return l=l.i.splice(0,f),h.D=l,S}function Lm(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ye||F(),B||(ye(),B=!0),Y.add(h,l),l.v=0}}function Gu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=to(v(l.Fa,l),Vm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Mm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=to(v(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),nl(this),Mm(this))};function Qu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Mm(l){l.g=new xr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Xn(l.qa);Ye(h,"RID","rpc"),Ye(h,"SID",l.K),Ye(h,"AID",l.T),Ye(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ye(h,"TO",l.ja),Ye(h,"TYPE","xmlhttp"),uo(l,h),l.m&&l.o&&Wu(h,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Ja(Xn(h)),f.m=null,f.P=!0,cm(f,l)}t.Za=function(){this.C!=null&&(this.C=null,nl(this),Gu(this),$t(19))};function sl(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Om(l,h){var f=null;if(l.g==h){sl(l),Qu(l),l.g=null;var S=2}else if(qu(l.h,h))f=h.D,mm(l.h,h),S=1;else return;if(l.G!=0){if(h.o)if(S==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;S=He(),_t(S,new im(S,f)),rl(l)}else Lm(l);else if(L=h.s,L==3||L==0&&0<h.X||!(S==1&&r1(l,h)||S==2&&Gu(l)))switch(f&&0<f.length&&(h=l.h,h.i=h.i.concat(f)),L){case 1:ps(l,5);break;case 4:ps(l,10);break;case 3:ps(l,6);break;default:ps(l,2)}}}function Vm(l,h){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*h}function ps(l,h){if(l.j.info("Error code "+h),h==2){var f=v(l.fb,l),S=l.Xa;const L=!S;S=new fs(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ya(S,"https"),Ja(S),L?YE(S.toString(),f):XE(S.toString(),f)}else $t(2);l.G=0,l.l&&l.l.sa(h),Fm(l),Pm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Fm(l){if(l.G=0,l.ka=[],l.l){const h=gm(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Um(l,h,f){var S=f instanceof fs?Xn(f):new fs(f);if(S.g!="")h&&(S.g=h+"."+S.g),Xa(S,S.s);else{var L=c.location;S=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new fs(null);S&&Ya(V,S),h&&(V.g=h),L&&Xa(V,L),f&&(V.l=f),S=V}return f=l.D,h=l.ya,f&&h&&Ye(S,f,h),Ye(S,"VER",l.la),uo(l,S),S}function zm(l,h,f){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new at(new Za({eb:f})):new at(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bm(){}t=Bm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function il(){}il.prototype.g=function(l,h){return new sn(l,h)};function sn(l,h){tt.call(this),this.g=new Rm(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!_(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new ei(this)}A(sn,tt),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Ku(this.g)},sn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=ds(l),l=f);h.i.push(new UE(h.Ya++,l)),h.G==3&&rl(h)},sn.prototype.N=function(){this.g.l=null,delete this.j,Ku(this.g),delete this.g,sn.aa.N.call(this)};function $m(l){me.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}A($m,me);function qm(){_e.call(this),this.status=1}A(qm,_e);function ei(l){this.g=l}A(ei,Bm),ei.prototype.ua=function(){_t(this.g,"a")},ei.prototype.ta=function(l){_t(this.g,new $m(l))},ei.prototype.sa=function(l){_t(this.g,new qm)},ei.prototype.ra=function(){_t(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Zw=function(){return new il},Jw=function(){return He()},Xw=we,Uh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,Gl=Ka,om.COMPLETE="complete",Yw=om,Xs.EventType=O,O.OPEN="a",O.CLOSE="b",O.ERROR="c",O.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Ao=Xs,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,Qw=at}).apply(typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{});const Dv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new ep("@firebase/firestore");function wo(){return Ms.logLevel}function ae(t,...e){if(Ms.logLevel<=Pe.DEBUG){const n=e.map(hp);Ms.debug(`Firestore (${Yi}): ${t}`,...n)}}function gr(t,...e){if(Ms.logLevel<=Pe.ERROR){const n=e.map(hp);Ms.error(`Firestore (${Yi}): ${t}`,...n)}}function Vi(t,...e){if(Ms.logLevel<=Pe.WARN){const n=e.map(hp);Ms.warn(`Firestore (${Yi}): ${t}`,...n)}}function hp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t="Unexpected state"){const e=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+t;throw gr(e),new Error(e)}function ze(t,e){t||xe()}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class Qj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Yj{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string"),new ex(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new Ot(e)}}class Xj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Jj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Xj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ze(this.o===void 0);const r=i=>{i.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string"),this.R=n.token,new Zj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=t2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function Fi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new yt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new yt(0,0))}static max(){return new Ee(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(),r===void 0?r=e.length-n:r>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return va.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof va?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends va{construct(e,n,r){return new Je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const n2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends va{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return n2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ee(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new ee(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Je.fromString(e))}static fromName(e){return new he(Je.fromString(e).popFirst(5))}static empty(){return new he(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Je(e.slice()))}}function r2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new ns(s,he.empty(),e)}function s2(t){return new ns(t.readTime,t.key,-1)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(Ee.min(),he.empty(),-1)}static max(){return new ns(Ee.max(),he.empty(),-1)}}function i2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==o2)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(s=>s?K.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new K((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{a[d]=p,++c,c===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new K((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function l2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fp.oe=-1;function mu(t){return t==null}function Rc(t){return t===0&&1/t==-1/0}function c2(t){return typeof t=="number"&&Number.isInteger(t)&&!Rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=s??Nt.EMPTY,this.right=i??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mv(this.data.getIterator())}getIteratorFrom(e){return new Mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class Mv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new At(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new rx("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const u2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(ze(!!t),typeof t=="string"){let e=0;const n=u2.exec(t);if(ze(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Os(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mp(t){const e=t.mapValue.fields.__previous_value__;return pp(e)?mp(e):e}function ya(t){const e=rs(t.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class _a{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl={mapValue:{}};function Vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pp(t)?4:f2(t)?9007199254740991:h2(t)?10:11:xe()}function Gn(t,e){if(t===e)return!0;const n=Vs(t);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ya(t).isEqual(ya(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=rs(s.timestampValue),c=rs(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Os(s.bytesValue).isEqual(Os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=dt(s.doubleValue),c=dt(i.doubleValue);return a===c?Rc(a)===Rc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Fi(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Lv(a)!==Lv(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Gn(a[u],c[u])))return!1;return!0}(t,e);default:return xe()}}function wa(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function Ui(t,e){if(t===e)return 0;const n=Vs(t),r=Vs(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=dt(i.integerValue||i.doubleValue),u=dt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Ov(t.timestampValue,e.timestampValue);case 4:return Ov(ya(t),ya(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Os(i),u=Os(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const p=Ve(c[d],u[d]);if(p!==0)return p}return Ve(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Ve(dt(i.latitude),dt(a.latitude));return c!==0?c:Ve(dt(i.longitude),dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Vv(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,p;const m=i.fields||{},v=a.fields||{},x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,A=(u=v.value)===null||u===void 0?void 0:u.arrayValue,R=Ve(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:Vv(x,A)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===kl.mapValue&&a===kl.mapValue)return 0;if(i===kl.mapValue)return 1;if(a===kl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const v=Ve(u[m],p[m]);if(v!==0)return v;const x=Ui(c[u[m]],d[p[m]]);if(x!==0)return x}return Ve(u.length,p.length)}(t.mapValue,e.mapValue);default:throw xe()}}function Ov(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=rs(t),r=rs(e),s=Ve(n.seconds,r.seconds);return s!==0?s:Ve(n.nanos,r.nanos)}function Vv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ui(n[s],r[s]);if(i)return i}return Ve(n.length,r.length)}function zi(t){return zh(t)}function zh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=zh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${zh(n.fields[a])}`;return s+"}"}(t.mapValue):xe()}function Fv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bh(t){return!!t&&"integerValue"in t}function gp(t){return!!t&&"arrayValue"in t}function Uv(t){return!!t&&"nullValue"in t}function zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ql(t){return!!t&&"mapValue"in t}function h2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $o(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$o(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$o(t.arrayValue.values[n]);return e}return Object.assign({},t)}function f2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ql(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=$o(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ql(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ks(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Jt($o(this.value))}}function sx(t){const e=[];return Ks(t.fields,(n,r)=>{const s=new kt([n]);if(Ql(r)){const i=sx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Ft(e,0,Ee.min(),Ee.min(),Ee.min(),Jt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,Ee.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,Ee.min(),Ee.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Ee.min(),Ee.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.position=e,this.inclusive=n}}function Bv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(a.referenceValue),n.key):r=Ui(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function $v(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n="asc"){this.field=e,this.dir=n}}function p2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ix=class{};class mt extends ix{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new g2(e,n,r):n==="array-contains"?new _2(e,r):n==="in"?new w2(e,r):n==="not-in"?new x2(e,r):n==="array-contains-any"?new E2(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new v2(e,r):new y2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ui(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(Ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends ix{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Dn(e,n)}matches(e){return ox(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ox(t){return t.op==="and"}function ax(t){return m2(t)&&ox(t)}function m2(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function $h(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+zi(t.value);if(ax(t))return t.filters.map(e=>$h(e)).join(",");{const e=t.filters.map(n=>$h(n)).join(",");return`${t.op}(${e})`}}function lx(t,e){return t instanceof mt?function(r,s){return s instanceof mt&&r.op===s.op&&r.field.isEqual(s.field)&&Gn(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&lx(a,s.filters[c]),!0):!1}(t,e):void xe()}function cx(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${zi(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(cx).join(" ,")+"}"}(t):"Filter"}class g2 extends mt{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class v2 extends mt{constructor(e,n){super(e,"in",n),this.keys=ux("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class y2 extends mt{constructor(e,n){super(e,"not-in",n),this.keys=ux("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ux(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class _2 extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gp(n)&&wa(n.arrayValue,this.value)}}class w2 extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wa(this.value.arrayValue,n)}}class x2 extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wa(this.value.arrayValue,n)}}class E2 extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function qv(t,e=null,n=[],r=[],s=null,i=null,a=null){return new T2(t,e,n,r,s,i,a)}function vp(t){const e=Se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$h(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zi(r)).join(",")),e.ue=n}return e.ue}function yp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$v(t.startAt,e.startAt)&&$v(t.endAt,e.endAt)}function qh(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function S2(t,e,n,r,s,i,a,c){return new Xi(t,e,n,r,s,i,a,c)}function gu(t){return new Xi(t)}function Hv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dx(t){return t.collectionGroup!==null}function qo(t){const e=Se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new At(kt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new xa(i,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new xa(kt.keyField(),r))}return e.ce}function Wn(t){const e=Se(t);return e.le||(e.le=I2(e,qo(t))),e.le}function I2(t,e){if(t.limitType==="F")return qv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xa(s.field,i)});const n=t.endAt?new Pc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pc(t.startAt.position,t.startAt.inclusive):null;return qv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hh(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bc(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vu(t,e){return yp(Wn(t),Wn(e))&&t.limitType===e.limitType}function hx(t){return`${vp(Wn(t))}|lt:${t.limitType}`}function ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>cx(s)).join(", ")}]`),mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zi(s)).join(",")),`Target(${r})`}(Wn(t))}; limitType=${t.limitType})`}function yu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of qo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=Bv(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,qo(r),s)||r.endAt&&!function(a,c,u){const d=Bv(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,qo(r),s))}(t,e)}function N2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fx(t){return(e,n)=>{let r=!1;for(const s of qo(t)){const i=k2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function k2(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Ui(u,d):xe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return nx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new ot(he.comparator);function vr(){return j2}const px=new ot(he.comparator);function Co(...t){let e=px;for(const n of t)e=e.insert(n.key,n);return e}function mx(t){let e=px;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ts(){return Ho()}function gx(){return Ho()}function Ho(){return new Ji(t=>t.toString(),(t,e)=>t.isEqual(e))}const A2=new ot(he.comparator),C2=new At(he.comparator);function Re(...t){let e=C2;for(const n of t)e=e.add(n);return e}const R2=new At(Ve);function P2(){return R2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function vx(t){return{integerValue:""+t}}function b2(t,e){return c2(e)?vx(e):_p(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this._=void 0}}function D2(t,e,n){return t instanceof Ea?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&pp(i)&&(i=mp(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Ta?_x(t,e):t instanceof Sa?wx(t,e):function(s,i){const a=yx(s,i),c=Wv(a)+Wv(s.Pe);return Bh(a)&&Bh(s.Pe)?vx(c):_p(s.serializer,c)}(t,e)}function L2(t,e,n){return t instanceof Ta?_x(t,e):t instanceof Sa?wx(t,e):n}function yx(t,e){return t instanceof Dc?function(r){return Bh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ea extends _u{}class Ta extends _u{constructor(e){super(),this.elements=e}}function _x(t,e){const n=xx(e);for(const r of t.elements)n.some(s=>Gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Sa extends _u{constructor(e){super(),this.elements=e}}function wx(t,e){let n=xx(e);for(const r of t.elements)n=n.filter(s=>!Gn(s,r));return{arrayValue:{values:n}}}class Dc extends _u{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Wv(t){return dt(t.integerValue||t.doubleValue)}function xx(t){return gp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n){this.field=e,this.transform=n}}function O2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ta&&s instanceof Ta||r instanceof Sa&&s instanceof Sa?Fi(r.elements,s.elements,Gn):r instanceof Dc&&s instanceof Dc?Gn(r.Pe,s.Pe):r instanceof Ea&&s instanceof Ea}(t.transform,e.transform)}class V2{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wu{}function Ex(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wp(t.key,_n.none()):new Va(t.key,t.data,_n.none());{const n=t.data,r=Jt.empty();let s=new At(kt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new us(t.key,r,new ln(s.toArray()),_n.none())}}function F2(t,e,n){t instanceof Va?function(s,i,a){const c=s.value.clone(),u=Gv(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof us?function(s,i,a){if(!Yl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Gv(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Tx(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof Va?function(i,a,c,u){if(!Yl(i.precondition,a))return c;const d=i.value.clone(),p=Qv(i.fieldTransforms,u,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(i,a,c,u){if(!Yl(i.precondition,a))return c;const d=Qv(i.fieldTransforms,u,a),p=a.data;return p.setAll(Tx(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return Yl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function U2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=yx(r.transform,s||null);i!=null&&(n===null&&(n=Jt.empty()),n.set(r.field,i))}return n||null}function Kv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fi(r,s,(i,a)=>O2(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Va extends wu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class us extends wu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Tx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gv(t,e,n){const r=new Map;ze(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,L2(a,c,n[s]))}return r}function Qv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,D2(i,a,e))}return r}class wp extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z2 extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&F2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gx();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=Ex(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Fi(this.mutations,e.mutations,(n,r)=>Kv(n,r))&&Fi(this.baseMutations,e.baseMutations,(n,r)=>Kv(n,r))}}class xp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length);let s=function(){return A2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new xp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,De;function H2(t){switch(t){default:return xe();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function Sx(t){if(t===void 0)return gr("GRPC error has no .code"),U.UNKNOWN;switch(t){case ft.OK:return U.OK;case ft.CANCELLED:return U.CANCELLED;case ft.UNKNOWN:return U.UNKNOWN;case ft.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ft.INTERNAL:return U.INTERNAL;case ft.UNAVAILABLE:return U.UNAVAILABLE;case ft.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ft.NOT_FOUND:return U.NOT_FOUND;case ft.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ft.ABORTED:return U.ABORTED;case ft.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ft.DATA_LOSS:return U.DATA_LOSS;default:return xe()}}(De=ft||(ft={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Ns([4294967295,4294967295],0);function Yv(t){const e=W2().encode(t),n=new Gw;return n.update(e),new Uint8Array(n.digest())}function Xv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ns([n,r],0),new Ns([s,i],0)]}class Ep{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ro(`Invalid padding: ${n}`);if(r<0)throw new Ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ns.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ns.fromNumber(r)));return s.compare(K2)===1&&(s=new Ns([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Yv(e),[r,s]=Xv(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Ep(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=Yv(e),[r,s]=Xv(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xu(Ee.min(),s,new ot(Ve),vr(),Re())}}class Fa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fa(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Ix{constructor(e,n){this.targetId=e,this.me=n}}class Nx{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Jv{constructor(){this.fe=0,this.ge=ey(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),r=Re();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:xe()}}),new Fa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ey()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class G2{constructor(e){this.Le=e,this.Be=new Map,this.ke=vr(),this.qe=Zv(),this.Qe=new ot(Ve)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(qh(i))if(r===0){const a=new he(i.path);this.Ue(n,a,Ft.newNoDocument(a,Ee.min()))}else ze(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Os(r).toUint8Array()}catch(u){if(u instanceof rx)return Vi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ep(a,s,i)}catch(u){return Vi(u instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&qh(c.target)){const u=new he(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Ft.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=Re();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new xu(e,n,this.Qe,this.ke,r);return this.ke=vr(),this.qe=Zv(),this.Qe=new ot(Ve),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Jv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new At(Ve),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Zv(){return new ot(he.comparator)}function ey(){return new ot(he.comparator)}const Q2={asc:"ASCENDING",desc:"DESCENDING"},Y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X2={and:"AND",or:"OR"};class J2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wh(t,e){return t.useProto3Json||mu(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z2(t,e){return Lc(t,e.toTimestamp())}function Kn(t){return ze(!!t),Ee.fromTimestamp(function(n){const r=rs(n);return new yt(r.seconds,r.nanos)}(t))}function Tp(t,e){return Kh(t,e).canonicalString()}function Kh(t,e){const n=function(s){return new Je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jx(t){const e=Je.fromString(t);return ze(bx(e)),e}function Gh(t,e){return Tp(t.databaseId,e.path)}function Rd(t,e){const n=jx(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(Cx(n))}function Ax(t,e){return Tp(t.databaseId,e)}function eA(t){const e=jx(t);return e.length===4?Je.emptyPath():Cx(e)}function Qh(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cx(t){return ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ty(t,e,n){return{name:Gh(t,e),fields:n.value.mapValue.fields}}function tA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(ze(p===void 0||typeof p=="string"),Rt.fromBase64String(p||"")):(ze(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Rt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const p=d.code===void 0?U.UNKNOWN:Sx(d.code);return new ee(p,d.message||"")}(a);n=new Nx(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Rd(t,r.document.name),i=Kn(r.document.updateTime),a=r.document.createTime?Kn(r.document.createTime):Ee.min(),c=new Jt({mapValue:{fields:r.document.fields}}),u=Ft.newFoundDocument(s,i,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Xl(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Rd(t,r.document),i=r.readTime?Kn(r.readTime):Ee.min(),a=Ft.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Xl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Rd(t,r.document),i=r.removedTargetIds||[];n=new Xl([],i,s,null)}else{if(!("filter"in e))return xe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new q2(s,i),c=r.targetId;n=new Ix(c,a)}}return n}function nA(t,e){let n;if(e instanceof Va)n={update:ty(t,e.key,e.value)};else if(e instanceof wp)n={delete:Gh(t,e.key)};else if(e instanceof us)n={update:ty(t,e.key,e.data),updateMask:dA(e.fieldMask)};else{if(!(e instanceof z2))return xe();n={verify:Gh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Ea)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ta)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Dc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw xe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Z2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:xe()}(t,e.precondition)),n}function rA(t,e){return t&&t.length>0?(ze(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Kn(s.updateTime):Kn(i);return a.isEqual(Ee.min())&&(a=Kn(i)),new V2(a,s.transformResults||[])}(n,e))):[]}function sA(t,e){return{documents:[Ax(t,e.path)]}}function iA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ax(t,s);const i=function(d){if(d.length!==0)return Px(Dn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(v){return{field:si(v.field),direction:lA(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Wh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function oA(t){let e=eA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const v=Rx(m);return v instanceof Dn&&ax(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(v=>function(A){return new xa(ii(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(m){let v;return v=typeof m=="object"?m.value:m,mu(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,x=m.values||[];return new Pc(x,v)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const v=!m.before,x=m.values||[];return new Pc(x,v)}(n.endAt)),S2(e,s,a,i,c,"F",u,d)}function aA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ii(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ii(n.unaryFilter.field);return mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ii(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ii(n.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(t):t.fieldFilter!==void 0?function(n){return mt.create(ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>Rx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(t):xe()}function lA(t){return Q2[t]}function cA(t){return Y2[t]}function uA(t){return X2[t]}function si(t){return{fieldPath:t.canonicalString()}}function ii(t){return kt.fromServerFormat(t.fieldPath)}function Px(t){return t instanceof mt?function(n){if(n.op==="=="){if(zv(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(Uv(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zv(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(Uv(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:cA(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>Px(s));return r.length===1?r[0]:{compositeFilter:{op:uA(n.op),filters:r}}}(t):xe()}function dA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,s,i=Ee.min(),a=Ee.min(),c=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.ct=e}}function fA(t){const e=oA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.un=new mA}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ns.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class mA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new At(Je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new At(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bi(0)}static kn(){return new Bi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.changes=new Ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wo(r.mutation,s,ln.empty(),yt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const s=Ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Co();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=vr();const a=Ho(),c=function(){return Ho()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof us)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Wo(p.mutation,d,p.mutation.getFieldMask(),yt.now())):a.set(d.key,ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var m;return c.set(d,new vA(p,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Ho();let s=new ot((a,c)=>a-c),i=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||ln.empty();p=c.applyToLocalView(d,p),r.set(u,p);const m=(s.get(c.batchId)||Re()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,p=u.value,m=gx();p.forEach(v=>{if(!i.has(v)){const x=Ex(n.get(v),r.get(v));x!==null&&m.set(v,x),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):K.resolve(Ts());let c=-1,u=i;return a.next(d=>K.forEach(d,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?K.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,Re())).next(p=>({batchId:c,changes:mx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=Co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Co();return this.indexManager.getCollectionParents(e,i).next(c=>K.forEach(c,u=>{const d=function(m,v){return new Xi(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,Ft.newInvalidDocument(p)))});let c=Co();return a.forEach((u,d)=>{const p=i.get(u);p!==void 0&&Wo(p.mutation,d,ln.empty(),yt.now()),yu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Kn(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:fA(s.bundledQuery),readTime:Kn(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.overlays=new ot(he.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ts();return K.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const s=Ts(),i=n.length+1,a=new he(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ot((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Ts(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Ts(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=s)););return K.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new $2(n,r));let i=this.Ir.get(n);i===void 0&&(i=Re(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Tr=new At(wt.Er),this.dr=new At(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new wt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new he(new Je([])),r=new wt(n,e),s=new wt(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new he(new Je([])),r=new wt(n,e),s=new wt(n,e+1);let i=Re();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new wt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return he.comparator(e.key,n.key)||Ve(e.wr,n.wr)}static Ar(e,n){return Ve(e.wr,n.wr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new At(wt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new B2(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new wt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Ve);return n.forEach(s=>{const i=new wt(s,0),a=new wt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const a=new wt(new he(i),0);let c=new At(Ve);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),K.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(n.mutations,s=>{const i=new wt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new wt(n,0),s=this.br.firstAfterOrEqual(r);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.Mr=e,this.docs=function(){return new ot(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ft.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=vr();const a=n.path,c=new he(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||i2(s2(p),r)<=0||(s.has(p.key)||yu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,n,r,s){xe()}Or(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SA(this)}getSize(e){return K.resolve(this.size)}}class SA extends gA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.persistence=e,this.Nr=new Ji(n=>vp(n),yp),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sp,this.targetCount=0,this.kr=Bi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),K.waitFor(i).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fp(0),this.Kr=!1,this.Kr=!0,this.$r=new xA,this.referenceDelegate=e(this),this.Ur=new IA(this),this.indexManager=new pA,this.remoteDocumentCache=function(s){return new TA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hA(n),this.Gr=new _A(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new EA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const s=new kA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class kA extends a2{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Jr=new Sp,this.Yr=null}static Zr(e){return new Ip(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{const s=he.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Re(),s=Re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Np(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vI()?8:l2(Bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new jA;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(wo()<=Pe.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(wo()<=Pe.DEBUG&&ae("QueryEngine","Query:",ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(wo()<=Pe.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):K.resolve())}Yi(e,n){if(Hv(n))return K.resolve(null);let r=Wn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bc(n,null,"F"),r=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Re(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,bc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Hv(n)||s.isEqual(Ee.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?K.resolve(null):(wo()<=Pe.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ri(n)),this.rs(e,a,n,r2(s,-1)).next(c=>c))})}ts(e,n){let r=new At(fx(e));return n.forEach((s,i)=>{yu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return wo()<=Pe.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",ri(n)),this.Ji.getDocumentsMatchingQuery(e,n,ns.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ot(Ve),this._s=new Ji(i=>vp(i),yp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function RA(t,e,n,r){return new CA(t,e,n,r)}async function Dx(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=Re();for(const d of s){a.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){c.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function PA(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,p){const m=d.batch,v=m.keys();let x=K.resolve();return v.forEach(A=>{x=x.next(()=>p.getEntry(u,A)).next(R=>{const P=d.docVersions.get(A);ze(P!==null),R.version.compareTo(P)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),p.addEntry(R)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Re();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Lx(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function bA(t,e){const n=Se(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((p,m)=>{const v=s.get(m);if(!v)return;c.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let x=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(Rt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),s=s.insert(m,x),function(R,P,j){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(v,x,p)&&c.push(n.Ur.updateTargetData(i,x))});let u=vr(),d=Re();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(DA(i,a,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(Ee.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return K.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function DA(t,e,n){let r=Re(),s=Re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=vr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Ee.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):ae("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function LA(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MA(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,K.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new Fr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Yh(t,e,n){const r=Se(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Oa(a))throw a;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function ny(t,e,n){const r=Se(t);let s=Ee.min(),i=Re();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,p){const m=Se(u),v=m._s.get(p);return v!==void 0?K.resolve(m.os.get(v)):m.Ur.getTargetData(d,p)}(r,a,Wn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:Ee.min(),n?i:Re())).next(c=>(OA(r,N2(e),c),{documents:c,Ts:i})))}function OA(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class ry{constructor(){this.activeTargetIds=P2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VA{constructor(){this.so=new ry,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ry,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl=null;function Pd(){return jl===null?jl=function(){return 268435456+Math.round(2147483648*Math.random())}():jl++,"0x"+jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class BA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=Pd(),u=this.xo(n,r.toUriEncodedString());ae("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(p=>(ae("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw Vi("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=UA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Pd();return new Promise((a,c)=>{const u=new Qw;u.setWithCredentials(!0),u.listenOnce(Yw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gl.NO_ERROR:const p=u.getResponseJson();ae(Mt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case Gl.TIMEOUT:ae(Mt,`RPC '${e}' ${i} timed out`),c(new ee(U.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const m=u.getStatus();if(ae(Mt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const A=function(P){const j=P.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(j)>=0?j:U.UNKNOWN}(x.status);c(new ee(A,x.message))}else c(new ee(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ee(U.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{ae(Mt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);ae(Mt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Pd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zw(),c=Jw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");ae(Mt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=a.createWebChannel(p,u);let v=!1,x=!1;const A=new zA({Io:P=>{x?ae(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(v||(ae(Mt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),ae(Mt,`RPC '${e}' stream ${s} sending:`,P),m.send(P))},To:()=>m.close()}),R=(P,j,_)=>{P.listen(j,N=>{try{_(N)}catch(C){setTimeout(()=>{throw C},0)}})};return R(m,Ao.EventType.OPEN,()=>{x||(ae(Mt,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),R(m,Ao.EventType.CLOSE,()=>{x||(x=!0,ae(Mt,`RPC '${e}' stream ${s} transport closed`),A.So())}),R(m,Ao.EventType.ERROR,P=>{x||(x=!0,Vi(Mt,`RPC '${e}' stream ${s} transport errored:`,P),A.So(new ee(U.UNAVAILABLE,"The operation could not be completed")))}),R(m,Ao.EventType.MESSAGE,P=>{var j;if(!x){const _=P.data[0];ze(!!_);const N=_,C=N.error||((j=N[0])===null||j===void 0?void 0:j.error);if(C){ae(Mt,`RPC '${e}' stream ${s} received error:`,C);const b=C.status;let M=function(k){const y=ft[k];if(y!==void 0)return Sx(y)}(b),T=C.message;M===void 0&&(M=U.INTERNAL,T="Unknown error status: "+b+" with message "+C.message),x=!0,A.So(new ee(M,T)),m.close()}else ae(Mt,`RPC '${e}' stream ${s} received:`,_),A.bo(_)}}),R(c,Xw.STAT_EVENT,P=>{P.stat===Uh.PROXY?ae(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Uh.NOPROXY&&ae(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){return new J2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ee(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $A extends Ox{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=tA(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ee.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?Kn(a.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Qh(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=qh(u)?{documents:sA(i,u)}:{query:iA(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=kx(i,a.resumeToken);const d=Wh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ee.min())>0){c.readTime=Lc(i,a.snapshotVersion.toTimestamp());const d=Wh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=aA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Qh(this.serializer),n.removeTarget=e,this.a_(n)}}class qA extends Ox{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=rA(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Qh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ee(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Kh(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,Kh(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class WA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gr(n),this.D_=!1):ae("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Gs(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Se(u);d.L_.add(4),await Ua(d),d.q_.set("Unknown"),d.L_.delete(4),await Tu(d)}(this))})}),this.q_=new WA(r,s)}}async function Tu(t){if(Gs(t))for(const e of t.B_)await e(!0)}async function Ua(t){for(const e of t.B_)await e(!1)}function Vx(t,e){const n=Se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Cp(n)?Ap(n):Zi(n).r_()&&jp(n,e))}function kp(t,e){const n=Se(t),r=Zi(n);n.N_.delete(e),r.r_()&&Fx(n,e),n.N_.size===0&&(r.r_()?r.o_():Gs(n)&&n.q_.set("Unknown"))}function jp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zi(t).A_(e)}function Fx(t,e){t.Q_.xe(e),Zi(t).R_(e)}function Ap(t){t.Q_=new G2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zi(t).start(),t.q_.v_()}function Cp(t){return Gs(t)&&!Zi(t).n_()&&t.N_.size>0}function Gs(t){return Se(t).L_.size===0}function Ux(t){t.Q_=void 0}async function GA(t){t.q_.set("Online")}async function QA(t){t.N_.forEach((e,n)=>{jp(t,e)})}async function YA(t,e){Ux(t),Cp(t)?(t.q_.M_(e),Ap(t)):t.q_.set("Unknown")}async function XA(t,e,n){if(t.q_.set("Online"),e instanceof Nx&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mc(t,r)}else if(e instanceof Xl?t.Q_.Ke(e):e instanceof Ix?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await Lx(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(Rt.EMPTY_BYTE_STRING,p.snapshotVersion)),Fx(i,u);const m=new Fr(p.target,u,d,p.sequenceNumber);jp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ae("RemoteStore","Failed to raise snapshot:",r),await Mc(t,r)}}async function Mc(t,e,n){if(!Oa(e))throw e;t.L_.add(1),await Ua(t),t.q_.set("Offline"),n||(n=()=>Lx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Tu(t)})}function zx(t,e){return e().catch(n=>Mc(t,n,e))}async function Su(t){const e=Se(t),n=ss(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;JA(e);)try{const s=await LA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,ZA(e,s)}catch(s){await Mc(e,s)}Bx(e)&&$x(e)}function JA(t){return Gs(t)&&t.O_.length<10}function ZA(t,e){t.O_.push(e);const n=ss(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Bx(t){return Gs(t)&&!ss(t).n_()&&t.O_.length>0}function $x(t){ss(t).start()}async function eC(t){ss(t).p_()}async function tC(t){const e=ss(t);for(const n of t.O_)e.m_(n.mutations)}async function nC(t,e,n){const r=t.O_.shift(),s=xp.from(r,e,n);await zx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Su(t)}async function rC(t,e){e&&ss(t).V_&&await async function(r,s){if(function(a){return H2(a)&&a!==U.ABORTED}(s.code)){const i=r.O_.shift();ss(r).s_(),await zx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Su(r)}}(t,e),Bx(t)&&$x(t)}async function iy(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const r=Gs(n);n.L_.add(3),await Ua(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Tu(n)}async function sC(t,e){const n=Se(t);e?(n.L_.delete(2),await Tu(n)):e||(n.L_.add(2),await Ua(n),n.q_.set("Unknown"))}function Zi(t){return t.K_||(t.K_=function(n,r,s){const i=Se(n);return i.w_(),new $A(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:GA.bind(null,t),Ro:QA.bind(null,t),mo:YA.bind(null,t),d_:XA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Cp(t)?Ap(t):t.q_.set("Unknown")):(await t.K_.stop(),Ux(t))})),t.K_}function ss(t){return t.U_||(t.U_=function(n,r,s){const i=Se(n);return i.w_(),new qA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eC.bind(null,t),mo:rC.bind(null,t),f_:tC.bind(null,t),g_:nC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Su(t)):(await t.U_.stop(),t.O_.length>0&&(ae("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new Rp(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(t,e){if(gr("AsyncQueue",`${e}: ${t}`),Oa(t))return new ee(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Co(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new ji(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ji;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.W_=new ot(he.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $i{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new $i(e,n,ji.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class oC{constructor(){this.queries=ay(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Se(n),i=s.queries;s.queries=ay(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new ee(U.ABORTED,"Firestore shutting down"))}}function ay(){return new Ji(t=>hx(t),vu)}async function bp(t,e){const n=Se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new iC,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Pp(a,`Initialization of query '${ri(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Lp(n)}async function Dp(t,e){const n=Se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aC(t,e){const n=Se(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&Lp(n)}function lC(t,e,n){const r=Se(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Lp(t){t.Y_.forEach(e=>{e.next()})}var Xh,ly;(ly=Xh||(Xh={})).ea="default",ly.Cache="cache";class Mp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.key=e}}class Hx{constructor(e){this.key=e}}class cC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=fx(e),this.Ra=new ji(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new oy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const v=s.get(p),x=yu(this.query,m)?m:null,A=!!v&&this.mutatedKeys.has(v.key),R=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let P=!1;v&&x?v.data.isEqual(x.data)?A!==R&&(r.track({type:3,doc:x}),P=!0):this.ga(v,x)||(r.track({type:2,doc:x}),P=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(c=!0)):!v&&x?(r.track({type:0,doc:x}),P=!0):v&&!x&&(r.track({type:1,doc:v}),P=!0,(u||d)&&(c=!0)),P&&(x?(a=a.add(x),i=R?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,m)=>function(x,A){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return R(x)-R(A)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new $i(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new oy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Hx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new qx(r))}),n}ba(e){this.Ta=e.Ts,this.da=Re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $i.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dC{constructor(e){this.key=e,this.va=!1}}class hC{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ji(c=>hx(c),vu),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(he.comparator),this.Na=new Map,this.La=new Sp,this.Ba={},this.ka=new Map,this.qa=Bi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fC(t,e,n=!0){const r=Xx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Wx(r,e,n,!0),s}async function pC(t,e){const n=Xx(t);await Wx(n,e,!0,!1)}async function Wx(t,e,n,r){const s=await MA(t.localStore,Wn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await mC(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Vx(t.remoteStore,s),c}async function mC(t,e,n,r,s){t.Ka=(m,v,x)=>async function(R,P,j,_){let N=P.view.ma(j);N.ns&&(N=await ny(R.localStore,P.query,!1).then(({documents:T})=>P.view.ma(T,N)));const C=_&&_.targetChanges.get(P.targetId),b=_&&_.targetMismatches.get(P.targetId)!=null,M=P.view.applyChanges(N,R.isPrimaryClient,C,b);return uy(R,P.targetId,M.wa),M.snapshot}(t,m,v,x);const i=await ny(t.localStore,e,!0),a=new cC(e,i.Ts),c=a.ma(i.documents),u=Fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);uy(t,n,d.wa);const p=new uC(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function gC(t,e,n){const r=Se(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!vu(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&kp(r.remoteStore,s.targetId),Jh(r,s.targetId)}).catch(Ma)):(Jh(r,s.targetId),await Yh(r.localStore,s.targetId,!0))}async function vC(t,e){const n=Se(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kp(n.remoteStore,r.targetId))}async function yC(t,e,n){const r=IC(t);try{const s=await function(a,c){const u=Se(a),d=yt.now(),p=c.reduce((x,A)=>x.add(A.key),Re());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let A=vr(),R=Re();return u.cs.getEntries(x,p).next(P=>{A=P,A.forEach((j,_)=>{_.isValidDocument()||(R=R.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,A)).next(P=>{m=P;const j=[];for(const _ of c){const N=U2(_,m.get(_.key).overlayedDocument);N!=null&&j.push(new us(_.key,N,sx(N.value.mapValue),_n.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,j,c)}).next(P=>{v=P;const j=P.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(x,P.batchId,j)})}).then(()=>({batchId:v.batchId,changes:mx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new ot(Ve)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await za(r,s.changes),await Su(r.remoteStore)}catch(s){const i=Pp(s,"Failed to persist write");n.reject(i)}}async function Kx(t,e){const n=Se(t);try{const r=await bA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ze(a.va):s.removedDocuments.size>0&&(ze(a.va),a.va=!1))}),await za(n,r,e)}catch(r){await Ma(r)}}function cy(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=Se(a);u.onlineState=c;let d=!1;u.queries.forEach((p,m)=>{for(const v of m.j_)v.Z_(c)&&(d=!0)}),d&&Lp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _C(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new ot(he.comparator);a=a.insert(i,Ft.newNoDocument(i,Ee.min()));const c=Re().add(i),u=new xu(Ee.min(),new Map,new ot(Ve),a,c);await Kx(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Op(r)}else await Yh(r.localStore,e,!1).then(()=>Jh(r,e,n)).catch(Ma)}async function wC(t,e){const n=Se(t),r=e.batch.batchId;try{const s=await PA(n.localStore,e);Qx(n,r,null),Gx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await za(n,s)}catch(s){await Ma(s)}}async function xC(t,e,n){const r=Se(t);try{const s=await function(a,c){const u=Se(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(ze(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);Qx(r,e,n),Gx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await za(r,s)}catch(s){await Ma(s)}}function Gx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Qx(t,e,n){const r=Se(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Jh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Yx(t,r)})}function Yx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(kp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Op(t))}function uy(t,e,n){for(const r of n)r instanceof qx?(t.La.addReference(r.key,e),EC(t,r)):r instanceof Hx?(ae("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Yx(t,r.key)):xe()}function EC(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ae("SyncEngine","New document in limbo: "+n),t.xa.add(r),Op(t))}function Op(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new he(Je.fromString(e)),r=t.qa.next();t.Na.set(r,new dC(n)),t.Oa=t.Oa.insert(n,r),Vx(t.remoteStore,new Fr(Wn(gu(n.path)),r,"TargetPurposeLimboResolution",fp.oe))}}async function za(t,e,n){const r=Se(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Np.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const p=Se(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>K.forEach(d,v=>K.forEach(v.$i,x=>p.persistence.referenceDelegate.addReference(m,v.targetId,x)).next(()=>K.forEach(v.Ui,x=>p.persistence.referenceDelegate.removeReference(m,v.targetId,x)))))}catch(m){if(!Oa(m))throw m;ae("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const x=p.os.get(v),A=x.snapshotVersion,R=x.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(v,R)}}}(r.localStore,i))}async function TC(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const r=await Dx(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new ee(U.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await za(n,r.hs)}}function SC(t,e){const n=Se(t),r=n.Na.get(e);if(r&&r.va)return Re().add(r.key);{let s=Re();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function Xx(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_C.bind(null,e),e.Ca.d_=aC.bind(null,e.eventManager),e.Ca.$a=lC.bind(null,e.eventManager),e}function IC(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xC.bind(null,e),e}class Oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return RA(this.persistence,new AA,e.initialUser,this.serializer)}Ga(e){return new NA(Ip.Zr,this.serializer)}Wa(e){return new VA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oc.provider={build:()=>new Oc};class Zh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TC.bind(null,this.syncEngine),await sC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oC}()}createDatastore(e){const n=Eu(e.databaseInfo.databaseId),r=function(i){return new BA(i)}(e.databaseInfo);return function(i,a,c,u){return new HA(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new KA(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>cy(this.syncEngine,n,0),function(){return sy.D()?new sy:new FA}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,p){const m=new hC(s,i,a,c,u,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Se(s);ae("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ua(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zh.provider={build:()=>new Zh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{ae("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ae("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dd(t,e){t.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Dx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kC(t);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>iy(e.remoteStore,s)),t._onlineComponents=e}async function kC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Vi("Error using user provided cache. Falling back to memory cache: "+n),await Dd(t,new Oc)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await Dd(t,new Oc);return t._offlineComponents}async function Jx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await dy(t,t._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await dy(t,new Zh))),t._onlineComponents}function jC(t){return Jx(t).then(e=>e.syncEngine)}async function Vc(t){const e=await Jx(t),n=e.eventManager;return n.onListen=fC.bind(null,e.syncEngine),n.onUnlisten=gC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vC.bind(null,e.syncEngine),n}function AC(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const p=new Vp({next:v=>{p.Za(),a.enqueueAndForget(()=>Dp(i,m));const x=v.docs.has(c);!x&&v.fromCache?d.reject(new ee(U.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&v.fromCache&&u&&u.source==="server"?d.reject(new ee(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Mp(gu(c.path),p,{includeMetadataChanges:!0,_a:!0});return bp(i,m)}(await Vc(t),t.asyncQueue,e,n,r)),r.promise}function CC(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const p=new Vp({next:v=>{p.Za(),a.enqueueAndForget(()=>Dp(i,m)),v.fromCache&&u.source==="server"?d.reject(new ee(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Mp(c,p,{includeMetadataChanges:!0,_a:!0});return bp(i,m)}(await Vc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e,n){if(!n)throw new ee(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RC(t,e,n,r){if(e===!0&&r===!0)throw new ee(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fy(t){if(!he.isDocumentKey(t))throw new ee(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function py(t){if(he.isDocumentKey(t))throw new ee(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe()}function rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iu(t);throw new ee(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function PC(t,e){if(e<=0)throw new ee(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ee(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ee(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ee(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new my({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new my(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gj;switch(r.type){case"firstParty":return new Jj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hy.get(n);r&&(ae("ComponentProvider","Removing Datastore"),hy.delete(n),r.terminate())}(this),Promise.resolve()}}function bC(t,e,n,r={}){var s;const i=(t=rn(t,Nu))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&Vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ot.MOCK_USER;else{c=cw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ee(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ot(d)}t._authCredentials=new Qj(new ex(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wr(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Jr extends wr{constructor(e,n,r){super(e,n,gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new he(e))}withConverter(e){return new Jr(this.firestore,e,this._path)}}function te(t,e,...n){if(t=it(t),eE("collection","path",e),t instanceof Nu){const r=Je.fromString(e,...n);return py(r),new Jr(t,null,r)}{if(!(t instanceof Ut||t instanceof Jr))throw new ee(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return py(r),new Jr(t.firestore,null,r)}}function ke(t,e,...n){if(t=it(t),arguments.length===1&&(e=tx.newId()),eE("doc","path",e),t instanceof Nu){const r=Je.fromString(e,...n);return fy(r),new Ut(t,null,new he(r))}{if(!(t instanceof Ut||t instanceof Jr))throw new ee(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Je.fromString(e,...n));return fy(r),new Ut(t.firestore,t instanceof Jr?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Mx(this,"async_queue_retry"),this.Vu=()=>{const r=bd();r&&ae("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=bd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Oa(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw gr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Rp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class yr extends Nu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new gy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gy(e),this._firestoreClient=void 0,await e}}}function DC(t,e){const n=typeof t=="object"?t:np(),r=typeof t=="string"?t:"(default)",s=uu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ow("firestore");i&&bC(s,...i)}return s}function ku(t){if(t._terminated)throw new ee(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LC(t),t._firestoreClient}function LC(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,p){return new d2(c,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Zx(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new NC(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qi(Rt.fromBase64String(e))}catch(n){throw new ee(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qi(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^__.*__$/;class OC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Va(e,this.data,n,this.fieldTransforms)}}class tE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class zp{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nE(this.Cu)&&MC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class VC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Eu(e)}Qu(e,n,r,s=!1){return new zp({Cu:e,methodName:n,qu:r,path:kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cu(t){const e=t._freezeSettings(),n=Eu(t._databaseId);return new VC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rE(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);$p("Data must be an object, but it was:",a,r);const c=sE(r,a);let u,d;if(i.merge)u=new ln(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const v=ef(e,m,n);if(!a.contains(v))throw new ee(U.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);oE(p,v)||p.push(v)}u=new ln(p),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new OC(new Jt(c),u,d)}class Ru extends Au{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ru}}class Bp extends Au{_toFieldTransform(e){return new M2(e.path,new Ea)}isEqual(e){return e instanceof Bp}}function FC(t,e,n,r){const s=t.Qu(1,e,n);$p("Data must be an object, but it was:",s,r);const i=[],a=Jt.empty();Ks(r,(u,d)=>{const p=qp(e,u,n);d=it(d);const m=s.Nu(p);if(d instanceof Ru)i.push(p);else{const v=Ba(d,m);v!=null&&(i.push(p),a.set(p,v))}});const c=new ln(i);return new tE(a,c,s.fieldTransforms)}function UC(t,e,n,r,s,i){const a=t.Qu(1,e,n),c=[ef(e,r,n)],u=[s];if(i.length%2!=0)throw new ee(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)c.push(ef(e,i[v])),u.push(i[v+1]);const d=[],p=Jt.empty();for(let v=c.length-1;v>=0;--v)if(!oE(d,c[v])){const x=c[v];let A=u[v];A=it(A);const R=a.Nu(x);if(A instanceof Ru)d.push(x);else{const P=Ba(A,R);P!=null&&(d.push(x),p.set(x,P))}}const m=new ln(d);return new tE(p,m,a.fieldTransforms)}function zC(t,e,n,r=!1){return Ba(n,t.Qu(r?4:3,e))}function Ba(t,e){if(iE(t=it(t)))return $p("Unsupported field value:",e,t),sE(t,e);if(t instanceof Au)return function(r,s){if(!nE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Ba(c,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return b2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=yt.fromDate(r);return{timestampValue:Lc(s.serializer,i)}}if(r instanceof yt){const i=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,i)}}if(r instanceof Fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qi)return{bytesValue:kx(s.serializer,r._byteString)};if(r instanceof Ut){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Tp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Up)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return _p(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Iu(r)}`)}(t,e)}function sE(t,e){const n={};return nx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(r,s)=>{const i=Ba(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof Fp||t instanceof qi||t instanceof Ut||t instanceof Au||t instanceof Up)}function $p(t,e,n){if(!iE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Iu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ef(t,e,n){if((e=it(e))instanceof ju)return e._internalPath;if(typeof e=="string")return qp(t,e);throw Fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const BC=new RegExp("[~\\*/\\[\\]]");function qp(t,e,n){if(e.search(BC)>=0)throw Fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ju(...e.split("."))._internalPath}catch{throw Fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new ee(U.INVALID_ARGUMENT,c+t+u)}function oE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $C(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $C extends aE{data(){return super.data()}}function Pu(t,e){return typeof e=="string"?qp(t,e):e instanceof ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hp{}class Wp extends Hp{}function Ne(t,e,...n){let r=[];e instanceof Hp&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Kp).length,c=i.filter(u=>u instanceof bu).length;if(a>1||a>0&&c>0)throw new ee(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class bu extends Wp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bu(e,n,r)}_apply(e){const n=this._parse(e);return cE(e._query,n),new wr(e.firestore,e.converter,Hh(e._query,n))}_parse(e){const n=Cu(e.firestore);return function(i,a,c,u,d,p,m){let v;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ee(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){_y(m,p);const x=[];for(const A of m)x.push(yy(u,i,A));v={arrayValue:{values:x}}}else v=yy(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||_y(m,p),v=zC(c,a,m,p==="in"||p==="not-in");return mt.create(d,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function de(t,e,n){const r=e,s=Pu("where",t);return bu._create(s,r,n)}class Kp extends Hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)cE(a,u),a=Hh(a,u)}(e._query,n),new wr(e.firestore,e.converter,Hh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gp extends Wp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new ee(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ee(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xa(i,a)}(e._query,this._field,this._direction);return new wr(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Xi(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ar(t,e="asc"){const n=e,r=Pu("orderBy",t);return Gp._create(r,n)}class Qp extends Wp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Qp(e,n,r)}_apply(e){return new wr(e.firestore,e.converter,bc(e._query,this._limit,this._limitType))}}function Ko(t){return PC("limit",t),Qp._create("limit",t,"F")}function yy(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new ee(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dx(e)&&n.indexOf("/")!==-1)throw new ee(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Je.fromString(n));if(!he.isDocumentKey(r))throw new ee(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fv(t,new he(r))}if(n instanceof Ut)return Fv(t,n._key);throw new ee(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(n)}.`)}function _y(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cE(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qC{convertValue(e,n="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ks(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>dt(a.doubleValue));return new Up(i)}convertGeoPoint(e){return new Fp(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ya(e));default:return null}}convertTimestamp(e){const n=rs(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Je.fromString(e);ze(bx(r));const s=new _a(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||gr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dE extends aE{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jl extends dE{data(e={}){return super.data(e)}}class hE{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Po(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jl(this._firestore,this._userDataWriter,r.key,r,new Po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Jl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Po(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Jl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Po(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:HC(c.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){t=rn(t,Ut);const e=rn(t.firestore,yr);return AC(ku(e),t._key).then(n=>fE(e,t,n))}class Yp extends qC{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Te(t){t=rn(t,wr);const e=rn(t.firestore,yr),n=ku(e),r=new Yp(e);return lE(t._query),CC(n,t._query).then(s=>new hE(e,r,t,s))}function zc(t,e,n){t=rn(t,Ut);const r=rn(t.firestore,yr),s=uE(t.converter,e);return Du(r,[rE(Cu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_n.none())])}function Ge(t,e,n,...r){t=rn(t,Ut);const s=rn(t.firestore,yr),i=Cu(s);let a;return a=typeof(e=it(e))=="string"||e instanceof ju?UC(i,"updateDoc",t._key,e,n,r):FC(i,"updateDoc",t._key,e),Du(s,[a.toMutation(t._key,_n.exists(!0))])}function ks(t){return Du(rn(t.firestore,yr),[new wp(t._key,_n.none())])}function cn(t,e){const n=rn(t.firestore,yr),r=ke(t),s=uE(t.converter,e);return Du(n,[rE(Cu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}function er(t,...e){var n,r,s;t=it(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||vy(e[a])||(i=e[a],a++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(vy(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,p;if(t instanceof Ut)d=rn(t.firestore,yr),p=gu(t._key.path),u={next:m=>{e[a]&&e[a](fE(d,t,m))},error:e[a+1],complete:e[a+2]};else{const m=rn(t,wr);d=rn(m.firestore,yr),p=m._query;const v=new Yp(d);u={next:x=>{e[a]&&e[a](new hE(d,v,m,x))},error:e[a+1],complete:e[a+2]},lE(t._query)}return function(v,x,A,R){const P=new Vp(R),j=new Mp(x,P,A);return v.asyncQueue.enqueueAndForget(async()=>bp(await Vc(v),j)),()=>{P.Za(),v.asyncQueue.enqueueAndForget(async()=>Dp(await Vc(v),j))}}(ku(d),p,c,u)}function Du(t,e){return function(r,s){const i=new cr;return r.asyncQueue.enqueueAndForget(async()=>yC(await jC(r),s,i)),i.promise}(ku(t),e)}function fE(t,e,n){const r=n.docs.get(e._key),s=new Yp(t);return new dE(t,s,e._key,r,new Po(n.hasPendingWrites,n.fromCache),e.converter)}function Le(){return new Bp("serverTimestamp")}(function(e,n=!0){(function(s){Yi=s})(Hs),Ds(new ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new yr(new Yj(r.getProvider("auth-internal")),new e2(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ee(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(d.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),$n(Dv,"4.7.3",e),$n(Dv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebasestorage.googleapis.com",mE="storageBucket",WC=2*60*1e3,KC=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends Qn{constructor(e,n,r=0){super(Ld(e),`Firebase Storage: ${n} (${Ld(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ld(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ct;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ct||(ct={}));function Ld(t){return"storage/"+t}function Xp(){const t="An unknown error occurred, please check the error payload for server response.";return new ut(ct.UNKNOWN,t)}function GC(t){return new ut(ct.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function QC(t){return new ut(ct.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function YC(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ut(ct.UNAUTHENTICATED,t)}function XC(){return new ut(ct.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function JC(t){return new ut(ct.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ZC(){return new ut(ct.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eR(){return new ut(ct.CANCELED,"User canceled the upload/download.")}function tR(t){return new ut(ct.INVALID_URL,"Invalid URL '"+t+"'.")}function nR(t){return new ut(ct.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function rR(){return new ut(ct.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mE+"' property when initializing the app?")}function sR(){return new ut(ct.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iR(){return new ut(ct.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oR(t){return new ut(ct.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tf(t){return new ut(ct.INVALID_ARGUMENT,t)}function gE(){return new ut(ct.APP_DELETED,"The Firebase app was deleted.")}function aR(t){return new ut(ct.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Go(t,e){return new ut(ct.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xo(t){throw new ut(ct.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=un.makeFromUrl(e,n)}catch{return new un(e,"")}if(r.path==="")return r;throw nR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${p}/b/${s}/o${v}`,"i"),A={bucket:1,path:3},R=n===pE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",j=new RegExp(`^https?://${R}/${s}/${P}`,"i"),N=[{regex:c,indices:u,postModify:i},{regex:x,indices:A,postModify:d},{regex:j,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<N.length;C++){const b=N[C],M=b.regex.exec(e);if(M){const T=M[b.indices.bucket];let g=M[b.indices.path];g||(g=""),r=new un(T,g),b.postModify(r);break}}if(r==null)throw tR(e);return r}}class lR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e,n){let r=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let d=!1;function p(...P){d||(d=!0,e.apply(null,P))}function m(P){s=setTimeout(()=>{s=null,t(x,u())},P)}function v(){i&&clearTimeout(i)}function x(P,...j){if(d){v();return}if(P){v(),p.call(null,P,...j);return}if(u()||a){v(),p.call(null,P,...j);return}r<64&&(r*=2);let N;c===1?(c=2,N=0):N=(r+Math.random())*1e3,m(N)}let A=!1;function R(P){A||(A=!0,v(),!d&&(s!==null?(P||(c=2),clearTimeout(s),m(0)):P||(c=1)))}return m(0),i=setTimeout(()=>{a=!0,R(!0)},n),R}function uR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){return t!==void 0}function hR(t){return typeof t=="object"&&!Array.isArray(t)}function Jp(t){return typeof t=="string"||t instanceof String}function wy(t){return Zp()&&t instanceof Blob}function Zp(){return typeof Blob<"u"}function xy(t,e,n,r){if(r<e)throw tf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw tf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function vE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var js;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(js||(js={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,r,s,i,a,c,u,d,p,m,v=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=m,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,A)=>{this.resolve_=x,this.reject_=A,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Al(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===js.NO_ERROR,u=i.getStatus();if(!c||fR(u,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===js.ABORT;r(!1,new Al(!1,null,p));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Al(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());dR(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=Xp();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?gE():eR();a(u)}else{const u=ZC();a(u)}};this.canceled_?n(!1,new Al(!1,null,!0)):this.backoffId_=cR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Al{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function mR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function gR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function yR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _R(t,e,n,r,s,i,a=!0){const c=vE(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return vR(d,e),mR(d,n),gR(d,i),yR(d,r),new pR(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xR(...t){const e=wR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Zp())return new Blob(t);throw new ut(ct.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ER(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){if(typeof atob>"u")throw oR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Md{constructor(e,n){this.data=e,this.contentType=n||null}}function SR(t,e){switch(t){case Fn.RAW:return new Md(yE(e));case Fn.BASE64:case Fn.BASE64URL:return new Md(_E(t,e));case Fn.DATA_URL:return new Md(NR(e),kR(e))}throw Xp()}function yE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function IR(t){let e;try{e=decodeURIComponent(t)}catch{throw Go(Fn.DATA_URL,"Malformed data URL.")}return yE(e)}function _E(t,e){switch(t){case Fn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Go(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Fn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Go(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=TR(e)}catch(s){throw s.message.includes("polyfill")?s:Go(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class wE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Go(Fn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=jR(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function NR(t){const e=new wE(t);return e.base64?_E(Fn.BASE64,e.rest):IR(e.rest)}function kR(t){return new wE(t).contentType}function jR(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){let r=0,s="";wy(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(wy(this.data_)){const r=this.data_,s=ER(r,e,n);return s===null?null:new Mr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Mr(r,!0)}}static getBlob(...e){if(Zp()){const n=e.map(r=>r instanceof Mr?r.data_:r);return new Mr(xR.apply(null,n))}else{const n=e.map(a=>Jp(a)?SR(Fn.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new Mr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){let e;try{e=JSON.parse(t)}catch{return null}return hR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CR(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function EE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e){return e}class qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||RR}}let Cl=null;function PR(t){return!Jp(t)||t.length<2?t:EE(t)}function TE(){if(Cl)return Cl;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(i,a){return PR(a)}const n=new qt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new qt("size");return s.xform=r,t.push(s),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),Cl=t,Cl}function bR(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new un(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function DR(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return bR(r,t),r}function SE(t,e,n){const r=xE(e);return r===null?null:DR(t,r,n)}function LR(t,e,n,r){const s=xE(e);if(s===null||!Jp(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const p=t.bucket,m=t.fullPath,v="/b/"+a(p)+"/o/"+a(m),x=em(v,n,r),A=vE({alt:"media",token:d});return x+A})[0]}function MR(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class IE{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){if(!t)throw Xp()}function OR(t,e){function n(r,s){const i=SE(t,s,e);return NE(i!==null),i}return n}function VR(t,e){function n(r,s){const i=SE(t,s,e);return NE(i!==null),LR(i,s,t.host,t._protocol)}return n}function kE(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=XC():s=YC():n.getStatus()===402?s=QC(t.bucket):n.getStatus()===403?s=JC(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function FR(t){const e=kE(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=GC(t.path)),i.serverResponse=s.serverResponse,i}return n}function UR(t,e,n){const r=e.fullServerUrl(),s=em(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new IE(s,i,VR(t,n),a);return c.errorHandler=FR(e),c}function zR(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BR(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=zR(null,e)),r}function $R(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let N="";for(let C=0;C<2;C++)N=N+Math.random().toString().slice(2);return N}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const d=BR(e,r,s),p=MR(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,v=`\r
--`+u+"--",x=Mr.getBlob(m,r,v);if(x===null)throw sR();const A={name:d.fullPath},R=em(i,t.host,t._protocol),P="POST",j=t.maxUploadRetryTime,_=new IE(R,P,OR(t,n),j);return _.urlParams=A,_.headers=a,_.body=x.uploadData(),_.errorHandler=kE(e),_}class qR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=js.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=js.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=js.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw xo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class HR extends qR{initXhr(){this.xhr_.responseType="text"}}function jE(){return new HR}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this._service=e,n instanceof un?this._location=n:this._location=un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fs(e,n)}get root(){const e=new un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EE(this._location.path)}get storage(){return this._service}get parent(){const e=AR(this._location.path);if(e===null)return null;const n=new un(this._location.bucket,e);return new Fs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw aR(e)}}function WR(t,e,n){t._throwIfRoot("uploadBytes");const r=$R(t.storage,t._location,TE(),new Mr(e,!0),n);return t.storage.makeRequestWithTokens(r,jE).then(s=>({metadata:s,ref:t}))}function KR(t){t._throwIfRoot("getDownloadURL");const e=UR(t.storage,t._location,TE());return t.storage.makeRequestWithTokens(e,jE).then(n=>{if(n===null)throw iR();return n})}function GR(t,e){const n=CR(t._location.path,e),r=new un(t._location.bucket,n);return new Fs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return/^[A-Za-z]+:\/\//.test(t)}function YR(t,e){return new Fs(t,e)}function AE(t,e){if(t instanceof tm){const n=t;if(n._bucket==null)throw rR();const r=new Fs(n,n._bucket);return e!=null?AE(r,e):r}else return e!==void 0?GR(t,e):t}function XR(t,e){if(e&&QR(e)){if(t instanceof tm)return YR(t,e);throw tf("To use ref(service, url), the first argument must be a Storage instance.")}else return AE(t,e)}function Ey(t,e){const n=e==null?void 0:e[mE];return n==null?null:un.makeFromBucketSpec(n,t)}function JR(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:cw(s,t.app.options.projectId))}class tm{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=pE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WC,this._maxUploadRetryTime=KC,this._requests=new Set,s!=null?this._bucket=un.makeFromBucketSpec(s,this._host):this._bucket=Ey(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=un.makeFromBucketSpec(this._url,e):this._bucket=Ey(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new lR(gE());{const a=_R(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Ty="@firebase/storage",Sy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="storage";function ZR(t,e,n){return t=it(t),WR(t,e,n)}function eP(t){return t=it(t),KR(t)}function tP(t,e){return t=it(t),XR(t,e)}function nP(t=np(),e){t=it(t);const r=uu(t,CE).getImmediate({identifier:e}),s=ow("storage");return s&&rP(r,...s),r}function rP(t,e,n,r={}){JR(t,e,n,r)}function sP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new tm(n,r,s,e,Hs)}function iP(){Ds(new ts(CE,sP,"PUBLIC").setMultipleInstances(!0)),$n(Ty,Sy,""),$n(Ty,Sy,"esm2017")}iP();const oP={apiKey:"AIzaSyC_hwBHgdLWmI6z920PNgmWTKYSl_TZ4I0",authDomain:"work-calendar-839f2.firebaseapp.com",projectId:"work-calendar-839f2",storageBucket:"work-calendar-839f2.firebasestorage.app",messagingSenderId:"823701886482",appId:"1:823701886482:web:4a368e517a6d158ea12acb"},nm=hw(oP),Od=Wj(nm),W=DC(nm),aP=nP(nm),Qt=nI((t,e)=>({user:null,userData:null,loading:!0,isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1,initialize:()=>Dk(Od,async r=>{if(r)try{const s=await Uc(ke(W,"employees",r.uid));if(s.exists()){const i=s.data();t({user:r,userData:i,loading:!1,isAdmin:i.isAdmin===!0,isSubAdmin:i.isSubAdmin===!0,isApprover:i.isApprover===!0,isPTScheduleEditor:i.isPTScheduleEditor===!0})}else t({user:r,loading:!1})}catch(s){console.error("   :",s),t({loading:!1})}else t({user:null,userData:null,loading:!1,isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1})}),login:async(n,r)=>{try{return await Rk(Od,n,r),{success:!0}}catch(s){return console.error(" :",s),{success:!1,error:s.message}}},logout:async()=>{try{return await Lk(Od),t({user:null,userData:null,isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1}),{success:!0}}catch(n){return console.error(" :",n),{success:!1,error:n.message}}},setUserData:n=>{t({userData:n})}}));function lP(){const[t,e]=D.useState(""),[n,r]=D.useState(""),[s,i]=D.useState(""),[a,c]=D.useState(!1),{login:u}=Qt(),d=async p=>{p.preventDefault(),i(""),c(!0),(await u(t,n)).success||i(" .   ."),c(!1)};return o.jsx("div",{className:"login-container",children:o.jsxs("div",{className:"login-card",children:[o.jsxs("div",{className:"login-header",children:[o.jsx("h1",{children:"ONFL "}),o.jsx("p",{children:"     "})]}),o.jsxs("form",{onSubmit:d,className:"login-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:""}),o.jsx("input",{id:"email",type:"email",value:t,onChange:p=>e(p.target.value),placeholder:"example@company.com",required:!0,autoComplete:"email"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:""}),o.jsx("input",{id:"password",type:"password",value:n,onChange:p=>r(p.target.value),placeholder:"",required:!0,autoComplete:"current-password"})]}),s&&o.jsx("div",{className:"error-message",children:s}),o.jsx("button",{type:"submit",className:"login-button",disabled:a,children:a?" ...":""})]})]})})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=D.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},p)=>D.createElement("svg",{ref:p,...cP,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${uP(t)}`,c].join(" "),...d},[...e.map(([m,v])=>D.createElement(m,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=ne("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=ne("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=ne("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=ne("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=ne("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=ne("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=ne("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=ne("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ne("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=ne("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ne("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ne("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ne("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=ne("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=ne("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ne("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=ne("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=ne("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=ne("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=ne("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=ne("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=ne("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=ne("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=ne("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=ne("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=ne("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=ne("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=ne("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=ne("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=ne("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=ne("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$P=({isOpen:t,onClose:e,onNavigate:n})=>{const{user:r}=Qt(),[s,i]=D.useState(""),[a,c]=D.useState({notes:[],messages:[],events:[],employees:[],projects:[]}),[u,d]=D.useState(0),[p,m]=D.useState(!1),[v,x]=D.useState([]),A=D.useRef(null),R=D.useRef(null);D.useEffect(()=>{const E=w=>{if(!((w.ctrlKey||w.metaKey)&&w.key==="k"&&(w.preventDefault(),!t&&n))&&(w.key==="Escape"&&t&&e(),t&&s)){const I=M();w.key==="ArrowDown"?(w.preventDefault(),d(z=>(z+1)%I)):w.key==="ArrowUp"?(w.preventDefault(),d(z=>(z-1+I)%I)):w.key==="Enter"&&(w.preventDefault(),T())}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[t,s,u]),D.useEffect(()=>{t&&A.current&&A.current.focus()},[t]),D.useEffect(()=>{const E=localStorage.getItem("recentSearches");E&&x(JSON.parse(E))},[]),D.useEffect(()=>(s.length>=2?(R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{P(s)},300)):c({notes:[],messages:[],events:[],employees:[],projects:[]}),()=>{R.current&&clearTimeout(R.current)}),[s]);const P=async E=>{if(r){m(!0);try{const w=await Promise.all([j(E),_(E),N(E),C(E),b(E)]);c({notes:w[0],messages:w[1],events:w[2],employees:w[3],projects:w[4]}),d(0)}catch(w){console.error(" :",w)}m(!1)}},j=async E=>{try{const w=te(W,"notes");return(await Te(w)).docs.map(z=>({id:z.id,...z.data()})).filter(z=>{var le,X;return z.userId===r.uid&&(((le=z.title)==null?void 0:le.toLowerCase().includes(E.toLowerCase()))||((X=z.content)==null?void 0:X.toLowerCase().includes(E.toLowerCase())))}).slice(0,5)}catch(w){return console.error("  :",w),[]}},_=async E=>{try{const w=te(W,"directMessages");return(await Te(Ne(w,Ko(100)))).docs.map(z=>({id:z.id,...z.data()})).filter(z=>{var le;return(z.senderId===r.uid||z.receiverId===r.uid)&&((le=z.message)==null?void 0:le.toLowerCase().includes(E.toLowerCase()))}).slice(0,5)}catch(w){return console.error("  :",w),[]}},N=async E=>{try{const w=te(W,"schedules");return(await Te(w)).docs.map(z=>({id:z.id,...z.data()})).filter(z=>{var le,X;return z.userId===r.uid&&(((le=z.title)==null?void 0:le.toLowerCase().includes(E.toLowerCase()))||((X=z.description)==null?void 0:X.toLowerCase().includes(E.toLowerCase())))}).slice(0,5)}catch(w){return console.error("  :",w),[]}},C=async E=>{try{const w=te(W,"employees");return(await Te(w)).docs.map(z=>({id:z.id,...z.data()})).filter(z=>{var le,X,ye;return((le=z.name)==null?void 0:le.toLowerCase().includes(E.toLowerCase()))||((X=z.email)==null?void 0:X.toLowerCase().includes(E.toLowerCase()))||((ye=z.department)==null?void 0:ye.toLowerCase().includes(E.toLowerCase()))}).slice(0,5)}catch(w){return console.error("  :",w),[]}},b=async E=>{try{const w=te(W,"projects");return(await Te(w)).docs.map(z=>({id:z.id,...z.data()})).filter(z=>{var le;return(z.ownerId===r.uid||z.type==="team")&&((le=z.name)==null?void 0:le.toLowerCase().includes(E.toLowerCase()))}).slice(0,5)}catch(w){return console.error("  :",w),[]}},M=()=>Object.values(a).reduce((E,w)=>E+w.length,0),T=()=>{const E=[...a.notes.map(w=>({...w,type:"note"})),...a.messages.map(w=>({...w,type:"message"})),...a.events.map(w=>({...w,type:"event"})),...a.employees.map(w=>({...w,type:"employee"})),...a.projects.map(w=>({...w,type:"project"}))];E[u]&&g(E[u])},g=E=>{const w=[s,...v.filter(I=>I!==s)].slice(0,5);if(x(w),localStorage.setItem("recentSearches",JSON.stringify(w)),n)switch(E.type){case"note":n("notes",E);break;case"message":n("messenger",E);break;case"event":n("calendar",E);break;case"employee":n("department",E);break;case"project":n("notes",E);break}e()},k=E=>{i(E)},y=()=>{x([]),localStorage.removeItem("recentSearches")};return t?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"search-overlay",onClick:e}),o.jsxs("div",{className:"search-modal",children:[o.jsxs("div",{className:"search-header",children:[o.jsx(zs,{size:20,className:"search-icon"}),o.jsx("input",{ref:A,type:"text",className:"search-input",placeholder:", , ,  ...",value:s,onChange:E=>i(E.target.value)}),o.jsx("div",{className:"search-shortcuts",children:o.jsx("kbd",{children:"ESC"})}),o.jsx("button",{className:"btn-close-search",onClick:e,children:o.jsx(Bs,{size:20})})]}),o.jsxs("div",{className:"search-content",children:[!s&&v.length>0&&o.jsxs("div",{className:"search-section",children:[o.jsxs("div",{className:"search-section-header",children:[o.jsxs("h3",{children:[o.jsx(Hc,{size:16}),o.jsx("span",{children:" "})]}),o.jsx("button",{className:"btn-text-small",onClick:y,children:""})]}),o.jsx("div",{className:"recent-searches",children:v.map((E,w)=>o.jsxs("button",{className:"recent-search-item",onClick:()=>k(E),children:[o.jsx(Hc,{size:14}),o.jsx("span",{children:E})]},w))})]}),p&&o.jsxs("div",{className:"search-loading",children:[o.jsx("div",{className:"loading-spinner-small"}),o.jsx("p",{children:" ..."})]}),s&&!p&&M()===0&&o.jsxs("div",{className:"search-empty",children:[o.jsx(zs,{size:48}),o.jsxs("p",{children:["'",s,"'   "]})]}),s&&M()>0&&o.jsxs(o.Fragment,{children:[a.notes.length>0&&o.jsxs("div",{className:"search-section",children:[o.jsxs("div",{className:"search-section-header",children:[o.jsxs("h3",{children:[o.jsx(Ia,{size:16}),o.jsx("span",{children:""})]}),o.jsx("span",{className:"result-count",children:a.notes.length})]}),a.notes.map((E,w)=>{var I;return o.jsxs("button",{className:`search-result-item ${u===w?"selected":""}`,onClick:()=>g({...E,type:"note"}),children:[o.jsx(Ia,{size:18}),o.jsxs("div",{className:"result-content",children:[o.jsx("h4",{children:E.title||" "}),o.jsxs("p",{children:[(I=E.content)==null?void 0:I.replace(/<[^>]*>/g,"").substring(0,60),"..."]})]}),o.jsx(Eo,{size:16,className:"result-arrow"})]},E.id)})]}),a.messages.length>0&&o.jsxs("div",{className:"search-section",children:[o.jsxs("div",{className:"search-section-header",children:[o.jsxs("h3",{children:[o.jsx(Us,{size:16}),o.jsx("span",{children:""})]}),o.jsx("span",{className:"result-count",children:a.messages.length})]}),a.messages.map((E,w)=>{var I;return o.jsxs("button",{className:`search-result-item ${u===a.notes.length+w?"selected":""}`,onClick:()=>g({...E,type:"message"}),children:[o.jsx(Us,{size:18}),o.jsxs("div",{className:"result-content",children:[o.jsx("h4",{children:E.senderId===r.uid?" ":" "}),o.jsxs("p",{children:[(I=E.message)==null?void 0:I.substring(0,60),"..."]})]}),o.jsx(Eo,{size:16,className:"result-arrow"})]},E.id)})]}),a.events.length>0&&o.jsxs("div",{className:"search-section",children:[o.jsxs("div",{className:"search-section-header",children:[o.jsxs("h3",{children:[o.jsx(Un,{size:16}),o.jsx("span",{children:""})]}),o.jsx("span",{className:"result-count",children:a.events.length})]}),a.events.map((E,w)=>o.jsxs("button",{className:"search-result-item",onClick:()=>g({...E,type:"event"}),children:[o.jsx(Un,{size:18}),o.jsxs("div",{className:"result-content",children:[o.jsx("h4",{children:E.title}),o.jsxs("p",{children:[E.date," ",E.time||""]})]}),o.jsx(Eo,{size:16,className:"result-arrow"})]},E.id))]}),a.employees.length>0&&o.jsxs("div",{className:"search-section",children:[o.jsxs("div",{className:"search-section-header",children:[o.jsxs("h3",{children:[o.jsx(_s,{size:16}),o.jsx("span",{children:""})]}),o.jsx("span",{className:"result-count",children:a.employees.length})]}),a.employees.map((E,w)=>o.jsxs("button",{className:"search-result-item",onClick:()=>g({...E,type:"employee"}),children:[o.jsx(_s,{size:18}),o.jsxs("div",{className:"result-content",children:[o.jsx("h4",{children:E.name}),o.jsxs("p",{children:[E.department,"  ",E.position]})]}),o.jsx(Eo,{size:16,className:"result-arrow"})]},E.id))]}),a.projects.length>0&&o.jsxs("div",{className:"search-section",children:[o.jsxs("div",{className:"search-section-header",children:[o.jsxs("h3",{children:[o.jsx(ys,{size:16}),o.jsx("span",{children:""})]}),o.jsx("span",{className:"result-count",children:a.projects.length})]}),a.projects.map((E,w)=>o.jsxs("button",{className:"search-result-item",onClick:()=>g({...E,type:"project"}),children:[o.jsx(ys,{size:18}),o.jsxs("div",{className:"result-content",children:[o.jsx("h4",{children:E.name}),o.jsx("p",{children:E.type==="personal"?" ":" "})]}),o.jsx(Eo,{size:16,className:"result-arrow"})]},E.id))]})]})]}),o.jsx("div",{className:"search-footer",children:o.jsxs("div",{className:"search-tips",children:[o.jsxs("span",{children:[o.jsx("kbd",{children:""}),o.jsx("kbd",{children:""})," "]}),o.jsxs("span",{children:[o.jsx("kbd",{children:"Enter"})," "]}),o.jsxs("span",{children:[o.jsx("kbd",{children:"ESC"})," "]})]})})]})]}):null};function qP({onMenuToggle:t,onNavigate:e}){const{userData:n,isAdmin:r,isSubAdmin:s,isApprover:i,isPTScheduleEditor:a,logout:c}=Qt(),[u,d]=D.useState(!1),[p,m]=D.useState(!1),v=(n==null?void 0:n.name)||(n==null?void 0:n.email);return cf.useEffect(()=>{const x=A=>{(A.ctrlKey||A.metaKey)&&A.key==="k"&&(A.preventDefault(),m(!0))};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[]),o.jsxs("header",{className:"header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("button",{className:"menu-toggle-btn",onClick:t,title:" /",children:o.jsx(RP,{size:24})}),o.jsxs("div",{className:"header-title",children:[o.jsx("h1",{children:"ONFL "}),o.jsx("p",{className:"header-subtitle",children:"     "})]})]}),o.jsx("div",{className:"header-center",children:o.jsxs("button",{className:"search-trigger",onClick:()=>m(!0),title:" (Ctrl+K)",children:[o.jsx(zs,{size:18}),o.jsx("span",{children:"..."}),o.jsxs("kbd",{className:"search-shortcut",children:[o.jsx(xP,{size:12}),o.jsx("span",{children:"K"})]})]})}),o.jsxs("div",{className:"user-info",children:[o.jsx("button",{className:"notification-bell",onClick:()=>d(!u),title:"",children:o.jsx(nf,{size:20})}),o.jsx("span",{className:"user-name",children:v}),r&&o.jsx("span",{className:"badge badge-admin",children:""}),s&&!r&&o.jsx("span",{className:"badge badge-subadmin",children:""}),i&&!r&&o.jsx("span",{className:"badge badge-approver",children:""}),a&&o.jsx("span",{className:"badge badge-pt",children:"PT"})]}),o.jsx($P,{isOpen:p,onClose:()=>m(!1),onNavigate:e})]})}function HP({activeTab:t,setActiveTab:e,isOpen:n,onClose:r}){const{isAdmin:s,isSubAdmin:i,isApprover:a,logout:c}=Qt(),u=[{id:"dashboard",label:"",show:!0},{id:"calendar",label:" ",show:!0},{id:"annualLeave",label:" ",show:!s},{id:"ptSchedule",label:"PT ",show:!0},{id:"approval",label:" ",show:a&&!s},{id:"department",label:" ",show:!0},{id:"notes",label:" ",show:!0},{id:"messenger",label:" ",show:!0},{id:"profile",label:"  ",show:!0},{id:"settings",label:" ",show:!0},{id:"admin-leave",label:" ",show:s||i},{id:"approval-line",label:" ",show:s||i},{id:"admin",label:" ",show:s||i},{id:"slack-settings",label:"Slack ",show:s||i}],d=m=>{e(m),window.innerWidth<=768&&r()},p=async()=>{confirm(" ?")&&await c()};return o.jsxs(o.Fragment,{children:[n&&o.jsx("div",{className:"nav-overlay",onClick:r}),o.jsxs("nav",{className:`navigation-sidebar ${n?"open":""}`,children:[o.jsxs("div",{className:"nav-header",children:[o.jsx("h2",{children:""}),o.jsx("button",{className:"nav-close-btn",onClick:r,title:" ",children:o.jsx(Bs,{size:24})})]}),o.jsx("div",{className:"nav-items",children:u.filter(m=>m.show).map(m=>o.jsx("button",{className:`nav-item ${t===m.id?"active":""}`,onClick:()=>d(m.id),children:m.label},m.id))}),o.jsx("div",{className:"nav-footer",children:o.jsxs("button",{className:"nav-logout-btn",onClick:p,children:[o.jsx(AP,{size:18}),o.jsx("span",{children:""})]})})]})]})}function WP({setActiveTab:t}){const{user:e,userData:n,isApprover:r,isAdmin:s}=Qt(),[i,a]=D.useState([]),[c,u]=D.useState({total:0,used:0,remaining:0}),[d,p]=D.useState(0),[m,v]=D.useState({totalEmployees:0,onLeave:0,activeProjects:0,messagesCount:0}),[x,A]=D.useState([]),[R,P]=D.useState({labels:[],leaves:[],approvals:[]}),[j,_]=D.useState(!0);D.useEffect(()=>{e&&N()},[e]);const N=async()=>{_(!0);try{await Promise.all([C(),b(),r&&M(),T(),g(),k()])}catch(w){console.error("   :",w)}_(!1)},C=async()=>{try{const w=new Date().toISOString().split("T")[0],I=Ne(te(W,"schedules"),de("date","==",w)),le=(await Te(I)).docs.map(X=>({id:X.id,...X.data()})).filter(X=>X.approvalStatus==="approved"||X.userId===e.uid).slice(0,5);a(le)}catch(w){console.error("  :",w)}},b=async()=>{try{const w=Ne(te(W,"annualLeaves"),de("userId","==",e.uid)),X=(await Te(w)).docs.map(B=>B.data()).filter(B=>B.status==="approved").reduce((B,Y)=>B+(Y.days||0),0),ye=(n==null?void 0:n.totalAnnualLeave)||15;u({total:ye,used:X,remaining:ye-X})}catch(w){console.error("   :",w)}},M=async()=>{try{const w=Ne(te(W,"annualLeaves"),de("status","==","pending")),I=await Te(w);p(I.size)}catch(w){console.error("   :",w)}},T=async()=>{try{const I=(await Te(te(W,"employees"))).size,z=new Date().toISOString().split("T")[0],le=Ne(te(W,"annualLeaves"),de("status","==","approved")),ye=(await Te(le)).docs.filter(Z=>{const fe=Z.data();return fe.startDate<=z&&fe.endDate>=z}).length,Y=(await Te(te(W,"projects"))).size,F=Ne(te(W,"directMessages"),Ko(100)),q=(await Te(F)).docs.filter(Z=>{const fe=Z.data();return fe.timestamp?fe.timestamp.toDate().toISOString().split("T")[0]===z:!1}).length;v({totalEmployees:I,onLeave:ye,activeProjects:Y,messagesCount:q})}catch(w){console.error("   :",w)}},g=async()=>{try{const w=[],I=Ne(te(W,"annualLeaves"),de("userId","==",e.uid),Ar("createdAt","desc"),Ko(3));(await Te(I)).docs.forEach(B=>{var F;const Y=B.data();w.push({id:B.id,type:"leave",title:` ${Y.status==="approved"?"":Y.status==="rejected"?"":""}`,description:`${Y.startDate} ~ ${Y.endDate}`,time:(F=Y.createdAt)==null?void 0:F.toDate(),status:Y.status,icon:Y.status==="approved"?"check":Y.status==="rejected"?"x":"clock"})});const le=Ne(te(W,"directMessages"),Ko(5));(await Te(le)).docs.filter(B=>{const Y=B.data();return Y.senderId===e.uid||Y.receiverId===e.uid}).slice(0,2).forEach(B=>{var F,$;const Y=B.data();w.push({id:B.id,type:"message",title:Y.senderId===e.uid?" ":" ",description:((F=Y.message)==null?void 0:F.substring(0,30))+"...",time:($=Y.timestamp)==null?void 0:$.toDate(),icon:"message"})}),w.sort((B,Y)=>B.time?Y.time?Y.time-B.time:-1:1),A(w.slice(0,8))}catch(w){console.error("   :",w)}},k=async()=>{try{P({labels:["1","2","3","4","5","6"],leaves:[2,1,3,2,4,1],approvals:[5,7,4,8,6,9]})}catch(w){console.error("   :",w)}},y=w=>{switch(w){case"check":return o.jsx(rf,{size:18,className:"activity-icon success"});case"x":return o.jsx(BP,{size:18,className:"activity-icon error"});case"clock":return o.jsx(Hc,{size:18,className:"activity-icon warning"});case"message":return o.jsx(Us,{size:18,className:"activity-icon info"});default:return o.jsx(Iy,{size:18,className:"activity-icon"})}},E=w=>{if(!w)return"";const z=new Date-w,le=Math.floor(z/6e4),X=Math.floor(le/60),ye=Math.floor(X/24);return ye>0?`${ye} `:X>0?`${X} `:le>0?`${le} `:""};return j?o.jsxs("div",{className:"dashboard-loading",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"  ..."})]}):o.jsxs("div",{className:"dashboard-page",children:[o.jsxs("div",{className:"dashboard-header",children:[o.jsxs("div",{children:[o.jsxs("h1",{children:[", ",(n==null?void 0:n.name)||(e==null?void 0:e.email),"! "]}),o.jsx("p",{children:"   "})]}),o.jsxs("div",{className:"quick-actions",children:[o.jsxs("button",{className:"quick-action-btn primary",onClick:()=>t&&t("calendar"),children:[o.jsx(vP,{size:18}),o.jsx("span",{children:" "})]}),o.jsxs("button",{className:"quick-action-btn",onClick:()=>t&&t("annualLeave"),children:[o.jsx(Ur,{size:18}),o.jsx("span",{children:" "})]})]})]}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card primary",children:[o.jsx("div",{className:"stat-icon",children:o.jsx(Un,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("p",{className:"stat-label",children:" "}),o.jsxs("h2",{className:"stat-value",children:[c.remaining,""]}),o.jsxs("p",{className:"stat-detail",children:[" ",c.total,"  ",c.used," "]})]}),o.jsx("div",{className:"stat-progress",children:o.jsx("div",{className:"stat-progress-bar",style:{width:`${c.used/c.total*100}%`}})})]}),o.jsxs("div",{className:"stat-card success",children:[o.jsx("div",{className:"stat-icon",children:o.jsx(rf,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("p",{className:"stat-label",children:" "}),o.jsxs("h2",{className:"stat-value",children:[i.length,""]}),o.jsx("p",{className:"stat-detail",children:i.length>0?" ":" "})]})]}),r&&o.jsxs("div",{className:"stat-card warning",children:[o.jsx("div",{className:"stat-icon",children:o.jsx(Bc,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("p",{className:"stat-label",children:" "}),o.jsxs("h2",{className:"stat-value",children:[d,""]}),o.jsx("p",{className:"stat-detail",children:" "})]})]}),o.jsxs("div",{className:"stat-card info",children:[o.jsx("div",{className:"stat-icon",children:o.jsx(is,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("p",{className:"stat-label",children:" "}),o.jsxs("h2",{className:"stat-value",children:[m.totalEmployees,""]}),o.jsxs("p",{className:"stat-detail",children:[" ",m.onLeave,""]})]})]})]}),o.jsxs("div",{className:"dashboard-content",children:[o.jsxs("div",{className:"dashboard-main",children:[o.jsxs("div",{className:"dashboard-section",children:[o.jsx("div",{className:"section-header",children:o.jsxs("h2",{children:[o.jsx(dP,{size:20}),o.jsx("span",{children:" "})]})}),o.jsxs("div",{className:"chart-container",children:[o.jsxs("div",{className:"chart-legend",children:[o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot blue"}),o.jsx("span",{children:" "})]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot green"}),o.jsx("span",{children:" "})]})]}),o.jsx("div",{className:"bar-chart",children:R.labels.map((w,I)=>o.jsxs("div",{className:"bar-group",children:[o.jsxs("div",{className:"bars",children:[o.jsx("div",{className:"bar blue",style:{height:`${R.leaves[I]/5*100}%`},title:`: ${R.leaves[I]}`}),o.jsx("div",{className:"bar green",style:{height:`${R.approvals[I]/10*100}%`},title:`: ${R.approvals[I]}`})]}),o.jsx("span",{className:"bar-label",children:w})]},w))})]})]}),o.jsxs("div",{className:"dashboard-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsxs("h2",{children:[o.jsx(Un,{size:20}),o.jsx("span",{children:" "})]}),o.jsx("button",{className:"btn-text",children:" "})]}),o.jsx("div",{className:"schedule-list",children:i.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx(Un,{size:48}),o.jsx("p",{children:"  "})]}):i.map(w=>o.jsxs("div",{className:"schedule-item",children:[o.jsxs("div",{className:"schedule-time",children:[o.jsx(Hc,{size:16}),o.jsx("span",{children:w.time||""})]}),o.jsxs("div",{className:"schedule-content",children:[o.jsx("h4",{children:w.title}),w.description&&o.jsx("p",{children:w.description})]}),o.jsxs("div",{className:`schedule-badge ${w.type||"default"}`,children:[w.type==="meeting"&&"",w.type==="deadline"&&"",w.type==="event"&&"",!w.type&&""]})]},w.id))})]})]}),o.jsxs("div",{className:"dashboard-sidebar",children:[o.jsxs("div",{className:"dashboard-section",children:[o.jsx("div",{className:"section-header",children:o.jsxs("h2",{children:[o.jsx(Iy,{size:20}),o.jsx("span",{children:" "})]})}),o.jsx("div",{className:"activity-list",children:x.length===0?o.jsx("div",{className:"empty-state-small",children:o.jsx("p",{children:"  "})}):x.map(w=>o.jsxs("div",{className:"activity-item",children:[y(w.icon),o.jsxs("div",{className:"activity-content",children:[o.jsx("h4",{children:w.title}),o.jsx("p",{children:w.description}),o.jsx("span",{className:"activity-time",children:E(w.time)})]})]},w.id))})]}),o.jsxs("div",{className:"dashboard-section",children:[o.jsx("div",{className:"section-header",children:o.jsxs("h2",{children:[o.jsx(MP,{size:20}),o.jsx("span",{children:" "})]})}),o.jsxs("div",{className:"team-stats-list",children:[o.jsxs("div",{className:"team-stat-item",children:[o.jsx("div",{className:"team-stat-icon blue",children:o.jsx(is,{size:20})}),o.jsxs("div",{className:"team-stat-content",children:[o.jsx("p",{className:"team-stat-label",children:" "}),o.jsxs("h3",{className:"team-stat-value",children:[m.totalEmployees,""]})]})]}),o.jsxs("div",{className:"team-stat-item",children:[o.jsx("div",{className:"team-stat-icon orange",children:o.jsx(Un,{size:20})}),o.jsxs("div",{className:"team-stat-content",children:[o.jsx("p",{className:"team-stat-label",children:" "}),o.jsxs("h3",{className:"team-stat-value",children:[m.onLeave,""]})]})]}),o.jsxs("div",{className:"team-stat-item",children:[o.jsx("div",{className:"team-stat-icon purple",children:o.jsx(Ia,{size:20})}),o.jsxs("div",{className:"team-stat-content",children:[o.jsx("p",{className:"team-stat-label",children:" "}),o.jsxs("h3",{className:"team-stat-value",children:[m.activeProjects,""]})]})]}),o.jsxs("div",{className:"team-stat-item",children:[o.jsx("div",{className:"team-stat-icon green",children:o.jsx(Us,{size:20})}),o.jsxs("div",{className:"team-stat-content",children:[o.jsx("p",{className:"team-stat-label",children:" "}),o.jsxs("h3",{className:"team-stat-value",children:[m.messagesCount,""]})]})]})]})]})]})]})]})}function KP({date:t,currentSchedule:e,onSave:n,onClose:r,userName:s}){const[i,a]=D.useState(e||""),c=["","","","()","()","","","","",""],u=()=>{n(t,i)};return o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"modal-content",onClick:d=>d.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:" "}),o.jsx("button",{className:"modal-close-btn",onClick:r,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"modal-info",children:[o.jsxs("p",{children:[o.jsx("strong",{children:":"})," ",t]}),o.jsxs("p",{children:[o.jsx("strong",{children:":"})," ",s.split("@")[0]]})]}),o.jsx("div",{className:"schedule-type-grid",children:c.map(d=>o.jsx("button",{className:`schedule-type-btn ${i===d?"active":""}`,onClick:()=>a(d),children:d},d))}),o.jsx("div",{className:"modal-notice",children:o.jsx("p",{children:" //    ."})})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"modal-btn cancel-btn",onClick:r,children:""}),o.jsx("button",{className:"modal-btn save-btn",onClick:u,children:""})]})]})})}function GP({year:t,month:e,onSave:n,onClose:r}){const[s,i]=D.useState(""),[a,c]=D.useState(""),u=(x,A)=>new Date(x,A+1,0).getDate(),d=(x,A,R)=>`${x}-${String(A+1).padStart(2,"0")}-${String(R).padStart(2,"0")}`,p=()=>{if(!s){alert(" .");return}if(!a.trim()){alert("  .");return}n(s,a)},m=u(t,e),v=Array.from({length:m},(x,A)=>A+1);return o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:" "}),o.jsx("button",{className:"modal-close-btn",onClick:r,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" "}),o.jsxs("select",{value:s,onChange:x=>i(x.target.value),className:"form-select",children:[o.jsx("option",{value:"",children:" "}),v.map(x=>{const A=d(t,e,x);return o.jsxs("option",{value:A,children:[e+1," ",x,""]},x)})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" "}),o.jsx("input",{type:"text",value:a,onChange:x=>c(x.target.value),placeholder:"  ",className:"form-input",maxLength:50})]}),o.jsx("div",{className:"modal-notice",children:o.jsx("p",{children:"    ."})})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"modal-btn cancel-btn",onClick:r,children:""}),o.jsx("button",{className:"modal-btn save-btn",onClick:p,children:""})]})]})})}const My={"2024-01-01":"","2024-02-09":"","2024-02-10":"","2024-02-11":"","2024-02-12":"","2024-03-01":"","2024-04-10":"","2024-05-05":"","2024-05-06":"","2024-05-15":"","2024-06-06":"","2024-08-15":"","2024-09-16":"","2024-09-17":"","2024-09-18":"","2024-10-03":"","2024-10-09":"","2024-12-25":"","2025-01-01":"","2025-01-28":"","2025-01-29":"","2025-01-30":"","2025-03-01":"","2025-03-03":"","2025-05-05":"","2025-05-06":"","2025-06-06":"","2025-08-15":"","2025-10-03":"","2025-10-05":"","2025-10-06":"","2025-10-07":"","2025-10-08":"","2025-10-09":"","2025-12-25":""},Nr=(t,e,n)=>`${t}-${String(e+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`,Rl=(t,e)=>new Date(t,e+1,0).getDate(),Oy=(t,e)=>new Date(t,e,1).getDay();function QP({employees:t=[]}){var fe;const{user:e,userData:n}=Qt(),[r,s]=D.useState(new Date),[i,a]=D.useState({}),[c,u]=D.useState(null),[d,p]=D.useState([]),[m,v]=D.useState(!1),[x,A]=D.useState(null),[R,P]=D.useState("all"),[j,_]=D.useState("all"),[N,C]=D.useState({}),[b,M]=D.useState(!1),[T,g]=D.useState(null),k=r.getFullYear(),y=r.getMonth();D.useEffect(()=>{e&&(E(),w(),I())},[e,k,y]),D.useEffect(()=>{const G=new Date,re=Nr(G.getFullYear(),G.getMonth(),G.getDate());u(re)},[i]),D.useEffect(()=>{if(c&&i[c]){const re=i[c].filter(ie=>ie.approvalStatus!=="cancelled"&&ie.approvalStatus!=="deletion-pending");p(re)}else c&&p([])},[c,i]);const E=async()=>{try{const G=ke(W,"employees",e.uid),re=await Te(Ne(te(W,"employees"),de("__name__","==",e.uid)));re.empty||A(re.docs[0].data())}catch(G){console.error("   :",G)}},w=async()=>{try{const G=Nr(k,y,1),re=Nr(k,y,Rl(k,y)),ie=Ne(te(W,"schedules"),de("date",">=",G),de("date","<=",re)),ce=await Te(ie),pe={};ce.forEach(ge=>{const ue=ge.data();pe[ue.date]||(pe[ue.date]=[]),pe[ue.date].push({id:ge.id,...ue})}),a(pe)}catch(G){console.error("  :",G)}},I=async()=>{try{const G=Nr(k,y,1),re=Nr(k,y,Rl(k,y)),ie=Ne(te(W,"sharedEvents"),de("date",">=",G),de("date","<=",re)),ce=await Te(ie),pe={};ce.forEach(ge=>{const ue=ge.data();pe[ue.date]||(pe[ue.date]=[]),pe[ue.date].push({id:ge.id,...ue})}),C(pe)}catch(G){console.error("   :",G)}},z=()=>{s(new Date(k,y-1))},le=()=>{s(new Date(k,y+1))},X=G=>{const re=Nr(k,y,G);window.innerWidth<=768?T===re?v(!0):(u(re),g(re)):(u(re),v(!0))},ye=async(G,re)=>{try{const ie=te(W,"schedules"),ce=Ne(ie,de("userId","==",e.uid),de("date","==",G)),pe=await Te(ce),ge=["","()","()","",""].includes(re),ue=ge?x!=null&&x.isApprover?"approved":"pending":null;if(pe.empty){const Fe={userId:e.uid,userName:e.displayName||e.email,date:G,type:re,createdAt:Le()};ge&&(Fe.approvalStatus=ue),await cn(ie,Fe)}else{const Fe=pe.docs[0].id,be={type:re,updatedAt:Le()};ge?be.approvalStatus=ue:be.approvalStatus=null,await Ge(ke(W,"schedules",Fe),be)}alert(" ."),v(!1),w()}catch(ie){console.error("  :",ie),alert("  .")}},B=async(G,re,ie)=>{if(confirm("  ?"))try{["","()","()","",""].includes(ie)?(await Ge(ke(W,"schedules",G),{approvalStatus:"deletion-pending",cancelledAt:Le()}),alert("  .")):(await ks(ke(W,"schedules",G)),alert(" .")),w()}catch(ce){console.error("  :",ce),alert(" : "+ce.message)}},Y=async(G,re)=>{try{await cn(te(W,"sharedEvents"),{date:G,title:re,createdBy:e.uid,createdByName:e.displayName||e.email,createdAt:Le()}),alert(" ."),M(!1),I()}catch(ie){console.error("  :",ie),alert(" : "+ie.message)}},F=async G=>{if(confirm("  ?"))try{await ks(ke(W,"sharedEvents",G)),alert(" ."),I()}catch(re){console.error("  :",re),alert(" : "+re.message)}},$=()=>{const G=Rl(k,y),re=Oy(k,y),ie=[];let ce=[];for(let ue=0;ue<re;ue++)ce.push(o.jsx("td",{className:"other-month"},`empty-${ue}`));const pe=new Date,ge=pe.getFullYear()===k&&pe.getMonth()===y;for(let ue=1;ue<=G;ue++){const Fe=Nr(k,y,ue);let Be=(i[Fe]||[]).filter(oe=>oe.approvalStatus!=="cancelled"&&oe.approvalStatus!=="deletion-pending");R!=="all"&&(Be=Be.filter(oe=>oe.userId===R)),j!=="all"&&(Be=Be.filter(oe=>oe.type===j));const En=ge&&pe.getDate()===ue,Yt=My[Fe],Tn=new Date(k,y,ue).getDay(),H=Tn===0,Ie=Tn===6;ce.push(o.jsxs("td",{className:`
            ${En?"today":""} 
            ${Yt?"holiday":""} 
            ${H?"sunday":""} 
            ${Ie?"saturday":""}
          `,onClick:()=>X(ue),children:[o.jsx("div",{className:"date-number",children:ue}),Yt&&o.jsx("div",{className:"holiday-name",children:Yt}),N[Fe]&&N[Fe].map((oe,Ae)=>o.jsxs("div",{className:"schedule-item schedule-shared",onClick:$e=>$e.stopPropagation(),children:[o.jsxs("span",{children:[" ",oe.title]}),((x==null?void 0:x.isSubAdmin)||(x==null?void 0:x.isApprover))&&o.jsx("button",{className:"delete-schedule-btn",onClick:$e=>{$e.stopPropagation(),F(oe.id)},children:""})]},`shared-${Ae}`)),Be.map((oe,Ae)=>{const $e=["","()","()","",""].includes(oe.type),qe=oe.approvalStatus==="approved"?" ()":oe.approvalStatus==="rejected"?" ()":oe.approvalStatus==="pending"?" ()":oe.approvalStatus==="deletion-pending"?" ()":oe.approvalStatus==="cancelled"?" ()":"";oe.date.slice(0,7);const Ke=`${k}-${String(y+1).padStart(2,"0")}`,Ln=`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`;return o.jsxs("div",{className:`schedule-item schedule-${oe.type.replace(/[()]/g,"")}`,onClick:tt=>tt.stopPropagation(),children:[o.jsxs("span",{children:[oe.userName.split("@")[0]," - ",oe.type,$e?qe:""]}),oe.userId===e.uid&&Ke>=Ln&&o.jsx("button",{className:"delete-schedule-btn",onClick:tt=>{tt.stopPropagation(),B(oe.id,oe.date,oe.type)},children:""})]},Ae)})]},ue)),ce.length===7&&(ie.push(o.jsx("tr",{children:ce},ie.length)),ce=[])}if(ce.length>0){for(;ce.length<7;)ce.push(o.jsx("td",{className:"other-month"},`empty-end-${ce.length}`));ie.push(o.jsx("tr",{children:ce},ie.length))}return ie},q=()=>{const G=Rl(k,y),re=Oy(k,y),ie=[],ce=new Date,pe=ce.getFullYear()===k&&ce.getMonth()===y;for(let ge=0;ge<re;ge++)ie.push(o.jsx("div",{className:"mobile-date-cell other-month",children:o.jsx("span",{className:"mobile-date-number"})},`empty-${ge}`));for(let ge=1;ge<=G;ge++){const ue=Nr(k,y,ge);let be=(i[ue]||[]).filter(Ae=>Ae.approvalStatus!=="cancelled"&&Ae.approvalStatus!=="deletion-pending");R!=="all"&&(be=be.filter(Ae=>Ae.userId===R)),j!=="all"&&(be=be.filter(Ae=>Ae.type===j));const Be=N[ue]||[],En=pe&&ce.getDate()===ge,Yt=My[ue],Tn=new Date(k,y,ge).getDay(),H=Tn===0,Ie=Tn===6;let oe="mobile-date-cell";En&&(oe+=" today"),Yt&&(oe+=" holiday"),H&&(oe+=" sunday"),Ie&&(oe+=" saturday"),ie.push(o.jsxs("div",{className:oe,onClick:()=>X(ge),children:[o.jsx("span",{className:"mobile-date-number",children:ge}),Yt&&o.jsx("div",{className:"mobile-holiday-name",children:Yt}),o.jsxs("div",{className:"mobile-schedule-dots",children:[Be.map((Ae,$e)=>o.jsx("div",{className:"mobile-schedule-dot shared"},`shared-${$e}`)),be.slice(0,3).map((Ae,$e)=>{const qe=["","()","()","",""].includes(Ae.type),Ke=Ae.type===""||Ae.type==="";let Ln="mobile-schedule-dot";return qe?Ln+=" leave":Ke&&(Ln+=" remote"),o.jsx("div",{className:Ln},$e)}),Be.length+be.length>3&&o.jsx("span",{style:{fontSize:"8px",color:"#999"},children:"+"})]})]},ge))}return ie},Z=["1","2","3","4","5","6","7","8","9","10","11","12"];return o.jsxs("div",{className:"calendar-container",children:[o.jsxs("div",{className:"calendar-header",children:[o.jsxs("h2",{children:[k," ",Z[y]]}),o.jsxs("div",{className:"calendar-nav",children:[o.jsx("button",{className:"nav-btn shared-event-btn",onClick:()=>M(!0),children:""}),o.jsx("button",{className:"nav-btn",onClick:z,children:""}),o.jsx("button",{className:"nav-btn",onClick:le,children:""})]})]}),o.jsxs("div",{className:"filter-bar",children:[o.jsxs("select",{className:"filter-select",value:R,onChange:G=>P(G.target.value),children:[o.jsx("option",{value:"all",children:" "}),t.map(G=>o.jsx("option",{value:G.id,children:G.name},G.id))]}),o.jsxs("select",{className:"filter-select",value:j,onChange:G=>_(G.target.value),children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"()",children:"()"}),o.jsx("option",{value:"()",children:"()"}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsx("div",{className:"calendar desktop-calendar",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"sunday",children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{className:"saturday",children:""})]})}),o.jsx("tbody",{children:$()})]})}),o.jsxs("div",{className:"calendar mobile-calendar",children:[o.jsxs("div",{className:"mobile-weekdays",children:[o.jsx("div",{className:"mobile-weekday sunday",children:""}),o.jsx("div",{className:"mobile-weekday",children:""}),o.jsx("div",{className:"mobile-weekday",children:""}),o.jsx("div",{className:"mobile-weekday",children:""}),o.jsx("div",{className:"mobile-weekday",children:""}),o.jsx("div",{className:"mobile-weekday",children:""}),o.jsx("div",{className:"mobile-weekday saturday",children:""})]}),o.jsx("div",{className:"mobile-calendar-grid",children:q()})]}),c&&d.length>0&&o.jsxs("div",{className:"daily-schedules",children:[o.jsxs("h3",{children:[c," "]}),o.jsx("div",{className:"daily-schedule-list",children:d.map((G,re)=>o.jsxs("div",{className:`daily-schedule-card ${G.type.replace(/[()]/g,"")}`,children:[o.jsx("div",{className:"name",children:G.userName.split("@")[0]}),o.jsx("div",{className:"type",children:G.type})]},re))})]}),m&&c&&o.jsx(KP,{date:c,currentSchedule:(fe=d.find(G=>G.userId===e.uid))==null?void 0:fe.type,onSave:ye,onClose:()=>v(!1),userName:e.displayName||e.email}),b&&o.jsx(GP,{year:k,month:y,onSave:Y,onClose:()=>M(!1)})]})}function YP({onClose:t,onSubmit:e,remainingLeave:n}){const[r,s]=D.useState(""),[i,a]=D.useState(""),[c,u]=D.useState(""),[d,p]=D.useState(""),[m,v]=D.useState([]),[x,A]=D.useState(!1),R=_=>{const C=Array.from(_.target.files).filter(b=>b.size>5242880?(alert(`${b.name}() 5MB .`),!1):!0);v([...m,...C])},P=_=>{v(m.filter((N,C)=>C!==_))},j=()=>{if(!r||!i){alert("   .");return}e({startDate:r,endDate:i,leaveType:c,note:d,files:m})};return o.jsx("div",{className:"modal-overlay",onClick:t,children:o.jsxs("div",{className:"modal-content leave-register-modal",onClick:_=>_.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:" "}),o.jsx("button",{className:"modal-close-btn",onClick:t,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsx("div",{className:"remaining-leave-info",children:o.jsxs("span",{children:[" : ",o.jsxs("strong",{children:[n,""]})]})}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:""}),o.jsx("input",{type:"date",value:r,onChange:_=>s(_.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:""}),o.jsx("input",{type:"date",value:i,onChange:_=>a(_.target.value),className:"form-input"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:""}),o.jsxs("select",{value:c,onChange:_=>u(_.target.value),className:"form-select",children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"()",children:"() - 0.5"}),o.jsx("option",{value:"()",children:"() - 0.5"}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" ()"}),o.jsx("textarea",{value:d,onChange:_=>p(_.target.value),placeholder:"  ",className:"form-textarea",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"  () -   "}),o.jsxs("div",{className:"file-upload-area",onClick:()=>document.getElementById("leave-file-input").click(),children:[o.jsx("input",{id:"leave-file-input",type:"file",multiple:!0,onChange:R,style:{display:"none"},accept:"image/*,.pdf,.doc,.docx"}),o.jsx("div",{className:"file-upload-icon",children:""}),o.jsx("div",{className:"file-upload-text",children:"   ( 5MB)"})]}),m.length>0&&o.jsx("div",{className:"file-list",children:m.map((_,N)=>o.jsxs("div",{className:"file-item",children:[o.jsxs("span",{className:"file-name",children:[" ",_.name]}),o.jsxs("span",{className:"file-size",children:[(_.size/1024).toFixed(1),"KB"]}),o.jsx("button",{className:"file-remove-btn",onClick:()=>P(N),children:""})]},N))})]}),o.jsxs("div",{className:"modal-notice",children:[o.jsx("p",{children:" (,)  ."}),o.jsx("p",{children:"  0.5 ."})]}),x&&o.jsx("div",{className:"uploading-message",children:"  ..."})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"modal-btn cancel-btn",onClick:()=>{v([]),p(""),t()},children:""}),o.jsx("button",{className:"modal-btn save-btn",onClick:j,disabled:x,children:""})]})]})})}function XP({currentPage:t,totalPages:e,onPageChange:n}){if(e<=1)return null;const r=[],s=5;let i=Math.max(1,t-Math.floor(s/2)),a=Math.min(e,i+s-1);a-i<s-1&&(i=Math.max(1,a-s+1));for(let c=i;c<=a;c++)r.push(c);return o.jsxs("div",{className:"pagination",children:[o.jsx("button",{className:"pagination-btn",onClick:()=>n(t-1),disabled:t===1,children:""}),i>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"pagination-btn",onClick:()=>n(1),children:"1"}),i>2&&o.jsx("span",{className:"pagination-ellipsis",children:"..."})]}),r.map(c=>o.jsx("button",{className:`pagination-btn ${c===t?"active":""}`,onClick:()=>n(c),children:c},c)),a<e&&o.jsxs(o.Fragment,{children:[a<e-1&&o.jsx("span",{className:"pagination-ellipsis",children:"..."}),o.jsx("button",{className:"pagination-btn",onClick:()=>n(e),children:e})]}),o.jsx("button",{className:"pagination-btn",onClick:()=>n(t+1),disabled:t===e,children:""})]})}function JP(){const{user:t,userData:e}=Qt(),[n,r]=D.useState(null),[s,i]=D.useState([]),[a,c]=D.useState(!1),[u,d]=D.useState(1),[p,m]=D.useState(!0),v=10;D.useEffect(()=>{t&&(x(),A())},[t]);const x=async()=>{try{const y=Ne(te(W,"employees"),de("__name__","==",t.uid)),E=await Te(y);E.empty||r(E.docs[0].data()),m(!1)}catch(y){console.error("   :",y),m(!1)}},A=async()=>{try{const y=Ne(te(W,"leaveUsage"),de("userId","==",t.uid)),E=await Te(y),w=[];E.forEach(X=>{w.push({id:X.id,...X.data()})});const I={},z=[];w.forEach(X=>{X.groupId?I[X.groupId]?I[X.groupId].ids.push(X.id):I[X.groupId]={id:X.groupId,ids:[X.id],userId:X.userId,startDate:X.startDate||X.date,endDate:X.endDate||X.date,date:X.startDate||X.date,type:X.type,amount:X.amount,totalDays:X.totalDays||1,note:X.note,approvalStatus:X.approvalStatus,createdAt:X.createdAt,groupId:X.groupId,isGrouped:!0}:z.push(X)});const le=[...Object.values(I),...z];le.sort((X,ye)=>(ye.startDate||ye.date).localeCompare(X.startDate||X.date)),i(le)}catch(y){console.error("   :",y)}},R=y=>{if(!y)return 0;const E=new Date(y),w=new Date,I=w.getFullYear()-E.getFullYear();if(I<1){const z=(w.getFullYear()-E.getFullYear())*12+(w.getMonth()-E.getMonth());return Math.floor(z)}return 15+Math.min(I-1,10)},P=()=>s.filter(y=>y.approvalStatus==="approved"||y.approvalStatus==="pending").reduce((y,E)=>y+E.amount,0),j=async(y,E)=>{if(E.length===0)return[];const w=[];try{for(const I of E){const z=tP(aP,`leave-attachments/${t.uid}/${y}/${I.name}`);await ZR(z,I);const le=await eP(z);w.push({name:I.name,url:le,size:I.size})}return w}catch(I){return console.error("  :",I),alert("    ."),[]}},_=async y=>{try{const{startDate:E,endDate:w,leaveType:I,note:z,files:le}=y,X=new Date(E),ye=new Date(w);if(X>ye){alert("   .");return}const B=n!=null&&n.isApprover?"approved":"pending";let Y=0;if(I===""?Y=1:I==="()"||I==="()"?Y=.5:(I===""||I==="")&&(Y=0),I!==""&&I!==""){let G=0;const re=new Date(X);for(;re<=ye;){const ge=re.getDay();ge!==0&&ge!==6&&(G+=Y),re.setDate(re.getDate()+1)}const ie=R(n==null?void 0:n.joinDate),ce=P(),pe=ie-ce;if(pe<=0){alert(`   .

 : ${ie}
 : ${ce}
 : ${pe}`);return}if(G>pe){alert(`   .

 : ${G}
  : ${pe}

${pe}  .`);return}}const F=`${t.uid}_${Date.now()}`;let $=0;const q=new Date(X);for(;q<=ye;){const G=q.getDay();G!==0&&G!==6&&$++,q.setDate(q.getDate()+1)}const Z=new Date(X);for(;Z<=ye;){const G=Z.toISOString().split("T")[0],re=Z.getDay();if(re!==0&&re!==6){await cn(te(W,"leaveUsage"),{userId:t.uid,date:G,startDate:E,endDate:w,type:I,amount:Y,totalDays:$,groupId:F,approvalStatus:B,createdAt:Le()});const ie=Ne(te(W,"schedules"),de("userId","==",t.uid),de("date","==",G)),ce=await Te(ie);if(ce.empty)await cn(te(W,"schedules"),{userId:t.uid,userName:t.displayName||t.email,date:G,type:I,groupId:F,approvalStatus:B,createdAt:Le()});else{const pe=ce.docs[0].id;await Ge(ke(W,"schedules",pe),{type:I,groupId:F,approvalStatus:B,updatedAt:Le()})}}Z.setDate(Z.getDate()+1)}if(le&&le.length>0){const G=await j(F,le),re=Ne(te(W,"leaveUsage"),de("groupId","==",F),Ko(1)),ie=await Te(re);ie.empty||await Ge(ke(W,"leaveUsage",ie.docs[0].id),{attachments:G,note:z||""})}const fe=n!=null&&n.isApprover?"  .":"  .  .";alert(fe),c(!1),A()}catch(E){console.error("  :",E),alert("    .")}},N=async(y,E,w,I,z)=>{try{const le=n==null?void 0:n.isApprover,X=z?y.ids:[y],ye=!!z;if(I==="approved")if(le){const B=ye?`${y.startDate} ~ ${y.endDate} (${y.totalDays})   ?`:"  ?";if(!confirm(B))return;for(const $ of X)await Ge(ke(W,"leaveUsage",$),{approvalStatus:"cancelled",cancelledAt:Le()});const Y=z?Ne(te(W,"schedules"),de("userId","==",t.uid),de("groupId","==",z)):Ne(te(W,"schedules"),de("userId","==",t.uid),de("date","==",E),de("type","==",w));(await Te(Y)).forEach(async $=>{await Ge(ke(W,"schedules",$.id),{approvalStatus:"cancelled",cancelledAt:Le()})}),alert(" .")}else{const B=ye?`  . ${y.startDate} ~ ${y.endDate} (${y.totalDays})    ?`:"  .   ?";if(!confirm(B))return;for(const $ of X)await Ge(ke(W,"leaveUsage",$),{approvalStatus:"deletion-pending",deletionRequestedAt:Le()});const Y=z?Ne(te(W,"schedules"),de("userId","==",t.uid),de("groupId","==",z)):Ne(te(W,"schedules"),de("userId","==",t.uid),de("date","==",E),de("type","==",w));(await Te(Y)).forEach(async $=>{await Ge(ke(W,"schedules",$.id),{approvalStatus:"deletion-pending",deletionRequestedAt:Le()})}),alert("   .")}else if(I==="pending"){const B=ye?`${y.startDate} ~ ${y.endDate} (${y.totalDays})    ?`:"   ?";if(!confirm(B))return;for(const $ of X)await Ge(ke(W,"leaveUsage",$),{approvalStatus:"cancelled",cancelledAt:Le()});const Y=z?Ne(te(W,"schedules"),de("userId","==",t.uid),de("groupId","==",z)):Ne(te(W,"schedules"),de("userId","==",t.uid),de("date","==",E),de("type","==",w));(await Te(Y)).forEach(async $=>{await Ge(ke(W,"schedules",$.id),{approvalStatus:"cancelled",cancelledAt:Le()})}),alert("  .")}else{const B=ye?`${y.startDate} ~ ${y.endDate} (${y.totalDays})   ?`:"   ?";if(!confirm(B))return;for(const Y of X)await Ge(ke(W,"leaveUsage",Y),{approvalStatus:"cancelled",cancelledAt:Le()});alert(".")}A(),x()}catch(le){console.error(" :",le),alert(" : "+le.message)}};if(p)return o.jsx("div",{className:"annual-leave-container",children:"   ..."});if(!n)return o.jsx("div",{className:"annual-leave-container",children:"    ."});const C=n.customTotalLeave||R(n.joinDate),b=P(),M=C-b,T=(u-1)*v,g=T+v,k=s.slice(T,g);return o.jsxs("div",{className:"annual-leave-container",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:" "}),o.jsx("button",{className:"register-btn",onClick:()=>c(!0),children:" "})]}),o.jsxs("div",{className:"annual-leave-info",children:[o.jsxs("div",{className:"info-card",children:[o.jsx("h4",{children:""}),o.jsx("div",{className:"value",children:n.joinDate})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("h4",{children:" "}),o.jsxs("div",{className:"value",children:[C,""]})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("h4",{children:" "}),o.jsxs("div",{className:"value",children:[b,""]})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("h4",{children:" "}),o.jsxs("div",{className:"value remaining",children:[M,""]})]})]}),o.jsxs("div",{className:"leave-history",children:[o.jsx("h3",{children:"  "}),s.length===0?o.jsx("div",{className:"empty-state",children:o.jsx("p",{children:"   ."})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"table-wrapper",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:" "}),o.jsx("th",{children:""})]})}),o.jsx("tbody",{children:k.map(y=>o.jsxs("tr",{children:[o.jsx("td",{children:y.isGrouped&&y.startDate!==y.endDate?`${y.startDate} ~ ${y.endDate}`:y.startDate||y.date}),o.jsx("td",{children:y.type}),o.jsx("td",{children:y.isGrouped&&y.totalDays>1?`${y.totalDays}`:y.amount>0?`${y.amount}`:"-"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${y.approvalStatus}`,children:y.approvalStatus==="approved"?"":y.approvalStatus==="rejected"?"":y.approvalStatus==="deletion-pending"?"":y.approvalStatus==="cancelled"?"":""})}),o.jsx("td",{children:y.approvalStatus!=="deletion-pending"&&y.approvalStatus!=="cancelled"&&o.jsx("button",{className:"delete-btn",onClick:()=>N(y.isGrouped?y:y.id,y.date,y.type,y.approvalStatus,y.groupId),children:""})})]},y.id))})]})}),s.length>v&&o.jsx(XP,{currentPage:u,totalPages:Math.ceil(s.length/v),onPageChange:d})]})]}),a&&o.jsx(YP,{onClose:()=>c(!1),onSubmit:_,remainingLeave:M})]})}function ZP(){const{user:t}=Qt(),[e,n]=D.useState([]),[r,s]=D.useState([]),[i,a]=D.useState(!0);D.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{const x=Ne(te(W,"employees"),de("approver","==",t.uid)),A=await Te(x),R=[];A.forEach(P=>{R.push({id:P.id,...P.data()})}),s(R),R.length>0?u(R.map(P=>P.id)):a(!1)}catch(x){console.error("    :",x),a(!1)}},u=async x=>{try{const A=Ne(te(W,"leaveUsage"),de("approvalStatus","==","pending")),R=await Te(A),P=Ne(te(W,"leaveUsage"),de("approvalStatus","==","deletion-pending")),j=await Te(P),_=[];for(const N of R.docs){const C=N.data();if(x.includes(C.userId)){const b=await Te(Ne(te(W,"employees"),de("__name__","==",C.userId))),M=b.empty?C.userId:b.docs[0].data().name;_.push({id:N.id,...C,userName:M,requestType:"approval"})}}for(const N of j.docs){const C=N.data();if(x.includes(C.userId)){const b=await Te(Ne(te(W,"employees"),de("__name__","==",C.userId))),M=b.empty?C.userId:b.docs[0].data().name;_.push({id:N.id,...C,userName:M,requestType:"deletion"})}}_.sort((N,C)=>(C.date||"").localeCompare(N.date||"")),n(_),a(!1)}catch(A){console.error("    :",A),a(!1)}},d=async(x,A,R,P)=>{try{if(!confirm(`  ${P==="approved"?"":""}?`))return;await Ge(ke(W,"leaveUsage",x),{approvalStatus:P,approvedBy:t.uid,approvedAt:Le()});const j=Ne(te(W,"schedules"),de("userId","==",A),de("date","==",R));(await Te(j)).forEach(async N=>{await Ge(ke(W,"schedules",N.id),{approvalStatus:P,approvedBy:t.uid,approvedAt:Le()})}),await cn(te(W,"notifications"),{userId:A,title:P==="approved"?" ":" ",message:`${R}   ${P==="approved"?"":""}.`,type:"leave-result",read:!1,createdAt:Le()}),alert(P==="approved"?".":"."),c()}catch(j){console.error(" :",j),alert(" : "+j.message)}},p=async(x,A,R)=>{try{if(!confirm("   ?"))return;await Ge(ke(W,"leaveUsage",x),{approvalStatus:"cancelled",cancelledAt:Le()});const P=Ne(te(W,"schedules"),de("userId","==",A),de("date","==",R));(await Te(P)).forEach(async _=>{await Ge(ke(W,"schedules",_.id),{approvalStatus:"cancelled",cancelledAt:Le()})}),await cn(te(W,"notifications"),{userId:A,title:"  ",message:`${R}   .`,type:"leave-cancellation",read:!1,createdAt:Le()}),alert(" ."),c()}catch(P){console.error(" :",P),alert(" : "+P.message)}},m=async(x,A,R)=>{try{if(!confirm("   ?"))return;await Ge(ke(W,"leaveUsage",x),{approvalStatus:"approved",deletionRejectedAt:Le()});const P=Ne(te(W,"schedules"),de("userId","==",A),de("date","==",R));(await Te(P)).forEach(async _=>{await Ge(ke(W,"schedules",_.id),{approvalStatus:"approved",deletionRejectedAt:Le()})}),await cn(te(W,"notifications"),{userId:A,title:"  ",message:`${R}   .`,type:"leave-cancellation-rejected",read:!1,createdAt:Le()}),alert(" ."),c()}catch(P){console.error(" :",P),alert(" : "+P.message)}},v=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"-";return i?o.jsx("div",{className:"approval-container",children:" ..."}):o.jsxs("div",{className:"approval-container",children:[o.jsx("div",{className:"section-header",children:o.jsx("h2",{children:"  "})}),o.jsxs("div",{className:"employee-section",children:[o.jsx("h3",{children:"  "}),r.length>0?o.jsx("div",{className:"employee-tags",children:r.map(x=>o.jsx("span",{className:"employee-tag",children:x.name},x.id))}):o.jsx("p",{className:"no-employees",children:"  .  ."})]}),o.jsx("h3",{className:"list-title",children:"  "}),e.length>0?o.jsx("div",{className:"approval-list",children:e.map(x=>o.jsx("div",{className:"approval-card",children:o.jsxs("div",{className:"approval-card-content",children:[o.jsxs("div",{className:"info-block",children:[o.jsx("div",{className:"info-label",children:""}),o.jsx("div",{className:"info-value employee-name",children:x.userName})]}),o.jsxs("div",{className:"info-block",children:[o.jsx("div",{className:"info-label",children:x.requestType==="deletion"?"  ":" "}),o.jsxs("div",{className:"info-value",children:[x.requestType==="deletion"&&o.jsx("span",{className:"deletion-badge",children:" "}),x.type,o.jsxs("span",{className:"leave-amount",children:["(",x.amount>0?`${x.amount}`:"",")"]})]}),o.jsxs("div",{className:"leave-date",children:[" ",x.date]})]}),o.jsxs("div",{className:"info-block",children:[o.jsx("div",{className:"info-label",children:""}),o.jsx("div",{className:"info-value request-date",children:v(x.createdAt)})]}),o.jsx("div",{className:"approval-buttons",children:x.requestType==="deletion"?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn approve-btn",onClick:()=>p(x.id,x.userId,x.date),children:"  "}),o.jsx("button",{className:"btn reject-btn",onClick:()=>m(x.id,x.userId,x.date),children:"  "})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn approve-btn",onClick:()=>d(x.id,x.userId,x.date,"approved"),children:" "}),o.jsx("button",{className:"btn reject-btn",onClick:()=>d(x.id,x.userId,x.date,"rejected"),children:" "})]})})]})},x.id))}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:""}),o.jsx("div",{className:"empty-text",children:"    ."})]})]})}function eb(){const{isPTScheduleEditor:t}=Qt(),[e,n]=D.useState(new Date),[r,s]=D.useState([]),[i,a]=D.useState(!1),[c,u]=D.useState(null),[d,p]=D.useState({}),[m,v]=D.useState([]),[x,A]=D.useState([]),R=["12:00","13:00","14:00","15:00","16:00"],P=["","","","",""];D.useEffect(()=>{j(),C()},[e]);const j=async()=>{try{const $=(await Te(te(W,"employees"))).docs.map(q=>({id:q.id,...q.data()}));A($)}catch(F){console.error("   :",F)}},_=(F,$)=>{const q=[],Z=new Date(F,$,1),fe=new Date(F,$+1,0);let G=new Date(Z);const re=Z.getDay();re===0?G.setDate(G.getDate()-6):re!==1&&G.setDate(G.getDate()-(re-1));let ie=1,ce=new Date(G);for(;ce<=fe;){const pe=[];for(let ue=0;ue<5;ue++){const Fe=new Date(ce);Fe.setDate(ce.getDate()+ue),pe.push({date:new Date(Fe),isCurrentMonth:Fe.getMonth()===$})}if(pe.some(ue=>ue.isCurrentMonth)){const ue=pe.filter(Be=>Be.isCurrentMonth).map(Be=>Be.date),Fe=ue[0],be=ue[ue.length-1];q.push({weekNumber:ie,startDate:new Date(Fe),endDate:new Date(be),dates:pe}),ie++}ce.setDate(ce.getDate()+7)}return q},N=F=>{const $=F.getFullYear(),q=String(F.getMonth()+1).padStart(2,"0"),Z=String(F.getDate()).padStart(2,"0");return`${$}-${q}-${Z}`},C=async()=>{a(!0);try{const F=e.getFullYear(),$=e.getMonth(),q=_(F,$),Z=`${F}-${String($+1).padStart(2,"0")}`,fe=ke(W,"ptSchedules",Z),G=await Uc(fe),re=G.exists()?G.data():{},ie=q.map(ce=>{const pe=`week${ce.weekNumber}`,ge=re[pe]||{},ue=ge.timeSlots||R,Fe=ge.slots||{};return{...ce,timeSlots:ue,slots:Fe}});s(ie)}catch(F){console.error("  :",F)}a(!1)},b=F=>{const $=r.find(q=>q.weekNumber===F);if($){u(F);const q={};Object.keys($.slots).forEach(Z=>{const fe=$.slots[Z];typeof fe=="string"?q[Z]={name:fe,cancelled:!1}:q[Z]=fe}),p(q),v([...$.timeSlots])}},M=()=>{u(null),p({}),v([])},T=async F=>{try{const $=e.getFullYear(),q=e.getMonth(),Z=`${$}-${String(q+1).padStart(2,"0")}`,fe=`week${F}`,G={};Object.keys(d).forEach(pe=>{const ge=d[pe],ue=ge.name||"";ue&&ue!==""&&ue!=="-"&&(G[pe]={name:ue,cancelled:ge.cancelled||!1})});const re=ke(W,"ptSchedules",Z),ie=await Uc(re),ce=ie.exists()?ie.data():{};ce[fe]={timeSlots:m,slots:G},await zc(re,ce),alert("."),u(null),p({}),v([]),C()}catch($){console.error(" :",$),alert(" : "+$.message)}},g=(F,$)=>{p(q=>({...q,[F]:{name:$,cancelled:!1}}))},k=F=>{p($=>{const q=$[F]||{name:"",cancelled:!1};return{...$,[F]:{...q,cancelled:!0}}})},y=(F,$)=>{$===""?p(q=>{const Z={...q};return delete Z[F],Z}):$&&p(q=>({...q,[F]:{name:$,cancelled:!1}}))},E=()=>{const F=prompt("   (: 17:00, 09:30)");if(F){if(!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(F)){alert(`   .
: 17:00, 09:30, 14:15`);return}if(m.includes(F)){alert("  .");return}v($=>[...$,F].sort())}},w=F=>{if(!confirm(`${F}  ?
    .`))return;v(q=>q.filter(Z=>Z!==F));const $={...d};P.forEach(q=>{delete $[`${q}-${F}`]}),p($)},I=(F,$)=>{if(!$)return;if(!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test($)){alert("    (: 17:00)");return}v(Z=>Z.map(fe=>fe===F?$:fe));const q={...d};P.forEach(Z=>{const fe=`${Z}-${F}`,G=`${Z}-${$}`;q[fe]&&(q[G]=q[fe],delete q[fe])}),p(q)},z=()=>r.map(F=>{let $=0;return Object.values(F.slots).forEach(q=>{const Z=typeof q=="string"?{name:q,cancelled:!1}:q;Z.name&&!Z.cancelled&&$++}),{week:F,count:$}}),le=()=>{n(F=>{const $=new Date(F);return $.setMonth(F.getMonth()-1),$}),u(null),p({}),v([])},X=()=>{n(F=>{const $=new Date(F);return $.setMonth(F.getMonth()+1),$}),u(null),p({}),v([])},ye=()=>{n(new Date),u(null),p({}),v([])},B=z(),Y=B.reduce((F,$)=>F+$.count,0);return o.jsxs("div",{className:"pt-schedule-container",children:[o.jsxs("div",{className:"pt-schedule-header",children:[o.jsx("h2",{children:"PT "}),o.jsxs("div",{className:"calendar-nav",children:[o.jsx("button",{className:"nav-btn",onClick:le,children:" "}),o.jsx("button",{className:"nav-btn",onClick:ye,children:""}),o.jsx("button",{className:"nav-btn",onClick:X,children:" "})]})]}),o.jsxs("div",{className:"pt-schedule-title",children:[e.getFullYear()," ",e.getMonth()+1," PT "]}),i?o.jsx("div",{className:"loading-state",children:" ..."}):r.length===0?o.jsx("div",{className:"empty-state",children:"    ."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"weeks-container",children:r.map(F=>{const $=c===F.weekNumber,q=$?d:F.slots,Z=$?m:F.timeSlots;return o.jsxs("div",{className:"week-card",children:[o.jsxs("div",{className:"week-header",children:[o.jsxs("div",{children:[o.jsxs("h3",{children:[" ",F.weekNumber,""]}),o.jsxs("p",{className:"week-date",children:[N(F.startDate)," ~ ",N(F.endDate)]})]}),t&&o.jsx("div",{className:"week-actions",children:$?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn-add-time",onClick:E,children:"+  "}),o.jsx("button",{className:"btn-save",onClick:()=>T(F.weekNumber),children:""}),o.jsx("button",{className:"btn-cancel",onClick:M,children:""})]}):o.jsx("button",{className:"btn-edit",onClick:()=>b(F.weekNumber),children:""})})]}),o.jsx("div",{className:"schedule-table-wrapper",children:o.jsxs("table",{className:"schedule-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:""}),F.dates.map((fe,G)=>o.jsxs("th",{className:fe.isCurrentMonth?"":"other-month",children:[P[G],o.jsx("br",{}),o.jsx("span",{className:"date-number",children:fe.date.getDate()})]},G))]})}),o.jsx("tbody",{children:Z.map(fe=>o.jsxs("tr",{children:[o.jsx("td",{className:"time-cell",children:$?o.jsxs("div",{className:"time-edit",children:[o.jsx("input",{type:"text",value:fe,onChange:G=>I(fe,G.target.value),className:"time-input"}),o.jsx("button",{onClick:()=>w(fe),className:"time-delete-btn",children:""})]}):fe}),P.map((G,re)=>{const ie=`${G}-${fe}`,ce=q==null?void 0:q[ie],pe=typeof ce=="string"?ce:(ce==null?void 0:ce.name)||"",ge=(ce==null?void 0:ce.cancelled)||!1,ue=F.dates[re],Fe=ue&&ue.isCurrentMonth;return o.jsx("td",{className:`slot-cell ${Fe?"":"other-month"}`,children:Fe?$?ge?o.jsxs("div",{className:"slot-cancelled",children:[o.jsx("span",{className:"cancelled-name",children:pe}),o.jsxs("select",{value:"",onChange:be=>y(ie,be.target.value),className:"slot-select",children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",className:"delete-option",children:" "}),x.map(be=>o.jsx("option",{value:be.name,children:be.name},be.id))]})]}):pe?o.jsxs("div",{className:"slot-filled",children:[o.jsx("span",{children:pe}),o.jsx("button",{onClick:()=>k(ie),className:"slot-cancel-btn",children:""})]}):o.jsxs("select",{value:"",onChange:be=>g(ie,be.target.value),className:"slot-select",children:[o.jsx("option",{value:"",children:""}),x.map(be=>o.jsx("option",{value:be.name,children:be.name},be.id))]}):o.jsx("span",{className:`slot-display ${ge?"cancelled":""}`,children:pe||"-"}):o.jsx("span",{className:"disabled",children:"-"})},ie)})]},fe))})]})})]},F.weekNumber)})}),o.jsxs("div",{className:"monthly-stats",children:[o.jsxs("h3",{children:[e.getFullYear()," ",e.getMonth()+1," PT  "]}),o.jsxs("table",{className:"stats-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:"PT "})]})}),o.jsxs("tbody",{children:[B.map(({week:F,count:$})=>o.jsxs("tr",{children:[o.jsxs("td",{children:[F.weekNumber,""]}),o.jsxs("td",{children:[N(F.startDate)," ~ ",N(F.endDate)]}),o.jsxs("td",{className:"count-cell",children:[$,""]})]},F.weekNumber)),o.jsxs("tr",{className:"total-row",children:[o.jsx("td",{colSpan:"2",children:""}),o.jsxs("td",{className:"count-cell",children:[Y,""]})]})]})]})]})]})]})}function tb(){const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState(""),[a,c]=D.useState("grid"),[u,d]=D.useState(!0);D.useEffect(()=>{p()},[]),D.useEffect(()=>{m()},[s,t]);const p=async()=>{d(!0);try{const P=(await Te(te(W,"employees"))).docs.map(j=>({id:j.id,...j.data()}));P.sort((j,_)=>{if(j.department!==_.department)return(j.department||"").localeCompare(_.department||"");const N={:0,:1,:2,:3,:4},C=N[j.position]??999,b=N[_.position]??999;return C!==b?C-b:(j.name||"").localeCompare(_.name||"")}),e(P)}catch(R){console.error("   :",R)}d(!1)},m=()=>{if(!s.trim()){r(t);return}const R=s.toLowerCase(),P=t.filter(j=>(j.name||"").toLowerCase().includes(R)||(j.department||"").toLowerCase().includes(R)||(j.position||"").toLowerCase().includes(R)||(j.email||"").toLowerCase().includes(R)||(j.phone||"").toLowerCase().includes(R));r(P)},v=()=>{const R={};return t.forEach(P=>{const j=P.department||"";R[j]||(R[j]=[]),R[j].push(P)}),R},x=R=>({:"#9C27B0",:"#E91E63",:"#2196F3",:"#4CAF50",:"#FF9800"})[R]||"#757575";if(u)return o.jsx("div",{className:"department-page",children:o.jsx("div",{className:"loading-state",children:"   ..."})});const A=v();return o.jsxs("div",{className:"department-page",children:[o.jsxs("div",{className:"department-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx(pP,{size:28}),o.jsxs("div",{children:[o.jsx("h1",{children:""}),o.jsxs("p",{children:[t.length," "]})]})]}),o.jsxs("div",{className:"header-right",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(zs,{size:18}),o.jsx("input",{type:"text",placeholder:", , ,  ...",value:s,onChange:R=>i(R.target.value)})]}),o.jsxs("div",{className:"view-toggle",children:[o.jsx("button",{className:a==="grid"?"active":"",onClick:()=>c("grid"),title:" ",children:o.jsx(IP,{size:18})}),o.jsx("button",{className:a==="list"?"active":"",onClick:()=>c("list"),title:" ",children:o.jsx(PE,{size:18})})]})]})]}),n.length===0&&o.jsxs("div",{className:"empty-state",children:[o.jsx(is,{size:48}),o.jsx("p",{children:"  ."})]}),a==="grid"?o.jsx("div",{className:"department-sections",children:Object.entries(A).map(([R,P])=>{const j=P.filter(_=>!s||n.some(N=>N.id===_.id));return j.length===0?null:o.jsxs("div",{className:"department-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:R}),o.jsxs("span",{className:"employee-count",children:[j.length,""]})]}),o.jsx("div",{className:"employee-grid",children:j.map(_=>o.jsxs("div",{className:"employee-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"avatar",children:(_.name||"?")[0]}),o.jsx("div",{className:"position-badge",style:{backgroundColor:x(_.position)},children:_.position||" "})]}),o.jsxs("div",{className:"card-body",children:[o.jsx("h3",{className:"employee-name",children:_.name||" "}),o.jsx("p",{className:"employee-dept",children:_.department||" "}),o.jsxs("div",{className:"contact-info",children:[_.phone&&o.jsxs("div",{className:"contact-item",children:[o.jsx(DE,{size:14}),o.jsx("span",{children:_.phone})]}),_.email&&o.jsxs("div",{className:"contact-item",children:[o.jsx(rm,{size:14}),o.jsx("span",{children:_.email})]}),_.joinDate&&o.jsxs("div",{className:"contact-item",children:[o.jsx(Un,{size:14}),o.jsxs("span",{children:[": ",_.joinDate]})]})]})]})]},_.id))})]},R)})}):o.jsx("div",{className:"employee-table-container",children:o.jsxs("table",{className:"employee-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""})]})}),o.jsx("tbody",{children:n.map(R=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{className:"name-cell",children:[o.jsx("div",{className:"avatar small",children:(R.name||"?")[0]}),o.jsx("span",{className:"name-text",children:R.name||" "})]})}),o.jsx("td",{children:R.department||"-"}),o.jsx("td",{children:o.jsx("span",{className:"position-tag",style:{backgroundColor:x(R.position)},children:R.position||"-"})}),o.jsx("td",{children:R.phone||"-"}),o.jsx("td",{children:R.email||"-"}),o.jsx("td",{children:R.joinDate||"-"})]},R.id))})]})})]})}function nb(){const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState(""),[a,c]=D.useState(null),[u,d]=D.useState({}),[p,m]=D.useState(!1),[v,x]=D.useState(!0);D.useEffect(()=>{A()},[]),D.useEffect(()=>{R()},[s,t]);const A=async()=>{x(!0);try{const M=(await Te(te(W,"employees"))).docs.map(T=>({id:T.id,...T.data()}));M.sort((T,g)=>(T.name||"").localeCompare(g.name||"")),e(M)}catch(b){console.error("   :",b),alert("   .")}x(!1)},R=()=>{if(!s.trim()){r(t);return}const b=s.toLowerCase(),M=t.filter(T=>(T.name||"").toLowerCase().includes(b)||(T.email||"").toLowerCase().includes(b)||(T.department||"").toLowerCase().includes(b));r(M)},P=b=>{c(b.id),d({...b})},j=()=>{c(null),d({})},_=async()=>{if(!u.name||!u.email){alert("  .");return}try{const b=ke(W,"employees",a);await Ge(b,{name:u.name,email:u.email,department:u.department||"",position:u.position||"",phone:u.phone||"",joinDate:u.joinDate||"",customTotalLeave:Number(u.customTotalLeave)||null,isAdmin:u.isAdmin||!1,isSubAdmin:u.isSubAdmin||!1,isApprover:u.isApprover||!1,isPTScheduleEditor:u.isPTScheduleEditor||!1}),alert("."),c(null),d({}),A()}catch(b){console.error(" :",b),alert(" : "+b.message)}},N=async(b,M)=>{if(window.confirm(`${M}   ?

   .`))try{await ks(ke(W,"employees",b)),alert("."),A()}catch(T){console.error(" :",T),alert(" : "+T.message)}},C=()=>{const[b,M]=D.useState({id:"",name:"",email:"",department:"",position:"",phone:"",joinDate:"",customTotalLeave:"",isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1}),T=async()=>{if(!b.id||!b.name||!b.email){alert(" ID, ,  .");return}try{await zc(ke(W,"employees",b.id),{name:b.name,email:b.email,department:b.department||"",position:b.position||"",phone:b.phone||"",joinDate:b.joinDate||"",customTotalLeave:b.customTotalLeave?Number(b.customTotalLeave):null,isAdmin:b.isAdmin,isSubAdmin:b.isSubAdmin,isApprover:b.isApprover,isPTScheduleEditor:b.isPTScheduleEditor,createdAt:new Date().toISOString()}),alert(" ."),m(!1),A()}catch(g){console.error(" :",g),alert(" : "+g.message)}};return o.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:o.jsxs("div",{className:"modal-content large",onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:" "}),o.jsx("button",{className:"close-btn",onClick:()=>m(!1),children:o.jsx(Bs,{size:20})})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" ID (Firebase Auth UID) *"}),o.jsx("input",{type:"text",value:b.id,onChange:g=>M({...b,id:g.target.value}),placeholder:"Firebase Auth UID"}),o.jsx("small",{children:"Firebase Authentication  UID "})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" *"}),o.jsx("input",{type:"text",value:b.name,onChange:g=>M({...b,name:g.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" *"}),o.jsx("input",{type:"email",value:b.email,onChange:g=>M({...b,email:g.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:""}),o.jsx("input",{type:"text",value:b.department,onChange:g=>M({...b,department:g.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:""}),o.jsxs("select",{value:b.position,onChange:g=>M({...b,position:g.target.value}),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:""}),o.jsx("input",{type:"text",value:b.phone,onChange:g=>M({...b,phone:g.target.value}),placeholder:"010-1234-5678"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:""}),o.jsx("input",{type:"date",value:b.joinDate,onChange:g=>M({...b,joinDate:g.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" ()"}),o.jsx("input",{type:"number",value:b.customTotalLeave,onChange:g=>M({...b,customTotalLeave:g.target.value}),placeholder:"    "})]})]}),o.jsxs("div",{className:"permissions-section",children:[o.jsx("h3",{children:" "}),o.jsxs("div",{className:"permission-checks",children:[o.jsxs("label",{className:"permission-check",children:[o.jsx("input",{type:"checkbox",checked:b.isAdmin,onChange:g=>M({...b,isAdmin:g.target.checked})}),o.jsx("span",{children:" (Admin)"}),o.jsx("small",{children:" "})]}),o.jsxs("label",{className:"permission-check",children:[o.jsx("input",{type:"checkbox",checked:b.isSubAdmin,onChange:g=>M({...b,isSubAdmin:g.target.checked})}),o.jsx("span",{children:" (Sub Admin)"}),o.jsx("small",{children:"  "})]}),o.jsxs("label",{className:"permission-check",children:[o.jsx("input",{type:"checkbox",checked:b.isApprover,onChange:g=>M({...b,isApprover:g.target.checked})}),o.jsx("span",{children:" (Approver)"}),o.jsx("small",{children:"  "})]}),o.jsxs("label",{className:"permission-check",children:[o.jsx("input",{type:"checkbox",checked:b.isPTScheduleEditor,onChange:g=>M({...b,isPTScheduleEditor:g.target.checked})}),o.jsx("span",{children:"PT  "}),o.jsx("small",{children:"PT   "})]})]})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"btn-secondary",onClick:()=>m(!1),children:""}),o.jsxs("button",{className:"btn-primary",onClick:T,children:[o.jsx(Ur,{size:18}),""]})]})]})})};return v?o.jsx("div",{className:"admin-employees-page",children:o.jsx("div",{className:"loading-state",children:"   ..."})}):o.jsxs("div",{className:"admin-employees-page",children:[o.jsxs("div",{className:"page-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx(is,{size:28}),o.jsxs("div",{children:[o.jsx("h1",{children:" "}),o.jsx("p",{children:"     "})]})]}),o.jsxs("div",{className:"header-right",children:[o.jsx("input",{type:"text",className:"search-input",placeholder:", ,  ...",value:s,onChange:b=>i(b.target.value)}),o.jsxs("button",{className:"btn-primary",onClick:()=>m(!0),children:[o.jsx(Ur,{size:18})," "]})]})]}),o.jsxs("div",{className:"info-banner",children:[o.jsx(Bc,{size:20}),o.jsxs("div",{children:[o.jsx("strong",{children:" :"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:":"}),"     ( ,  ,  , Slack )"]}),o.jsxs("li",{children:[o.jsx("strong",{children:":"}),"     "]}),o.jsxs("li",{children:[o.jsx("strong",{children:":"}),"    ,    /"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"PT  :"})," PT   "]})]})]})]}),o.jsxs("div",{className:"employees-table-container",children:[o.jsxs("table",{className:"employees-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""})]})}),o.jsx("tbody",{children:n.map(b=>o.jsx("tr",{children:a===b.id?o.jsxs(o.Fragment,{children:[o.jsx("td",{children:o.jsx("input",{type:"text",value:u.name||"",onChange:M=>d({...u,name:M.target.value}),className:"table-input"})}),o.jsx("td",{children:o.jsx("input",{type:"email",value:u.email||"",onChange:M=>d({...u,email:M.target.value}),className:"table-input"})}),o.jsx("td",{children:o.jsx("input",{type:"text",value:u.department||"",onChange:M=>d({...u,department:M.target.value}),className:"table-input"})}),o.jsx("td",{children:o.jsxs("select",{value:u.position||"",onChange:M=>d({...u,position:M.target.value}),className:"table-input",children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})}),o.jsx("td",{children:o.jsx("input",{type:"text",value:u.phone||"",onChange:M=>d({...u,phone:M.target.value}),className:"table-input"})}),o.jsx("td",{children:o.jsx("input",{type:"date",value:u.joinDate||"",onChange:M=>d({...u,joinDate:M.target.value}),className:"table-input"})}),o.jsx("td",{children:o.jsx("input",{type:"number",value:u.customTotalLeave||"",onChange:M=>d({...u,customTotalLeave:M.target.value}),className:"table-input small",placeholder:""})}),o.jsx("td",{children:o.jsxs("div",{className:"permission-checkboxes",children:[o.jsxs("label",{title:"",children:[o.jsx("input",{type:"checkbox",checked:u.isAdmin||!1,onChange:M=>d({...u,isAdmin:M.target.checked})}),o.jsx("span",{children:""})]}),o.jsxs("label",{title:"",children:[o.jsx("input",{type:"checkbox",checked:u.isSubAdmin||!1,onChange:M=>d({...u,isSubAdmin:M.target.checked})}),o.jsx("span",{children:""})]}),o.jsxs("label",{title:"",children:[o.jsx("input",{type:"checkbox",checked:u.isApprover||!1,onChange:M=>d({...u,isApprover:M.target.checked})}),o.jsx("span",{children:""})]}),o.jsxs("label",{title:"PT ",children:[o.jsx("input",{type:"checkbox",checked:u.isPTScheduleEditor||!1,onChange:M=>d({...u,isPTScheduleEditor:M.target.checked})}),o.jsx("span",{children:"PT"})]})]})}),o.jsx("td",{children:o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"btn-success small",onClick:_,title:"",children:o.jsx(Lu,{size:16})}),o.jsx("button",{className:"btn-secondary small",onClick:j,title:"",children:o.jsx(Bs,{size:16})})]})})]}):o.jsxs(o.Fragment,{children:[o.jsx("td",{className:"name-cell",children:o.jsx("strong",{children:b.name||"-"})}),o.jsx("td",{children:b.email||"-"}),o.jsx("td",{children:b.department||"-"}),o.jsx("td",{children:b.position||"-"}),o.jsx("td",{children:b.phone||"-"}),o.jsx("td",{children:b.joinDate||"-"}),o.jsx("td",{className:"center",children:b.customTotalLeave?o.jsxs("span",{className:"custom-leave",children:[b.customTotalLeave,""]}):o.jsx("span",{className:"auto-leave",children:""})}),o.jsx("td",{children:o.jsxs("div",{className:"permission-badges",children:[b.isAdmin&&o.jsx("span",{className:"badge admin",children:""}),b.isSubAdmin&&o.jsx("span",{className:"badge sub-admin",children:""}),b.isApprover&&o.jsx("span",{className:"badge approver",children:""}),b.isPTScheduleEditor&&o.jsx("span",{className:"badge pt-editor",children:"PT"}),!b.isAdmin&&!b.isSubAdmin&&!b.isApprover&&!b.isPTScheduleEditor&&o.jsx("span",{className:"badge default",children:""})]})}),o.jsx("td",{children:o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"btn-secondary small",onClick:()=>P(b),title:"",children:o.jsx(bE,{size:16})}),o.jsx("button",{className:"btn-danger small",onClick:()=>N(b.id,b.name),title:"",children:o.jsx(Yo,{size:16})})]})})]})},b.id))})]}),n.length===0&&o.jsxs("div",{className:"empty-state",children:[o.jsx(is,{size:48}),o.jsx("p",{children:"  ."})]})]}),p&&o.jsx(C,{})]})}function rb(){const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,i]=D.useState({}),[a,c]=D.useState(!0),[u,d]=D.useState(!1);D.useEffect(()=>{p()},[]);const p=async()=>{c(!0);try{const j=(await Te(te(W,"employees"))).docs.map(C=>({id:C.id,...C.data()}));j.sort((C,b)=>(C.name||"").localeCompare(b.name||""));const _=j.filter(C=>C.isApprover||C.isAdmin||C.isSubAdmin),N={};j.forEach(C=>{N[C.id]=C.approver||""}),e(j),r(_),i(N)}catch(P){console.error("  :",P),alert("  .")}c(!1)},m=(P,j)=>{i({...s,[P]:j})},v=async()=>{if(window.confirm(" ?")){d(!0);try{const P=[];for(const[j,_]of Object.entries(s)){const N=ke(W,"employees",j);P.push(Ge(N,{approver:_||null}))}await Promise.all(P),alert(" ."),p()}catch(P){console.error(" :",P),alert(" : "+P.message)}d(!1)}},x=()=>{const P={};return t.forEach(j=>{const _=j.department||"";P[_]||(P[_]=[]),P[_].push(j)}),P},A=P=>s[P]===P;if(a)return o.jsx("div",{className:"approval-line-page",children:o.jsx("div",{className:"loading-state",children:"   ..."})});const R=x();return o.jsxs("div",{className:"approval-line-page",children:[o.jsxs("div",{className:"page-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx(Ay,{size:28}),o.jsxs("div",{children:[o.jsx("h1",{children:" "}),o.jsx("p",{children:"   "})]})]}),o.jsxs("button",{className:"btn-primary",onClick:v,disabled:u,children:[o.jsx(Lu,{size:18}),u?" ...":" "]})]}),o.jsxs("div",{className:"info-banner",children:[o.jsx(Bc,{size:20}),o.jsxs("div",{children:[o.jsx("strong",{children:" :"}),o.jsxs("ul",{children:[o.jsx("li",{children:"      "}),o.jsx("li",{children:"    : , ,    "}),o.jsx("li",{children:"       "}),o.jsxs("li",{children:[o.jsx("strong",{children:":"}),"      "]})]})]})]}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:o.jsx(is,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:" "}),o.jsx("div",{className:"stat-value",children:t.length}),o.jsx("p",{className:"stat-label",children:""})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:o.jsx(rf,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:" "}),o.jsx("div",{className:"stat-value",children:Object.values(s).filter(P=>P).length}),o.jsx("p",{className:"stat-label",children:" "})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:o.jsx(Ay,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:" "}),o.jsx("div",{className:"stat-value",children:n.length}),o.jsx("p",{className:"stat-label",children:" "})]})]})]}),o.jsx("div",{className:"department-sections",children:Object.entries(R).map(([P,j])=>o.jsxs("div",{className:"department-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx("h2",{children:P}),o.jsxs("span",{className:"employee-count",children:[j.length,""]})]}),o.jsx("div",{className:"approval-grid",children:j.map(_=>o.jsxs("div",{className:`approval-card ${A(_.id)?"warning":""}`,children:[o.jsxs("div",{className:"employee-info",children:[o.jsx("div",{className:"avatar",children:(_.name||"?")[0]}),o.jsxs("div",{className:"employee-details",children:[o.jsx("h3",{children:_.name||" "}),o.jsx("p",{children:_.position||" "}),(_.isAdmin||_.isSubAdmin||_.isApprover)&&o.jsxs("div",{className:"role-badges",children:[_.isAdmin&&o.jsx("span",{className:"role-badge admin",children:""}),_.isSubAdmin&&o.jsx("span",{className:"role-badge sub-admin",children:""}),_.isApprover&&o.jsx("span",{className:"role-badge approver",children:""})]})]})]}),o.jsxs("div",{className:"approver-select",children:[o.jsx("label",{children:""}),o.jsxs("select",{value:s[_.id]||"",onChange:N=>m(_.id,N.target.value),className:A(_.id)?"error":"",children:[o.jsx("option",{value:"",children:"  "}),n.map(N=>o.jsxs("option",{value:N.id,disabled:N.id===_.id,children:[N.name,N.isAdmin&&" ()",N.isSubAdmin&&" ()",N.isApprover&&" ()",N.id===_.id&&" (  -  )"]},N.id))]}),A(_.id)&&o.jsx("small",{className:"error-text",children:"      "})]})]},_.id))})]},P))}),Object.values(s).filter(P=>!P).length>0&&o.jsxs("div",{className:"warning-banner",children:[o.jsx(Bc,{size:20}),o.jsxs("div",{children:[o.jsx("strong",{children:":"}),"     ",Object.values(s).filter(P=>!P).length," .       ."]})]})]})}function sb(){const[t,e]=D.useState([]),[n,r]=D.useState({}),[s,i]=D.useState([]),[a,c]=D.useState(""),[u,d]=D.useState("all"),[p,m]=D.useState(!0),[v,x]=D.useState(!1);D.useEffect(()=>{A()},[]),D.useEffect(()=>{P()},[a,u,t,n]);const A=async()=>{m(!0);try{const g=(await Te(te(W,"employees"))).docs.map(E=>({id:E.id,...E.data()})),k=await Te(te(W,"leaveUsage")),y={};g.forEach(E=>{y[E.id]={total:R(E),used:0,pending:0,approved:0,details:[]}}),k.docs.forEach(E=>{const w={id:E.id,...E.data()},I=w.userId;y[I]&&(y[I].details.push(w),w.approvalStatus==="approved"?(y[I].approved+=w.amount||0,y[I].used+=w.amount||0):w.approvalStatus==="pending"&&(y[I].pending+=w.amount||0,y[I].used+=w.amount||0))}),e(g),r(y)}catch(T){console.error("  :",T),alert("  .")}m(!1)},R=T=>{if(T.customTotalLeave)return T.customTotalLeave;if(!T.joinDate)return 15;const g=new Date(T.joinDate),k=new Date,y=k.getFullYear()-g.getFullYear();if(y<1){const E=(k.getFullYear()-g.getFullYear())*12+(k.getMonth()-g.getMonth());return Math.floor(E)}else return 15+Math.min(y-1,10)},P=()=>{let T=t;if(a.trim()){const g=a.toLowerCase();T=T.filter(k=>(k.name||"").toLowerCase().includes(g)||(k.department||"").toLowerCase().includes(g)||(k.email||"").toLowerCase().includes(g))}u!=="all"&&(T=T.filter(g=>g.department===u)),i(T)},j=()=>{const T=new Set;return t.forEach(g=>{g.department&&T.add(g.department)}),Array.from(T).sort()},_=async(T,g)=>{var w;const k=((w=n[T])==null?void 0:w.total)||15,y=prompt(`${g}  .
: ${k}
  :`,k);if(y===null)return;const E=parseInt(y);if(isNaN(E)||E<0){alert("  .");return}try{await Ge(ke(W,"employees",T),{customTotalLeave:E}),alert(" ."),A()}catch(I){console.error("  :",I),alert("  : "+I.message)}},N=()=>{const[T,g]=D.useState("all"),[k,y]=D.useState(""),[E,w]=D.useState(15),I=async()=>{let z=[];if(T==="all")z=t;else if(T==="department"){if(!k){alert(" .");return}z=t.filter(X=>X.department===k)}if(z.length===0){alert("  .");return}const le=`${z.length} ${E}   ?`;if(window.confirm(le))try{const X=z.map(ye=>Ge(ke(W,"employees",ye.id),{customTotalLeave:E}));await Promise.all(X),alert("  ."),x(!1),A()}catch(X){console.error("  :",X),alert("  : "+X.message)}};return o.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:o.jsxs("div",{className:"modal-content",onClick:z=>z.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"  "}),o.jsx("button",{className:"close-btn",onClick:()=>x(!1),children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" "}),o.jsxs("select",{value:T,onChange:z=>g(z.target.value),children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"department",children:""})]})]}),T==="department"&&o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" "}),o.jsxs("select",{value:k,onChange:z=>y(z.target.value),children:[o.jsx("option",{value:"",children:""}),j().map(z=>o.jsx("option",{value:z,children:z},z))]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" "}),o.jsx("input",{type:"number",value:E,onChange:z=>w(parseInt(z.target.value)),min:"0"})]}),o.jsxs("div",{className:"info-box",children:[o.jsx("strong",{children:":"}),o.jsxs("ul",{children:[o.jsx("li",{children:"   "}),o.jsx("li",{children:"    "}),o.jsx("li",{children:"    "})]})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"btn-secondary",onClick:()=>x(!1),children:""}),o.jsxs("button",{className:"btn-primary",onClick:I,children:[o.jsx(jy,{size:18})," "]})]})]})})},C=()=>{const T=[];T.push(["","",""," "," "," "," "]),s.forEach(E=>{const w=n[E.id]||{total:0,used:0,pending:0};T.push([E.name||"",E.department||"",E.position||"",w.total,w.approved,w.total-w.used,w.pending])});const g=T.map(E=>E.join(",")).join(`
`),k=new Blob(["\uFEFF"+g],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a");y.href=URL.createObjectURL(k),y.download=`_${new Date().toISOString().split("T")[0]}.csv`,y.click()},b=()=>{const T={totalEmployees:s.length,totalLeave:0,usedLeave:0,remainingLeave:0,pendingLeave:0};return s.forEach(g=>{const k=n[g.id]||{total:0,pending:0};T.totalLeave+=k.total,T.usedLeave+=k.approved,T.pendingLeave+=k.pending}),T.remainingLeave=T.totalLeave-T.usedLeave-T.pendingLeave,T};if(p)return o.jsx("div",{className:"admin-leave-page",children:o.jsx("div",{className:"loading-state",children:"  ..."})});const M=b();return o.jsxs("div",{className:"admin-leave-page",children:[o.jsxs("div",{className:"page-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx(Un,{size:28}),o.jsxs("div",{children:[o.jsx("h1",{children:"  "}),o.jsx("p",{children:"     "})]})]}),o.jsxs("div",{className:"header-actions",children:[o.jsxs("button",{className:"btn-secondary",onClick:A,children:[o.jsx(OP,{size:18}),""]}),o.jsxs("button",{className:"btn-secondary",onClick:C,children:[o.jsx(EP,{size:18})," "]}),o.jsxs("button",{className:"btn-primary",onClick:()=>x(!0),children:[o.jsx(jy,{size:18})," "]})]})]}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon blue",children:o.jsx(is,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:" "}),o.jsx("div",{className:"stat-value",children:M.totalEmployees}),o.jsx("p",{className:"stat-label",children:""})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon green",children:o.jsx(Ly,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:" "}),o.jsx("div",{className:"stat-value",children:M.totalLeave}),o.jsx("p",{className:"stat-label",children:""})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon orange",children:o.jsx(Un,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:" "}),o.jsx("div",{className:"stat-value",children:M.usedLeave}),o.jsx("p",{className:"stat-label",children:""})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon purple",children:o.jsx(Ly,{size:24})}),o.jsxs("div",{className:"stat-content",children:[o.jsx("h3",{children:" "}),o.jsx("div",{className:"stat-value",children:M.remainingLeave}),o.jsx("p",{className:"stat-label",children:""})]})]})]}),o.jsxs("div",{className:"filter-section",children:[o.jsxs("div",{className:"search-box",children:[o.jsx(zs,{size:18}),o.jsx("input",{type:"text",placeholder:", ,  ...",value:a,onChange:T=>c(T.target.value)})]}),o.jsxs("div",{className:"filter-box",children:[o.jsx(TP,{size:18}),o.jsxs("select",{value:u,onChange:T=>d(T.target.value),children:[o.jsx("option",{value:"all",children:" "}),j().map(T=>o.jsx("option",{value:T,children:T},T))]})]})]}),o.jsxs("div",{className:"leave-table-container",children:[o.jsxs("table",{className:"leave-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:" "}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""}),o.jsx("th",{children:""})]})}),o.jsx("tbody",{children:s.map(T=>{const g=n[T.id]||{total:0,used:0,pending:0,approved:0},k=g.total-g.used,y=g.total>0?(g.approved/g.total*100).toFixed(1):0;return o.jsxs("tr",{children:[o.jsx("td",{className:"name-cell",children:o.jsx("strong",{children:T.name||" "})}),o.jsx("td",{children:T.department||"-"}),o.jsx("td",{children:T.position||"-"}),o.jsxs("td",{className:"number-cell",children:[g.total,""]}),o.jsxs("td",{className:"number-cell used",children:[g.approved,""]}),o.jsxs("td",{className:"number-cell pending",children:[g.pending,""]}),o.jsx("td",{className:"number-cell remaining",children:o.jsxs("span",{className:k<3?"warning":"",children:[k,""]})}),o.jsx("td",{className:"number-cell",children:o.jsxs("div",{className:"progress-bar",children:[o.jsx("div",{className:"progress-fill",style:{width:`${Math.min(y,100)}%`}}),o.jsxs("span",{className:"progress-text",children:[y,"%"]})]})}),o.jsx("td",{children:o.jsx("div",{className:"action-buttons",children:o.jsx("button",{className:"btn-icon",onClick:()=>_(T.id,T.name),title:" ",children:o.jsx(bE,{size:16})})})})]},T.id)})})]}),s.length===0&&o.jsxs("div",{className:"empty-state",children:[o.jsx(is,{size:48}),o.jsx("p",{children:"  ."})]})]}),v&&o.jsx(N,{})]})}const ib=()=>{const{user:t,userData:e}=Qt(),[n,r]=D.useState([]),[s,i]=D.useState([]),[a,c]=D.useState([]),[u,d]=D.useState(null),[p,m]=D.useState(!1),[v,x]=D.useState(""),[A,R]=D.useState("personal"),[P,j]=D.useState({personal:!0,team:!0}),[_,N]=D.useState([]),[C,b]=D.useState(null),[M,T]=D.useState(""),[g,k]=D.useState([]),[y,E]=D.useState(!1),[w,I]=D.useState(""),[z,le]=D.useState(""),[X,ye]=D.useState(!1),[B,Y]=D.useState(null),[F,$]=D.useState(!1),q=D.useRef(null),Z=D.useRef(null);D.useEffect(()=>{t&&fe()},[t]),D.useEffect(()=>{u?G(u.id):(N([]),k([]))},[u]),D.useEffect(()=>{re()},[_,M,y]),D.useEffect(()=>{C&&(le(C.content||""),I(C.title||""),setTimeout(()=>{q.current&&!q.current.textContent&&(q.current.innerHTML=C.content||"")},0))},[C==null?void 0:C.id]),D.useEffect(()=>(C&&(w!==C.title||z!==C.content)&&(Z.current&&clearTimeout(Z.current),Z.current=setTimeout(()=>{ue()},1e3)),()=>{Z.current&&clearTimeout(Z.current)}),[w,z]);const fe=async()=>{try{const H=te(W,"projects");return er(H,oe=>{const Ae=[],$e=[];oe.forEach(qe=>{const Ke={id:qe.id,...qe.data()};Ke.type==="personal"?Ke.userId===t.uid&&Ae.push(Ke):Ke.type==="team"&&$e.push(Ke)}),Ae.sort((qe,Ke)=>(qe.name||"").localeCompare(Ke.name||"")),$e.sort((qe,Ke)=>(qe.name||"").localeCompare(Ke.name||"")),i(Ae),c($e),r([...Ae,...$e]),!u&&(Ae.length>0||$e.length>0)&&d(Ae[0]||$e[0])})}catch(H){console.error("  :",H)}},G=async H=>{try{const Ie=te(W,"notes"),oe=Ne(Ie,de("projectId","==",H),Ar("updatedAt","desc"));return er(oe,$e=>{const qe=[];$e.forEach(Ke=>{qe.push({id:Ke.id,...Ke.data()})}),N(qe),C&&!qe.find(Ke=>Ke.id===C.id)&&(qe.length>0?ge(qe[0]):(b(null),I(""),le("")))})}catch(Ie){console.error("  :",Ie),alert("  : "+Ie.message)}},re=()=>{let H=[..._];if(y&&(H=H.filter(Ie=>Ie.favorite)),M){const Ie=M.toLowerCase();H=H.filter(oe=>{var Ae,$e;return((Ae=oe.title)==null?void 0:Ae.toLowerCase().includes(Ie))||(($e=oe.content)==null?void 0:$e.toLowerCase().includes(Ie))})}k(H)},ie=async()=>{if(!v.trim()){alert("  .");return}try{const H={name:v.trim(),type:A,createdBy:t.uid,createdByName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||t.email,createdAt:Le()};A==="personal"&&(H.userId=t.uid);const Ie=await cn(te(W,"projects"),H);m(!1),x(""),R("personal"),d({id:Ie.id,...H}),alert(" !")}catch(H){console.error("  :",H),alert("  .")}},ce=async(H,Ie)=>{if(Ie.stopPropagation(),!!confirm("     . ?"))try{const oe=Ne(te(W,"notes"),de("projectId","==",H)),$e=(await Te(oe)).docs.map(qe=>ks(qe.ref));if(await Promise.all($e),await ks(ke(W,"projects",H)),(u==null?void 0:u.id)===H){const qe=n.filter(Ke=>Ke.id!==H);d(qe[0]||null)}alert(" .")}catch(oe){console.error("  :",oe),alert("  .")}},pe=async()=>{if(!u){alert("  .");return}try{const H={projectId:u.id,title:" ",content:"",userId:t.uid,type:u.type,favorite:!1,createdAt:Le(),updatedAt:Le()},oe={id:(await cn(te(W,"notes"),H)).id,...H};ge(oe)}catch(H){console.error("  :",H),alert("  .")}},ge=H=>{b(H),I(H.title||""),le(H.content||""),q.current&&(q.current.innerHTML=H.content||""),window.innerWidth<=768&&$(!0)},ue=async()=>{if(C)try{ye(!0);const H=ke(W,"notes",C.id);await Ge(H,{title:w,content:z,updatedAt:Le()}),Y(new Date),setTimeout(()=>ye(!1),500)}catch(H){console.error("  :",H),ye(!1)}},Fe=async(H,Ie)=>{if(Ie.stopPropagation(),!!confirm("  ?"))try{if(await ks(ke(W,"notes",H)),(C==null?void 0:C.id)===H){const oe=_.filter(Ae=>Ae.id!==H);oe.length>0?ge(oe[0]):(b(null),I(""),le(""))}alert(" .")}catch(oe){console.error("  :",oe),alert("  .")}},be=async(H,Ie,oe)=>{oe.stopPropagation();try{const Ae=ke(W,"notes",H);await Ge(Ae,{favorite:!Ie})}catch(Ae){console.error("  :",Ae)}},Be=(H,Ie=null)=>{var oe;document.execCommand(H,!1,Ie),(oe=q.current)==null||oe.focus()},En=()=>{const H=prompt(" URL :");H&&Be("createLink",H)},Yt=()=>{q.current&&le(q.current.innerHTML)},Tn=()=>{if(!B)return"";const Ie=new Date-B;return Ie<5e3?" ":Ie<6e4?"":B.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})+" "};return o.jsxs("div",{className:`notes-page-v2 ${F?"mobile-editor-active":""}`,children:[o.jsxs("div",{className:"projects-sidebar-v2",children:[o.jsx("div",{className:"sidebar-header-v2",children:o.jsx("h2",{children:" "})}),o.jsxs("div",{className:"project-section-v2",children:[o.jsxs("div",{className:"section-header-v2",onClick:()=>j(H=>({...H,personal:!H.personal})),children:[P.personal?o.jsx($c,{size:16}):o.jsx(qc,{size:16}),o.jsx(ys,{size:16}),o.jsx("span",{children:" "}),o.jsx("button",{className:"btn-icon-tiny",onClick:H=>{H.stopPropagation(),R("personal"),m(!0)},title:" ",children:o.jsx(Ur,{size:14})})]}),P.personal&&o.jsx("div",{className:"project-list-v2",children:s.length===0?o.jsxs("div",{className:"empty-hint-v2",children:[o.jsx("p",{children:" "}),o.jsx("button",{className:"btn-create-hint-v2",onClick:()=>{R("personal"),m(!0)},children:"  "})]}):s.map(H=>o.jsxs("div",{className:`project-item-v2 ${(u==null?void 0:u.id)===H.id?"active":""}`,onClick:()=>d(H),children:[o.jsx(ys,{size:16}),o.jsx("span",{className:"project-name",children:H.name}),o.jsx("button",{className:"btn-delete-tiny",onClick:Ie=>ce(H.id,Ie),title:" ",children:o.jsx(Yo,{size:12})})]},H.id))})]}),o.jsxs("div",{className:"project-section-v2",children:[o.jsxs("div",{className:"section-header-v2",onClick:()=>j(H=>({...H,team:!H.team})),children:[P.team?o.jsx($c,{size:16}):o.jsx(qc,{size:16}),o.jsx(ys,{size:16}),o.jsx("span",{children:" "}),o.jsx("button",{className:"btn-icon-tiny",onClick:H=>{H.stopPropagation(),R("team"),m(!0)},title:" ",children:o.jsx(Ur,{size:14})})]}),P.team&&o.jsx("div",{className:"project-list-v2",children:a.length===0?o.jsxs("div",{className:"empty-hint-v2",children:[o.jsx("p",{children:" "}),o.jsx("button",{className:"btn-create-hint-v2",onClick:()=>{R("team"),m(!0)},children:"  "})]}):a.map(H=>o.jsxs("div",{className:`project-item-v2 ${(u==null?void 0:u.id)===H.id?"active":""}`,onClick:()=>d(H),children:[o.jsx(ys,{size:16}),o.jsx("span",{className:"project-name",children:H.name}),H.createdBy===t.uid&&o.jsx("button",{className:"btn-delete-tiny",onClick:Ie=>ce(H.id,Ie),title:" ",children:o.jsx(Yo,{size:12})})]},H.id))})]}),o.jsx("div",{className:"project-add-section-v2",children:o.jsxs("button",{className:"btn-add-project-v2",onClick:()=>m(!0),children:[o.jsx(ky,{size:16}),o.jsx("span",{children:"  "})]})})]}),o.jsxs("div",{className:"notes-list-v2",children:[o.jsxs("div",{className:"notes-list-header-v2",children:[o.jsxs("div",{className:"search-box-v2",children:[o.jsx(zs,{size:16}),o.jsx("input",{type:"text",placeholder:" ...",value:M,onChange:H=>T(H.target.value)})]}),o.jsxs("div",{className:"list-actions-v2",children:[o.jsx("button",{className:`btn-filter-v2 ${y?"active":""}`,onClick:()=>E(!y),title:" ",children:o.jsx(Dy,{size:16,fill:y?"currentColor":"none"})}),o.jsxs("button",{className:"btn-primary-v2",onClick:pe,disabled:!u,title:" ",children:[o.jsx(Ur,{size:16}),o.jsx("span",{children:" "})]})]})]}),o.jsx("div",{className:"notes-list-content-v2",children:u?g.length===0?o.jsxs("div",{className:"empty-state-v2",children:[o.jsx(Ia,{size:48}),o.jsx("p",{children:M||y?" ":"  "}),!M&&!y&&o.jsxs("button",{className:"btn-create-large-v2",onClick:pe,children:[o.jsx(Ur,{size:20}),o.jsx("span",{children:" "})]})]}):g.map(H=>{var Ie;return o.jsxs("div",{className:`note-item-v2 ${(C==null?void 0:C.id)===H.id?"active":""}`,onClick:()=>ge(H),children:[o.jsxs("div",{className:"note-item-header-v2",children:[o.jsx("h3",{children:H.title||" "}),o.jsxs("div",{className:"note-item-actions-v2",children:[o.jsx("button",{className:"btn-icon-small",onClick:oe=>be(H.id,H.favorite,oe),title:H.favorite?" ":"",children:o.jsx(Dy,{size:14,fill:H.favorite?"currentColor":"none"})}),o.jsx("button",{className:"btn-icon-small",onClick:oe=>Fe(H.id,oe),title:" ",children:o.jsx(Yo,{size:14})})]})]}),o.jsx("p",{className:"note-preview-v2",children:H.content?H.content.replace(/<[^>]*>/g,"").substring(0,100):" "}),o.jsx("div",{className:"note-item-footer-v2",children:o.jsx("span",{className:"note-date-v2",children:(Ie=H.updatedAt)!=null&&Ie.toDate?H.updatedAt.toDate().toLocaleDateString("ko-KR",{month:"short",day:"numeric"}):" "})})]},H.id)}):o.jsxs("div",{className:"empty-state-v2",children:[o.jsx(ys,{size:48}),o.jsx("p",{children:" "})]})})]}),o.jsx("div",{className:"note-editor-v2",children:C?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"editor-header-v2",children:[o.jsx("button",{className:"mobile-back-btn",onClick:()=>$(!1),title:"",children:o.jsx(RE,{size:20})}),o.jsx("input",{type:"text",className:"note-title-input-v2",placeholder:" ...",value:w,onChange:H=>I(H.target.value)}),o.jsx("div",{className:"editor-status-v2",children:X?o.jsx("span",{className:"saving",children:" ..."}):o.jsx("span",{className:"saved",children:Tn()})})]}),o.jsxs("div",{className:"editor-toolbar-v2",children:[o.jsx("div",{className:"toolbar-group-v2",children:o.jsxs("select",{className:"toolbar-select-v2",onChange:H=>Be("formatBlock",H.target.value),defaultValue:"p",children:[o.jsx("option",{value:"p",children:""}),o.jsx("option",{value:"h1",children:" 1"}),o.jsx("option",{value:"h2",children:" 2"}),o.jsx("option",{value:"h3",children:" 3"})]})}),o.jsx("div",{className:"toolbar-divider-v2"}),o.jsxs("div",{className:"toolbar-group-v2",children:[o.jsx("button",{className:"toolbar-btn-v2",onClick:()=>Be("bold"),title:" (Ctrl+B)",children:o.jsx(hP,{size:16})}),o.jsx("button",{className:"toolbar-btn-v2",onClick:()=>Be("italic"),title:" (Ctrl+I)",children:o.jsx(NP,{size:16})}),o.jsx("button",{className:"toolbar-btn-v2",onClick:()=>Be("underline"),title:" (Ctrl+U)",children:o.jsx(zP,{size:16})}),o.jsx("button",{className:"toolbar-btn-v2",onClick:()=>Be("strikeThrough"),title:"",children:o.jsx(FP,{size:16})})]}),o.jsx("div",{className:"toolbar-divider-v2"}),o.jsxs("div",{className:"toolbar-group-v2",children:[o.jsx("button",{className:"toolbar-btn-v2",onClick:()=>Be("insertUnorderedList"),title:"  ",children:o.jsx(PE,{size:16})}),o.jsx("button",{className:"toolbar-btn-v2",onClick:()=>Be("insertOrderedList"),title:"  ",children:o.jsx(jP,{size:16})})]}),o.jsx("div",{className:"toolbar-divider-v2"}),o.jsxs("div",{className:"toolbar-group-v2",children:[o.jsx("button",{className:"toolbar-btn-v2",onClick:En,title:" ",children:o.jsx(kP,{size:16})}),o.jsx("button",{className:"toolbar-btn-v2",onClick:()=>Be("formatBlock","pre"),title:" ",children:o.jsx(wP,{size:16})})]})]}),o.jsx("div",{ref:q,className:"rich-editor-v2",contentEditable:!0,dir:"ltr",onInput:Yt,suppressContentEditableWarning:!0,"data-placeholder":" ..."})]}):o.jsxs("div",{className:"editor-empty-v2",children:[o.jsx(Ia,{size:64}),o.jsx("h3",{children:" "}),o.jsx("p",{children:"    "})]})}),p&&o.jsx("div",{className:"modal-overlay-v2",onClick:()=>m(!1),children:o.jsxs("div",{className:"modal-content-v2",onClick:H=>H.stopPropagation(),children:[o.jsxs("div",{className:"modal-header-v2",children:[o.jsx("h2",{children:"  "}),o.jsx("button",{onClick:()=>m(!1),children:""})]}),o.jsxs("div",{className:"modal-body-v2",children:[o.jsxs("div",{className:"form-group-v2",children:[o.jsx("label",{children:"  *"}),o.jsx("input",{type:"text",placeholder:":  ",value:v,onChange:H=>x(H.target.value),autoFocus:!0})]}),o.jsxs("div",{className:"form-group-v2",children:[o.jsx("label",{children:" "}),o.jsxs("div",{className:"radio-group-v2",children:[o.jsxs("label",{children:[o.jsx("input",{type:"radio",value:"personal",checked:A==="personal",onChange:H=>R(H.target.value)}),o.jsx("span",{children:" "})]}),o.jsxs("label",{children:[o.jsx("input",{type:"radio",value:"team",checked:A==="team",onChange:H=>R(H.target.value)}),o.jsx("span",{children:" "})]})]})]})]}),o.jsxs("div",{className:"modal-footer-v2",children:[o.jsx("button",{className:"btn-secondary-v2",onClick:()=>m(!1),children:""}),o.jsxs("button",{className:"btn-primary-v2",onClick:ie,children:[o.jsx(ky,{size:16}),o.jsx("span",{children:" "})]})]})]})})]})},ob=()=>{const{user:t,userData:e}=Qt(),[n,r]=D.useState([]),[s,i]=D.useState(null),[a,c]=D.useState(!1),[u,d]=D.useState(""),[p,m]=D.useState(""),[v,x]=D.useState(!1),[A,R]=D.useState(!0),[P,j]=D.useState([]),[_,N]=D.useState([]),[C,b]=D.useState(null),[M,T]=D.useState(new Set),[g,k]=D.useState(!0),[y,E]=D.useState([]),[w,I]=D.useState(""),[z,le]=D.useState(""),[X,ye]=D.useState({}),[B,Y]=D.useState(!0),[F,$]=D.useState(!1),[q,Z]=D.useState(null),[fe,G]=D.useState([]),[re,ie]=D.useState(!1),[ce,pe]=D.useState(""),ge=D.useRef(null),ue=D.useRef(null),Fe=D.useRef(null),be=D.useRef(null);D.useEffect(()=>{if(t)return Yt(),Tn(),Be(),()=>En()},[t]),D.useEffect(()=>{if(!t)return;const O=te(W,"presence");return er(O,_e=>{const we=new Set;_e.forEach(je=>{je.data().online&&we.add(je.id)}),T(we)})},[t]),D.useEffect(()=>{Ie()},[P,z]),D.useEffect(()=>{let O;return C?(O=oe(),Qs()):s&&(O=Ae()),()=>{O&&O()}},[C,s]),D.useEffect(()=>{q&&$e()},[q]),D.useEffect(()=>{ds()},[y]),D.useEffect(()=>{Ou()},[fe]);const Be=async()=>{if(t)try{await zc(ke(W,"presence",t.uid),{online:!0,lastSeen:Le()})}catch(O){console.error("   :",O)}},En=async()=>{if(t)try{await zc(ke(W,"presence",t.uid),{online:!1,lastSeen:Le()})}catch(O){console.error("   :",O)}},Yt=async()=>{if(t)try{Y(!0);const O=te(W,"employees"),me=await Te(O),_e=[];me.forEach(we=>{const je={id:we.id,...we.data()};we.id!==t.uid&&_e.push(je)}),_e.sort((we,je)=>(we.name||"").localeCompare(je.name||"")),j(_e),H(_e)}catch(O){console.error("   :",O)}finally{Y(!1)}},Tn=async()=>{if(t)try{const O=te(W,"channels"),me=Ne(O,Ar("createdAt","desc"));return er(me,we=>{const je=[];we.forEach(He=>{var Sn;const Tt={id:He.id,...He.data()};(!Tt.private||(Sn=Tt.members)!=null&&Sn.includes(t.uid))&&je.push(Tt)}),r(je)})}catch(O){console.error("   :",O)}},H=async O=>{if(!t)return;const me={};for(const _e of O)try{const we=te(W,"directMessages"),je=Ne(we,de("receiverId","==",t.uid),de("senderId","==",_e.id),de("read","==",!1)),He=await Te(je);me[_e.id]=He.size}catch{me[_e.id]=0}ye(me)},Ie=()=>{if(!z){N(P);return}const O=z.toLowerCase(),me=P.filter(_e=>{var we,je,He;return((we=_e.name)==null?void 0:we.toLowerCase().includes(O))||((je=_e.department)==null?void 0:je.toLowerCase().includes(O))||((He=_e.email)==null?void 0:He.toLowerCase().includes(O))});N(me)},oe=()=>{if(!t||!C)return;const O=te(W,"directMessages"),me=qe(t.uid,C.id),_e=Ne(O,de("chatId","==",me),de("parentId","==",null),Ar("timestamp","asc"));return er(_e,je=>{const He=[];je.forEach(Tt=>{He.push({id:Tt.id,...Tt.data()})}),E(He)})},Ae=()=>{if(!t||!s)return;const O=te(W,"channelMessages"),me=Ne(O,de("channelId","==",s.id),de("parentId","==",null),Ar("timestamp","asc"));return er(me,we=>{const je=[];we.forEach(He=>{je.push({id:He.id,...He.data()})}),E(je)})},$e=()=>{if(!q)return;const me=te(W,C?"directMessages":"channelMessages"),_e=Ne(me,de("parentId","==",q.id),Ar("timestamp","asc"));return er(_e,je=>{const He=[];je.forEach(Tt=>{He.push({id:Tt.id,...Tt.data()})}),G(He)})},qe=(O,me)=>[O,me].sort().join("_"),Ke=async()=>{var O;if(!(!w.trim()||!C))try{const me={chatId:qe(t.uid,C.id),senderId:t.uid,senderName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||t.email,receiverId:C.id,receiverName:C.name,message:w.trim(),timestamp:Le(),read:!1,parentId:null,replyCount:0};await cn(te(W,"directMessages"),me),I(""),(O=Fe.current)==null||O.focus()}catch(me){console.error("  :",me),alert("  .")}},Ln=async()=>{var O;if(!(!w.trim()||!s))try{const me={channelId:s.id,senderId:t.uid,senderName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||t.email,message:w.trim(),timestamp:Le(),parentId:null,replyCount:0};await cn(te(W,"channelMessages"),me),I(""),(O=Fe.current)==null||O.focus()}catch(me){console.error("  :",me),alert("  .")}},tt=async()=>{var O;if(!(!ce.trim()||!q))try{const me=C?"directMessages":"channelMessages",_e={senderId:t.uid,senderName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||t.email,message:ce.trim(),timestamp:Le(),parentId:q.id};C?(_e.chatId=q.chatId,_e.receiverId=q.senderId===t.uid?q.receiverId:q.senderId,_e.receiverName=q.senderId===t.uid?q.receiverName:q.senderName):_e.channelId=q.channelId,await cn(te(W,me),_e);const we=ke(W,me,q.id),je=await Uc(we);if(je.exists()){const He=je.data().replyCount||0;await Ge(we,{replyCount:He+1})}pe(""),(O=be.current)==null||O.focus()}catch(me){console.error("  :",me),alert("  .")}},_t=()=>{C?Ke():s&&Ln()},Qs=async()=>{if(!(!t||!C))try{const O=te(W,"directMessages"),me=Ne(O,de("receiverId","==",t.uid),de("senderId","==",C.id),de("read","==",!1)),_e=await Te(me),we=[];_e.forEach(je=>{we.push(Ge(ke(W,"directMessages",je.id),{read:!0}))}),await Promise.all(we),ye(je=>({...je,[C.id]:0}))}catch(O){console.error("  :",O)}},$a=async()=>{if(!u.trim()){alert("  .");return}try{const O={name:u.trim(),description:p.trim(),private:v,createdBy:t.uid,createdByName:(e==null?void 0:e.name)||(e==null?void 0:e.email)||t.email,members:[t.uid],createdAt:Le()};await cn(te(W,"channels"),O),c(!1),d(""),m(""),x(!1),alert(" !")}catch(O){console.error("  :",O),alert("  .")}},qa=async O=>{if(confirm("   ?"))try{await ks(ke(W,"channels",O)),(s==null?void 0:s.id)===O&&i(null),alert(" .")}catch(me){console.error("  :",me),alert("  .")}},Mu=O=>{Z(O),ie(!0),pe("")},Yn=()=>{Z(null),ie(!1),G([]),pe("")},Ha=O=>{b(O),i(null),Yn(),window.innerWidth<=768&&$(!0)},Wa=O=>{i(O),b(null),Yn(),window.innerWidth<=768&&$(!0)};D.useEffect(()=>{if(!s&&!C){E([]);return}let O;return(async()=>{try{if(s){const _e=te(W,"channels",s.id,"messages"),we=Ne(_e,Ar("createdAt","asc"));O=er(we,je=>{const He=je.docs.map(Tt=>({id:Tt.id,...Tt.data()}));E(He),setTimeout(ds,100)})}else if(C){const _e=[t.uid,C.id].sort().join("_"),we=te(W,"directMessages",_e,"messages"),je=Ne(we,Ar("createdAt","asc"));O=er(je,He=>{const Tt=He.docs.map(Sn=>({id:Sn.id,...Sn.data()}));E(Tt),setTimeout(ds,100)})}}catch(_e){console.error("  :",_e)}})(),()=>{O&&O()}},[s,C,t]);const ds=()=>{var O;(O=ge.current)==null||O.scrollIntoView({behavior:"smooth"})},Ou=()=>{var O;(O=ue.current)==null||O.scrollIntoView({behavior:"smooth"})},Vu=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),_t())},eo=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),tt())},Ys=O=>{if(!O)return"";const me=O.toDate?O.toDate():new Date(O),_e=new Date,we=_e-me;if(we<6e4)return" ";if(we<36e5)return`${Math.floor(we/6e4)} `;if(me.toDateString()===_e.toDateString())return me.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});const je=new Date(_e);return je.setDate(je.getDate()-1),me.toDateString()===je.toDateString()?"":me.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})},Xs=O=>M.has(O);return o.jsxs("div",{className:`messenger-page-v3 ${F?"mobile-chat-active":""}`,children:[o.jsxs("div",{className:"messenger-sidebar-v3",children:[o.jsx("div",{className:"sidebar-header-v3",children:o.jsx("h2",{children:" "})}),o.jsxs("div",{className:"sidebar-search",children:[o.jsx(zs,{size:18}),o.jsx("input",{type:"text",placeholder:"...",value:z,onChange:O=>le(O.target.value)})]}),o.jsxs("div",{className:"sidebar-section",children:[o.jsxs("div",{className:"section-header",onClick:()=>R(!A),children:[A?o.jsx($c,{size:16}):o.jsx(qc,{size:16}),o.jsx("span",{children:""}),o.jsx("button",{className:"btn-icon-tiny",onClick:O=>{O.stopPropagation(),c(!0)},title:" ",children:o.jsx(Ur,{size:16})})]}),A&&o.jsx("div",{className:"section-content",children:n.length===0?o.jsxs("div",{className:"empty-hint",children:[o.jsx("p",{children:" "}),o.jsx("button",{className:"btn-create-hint",onClick:()=>c(!0),children:"  "})]}):n.map(O=>o.jsxs("div",{className:`channel-item-v3 ${(s==null?void 0:s.id)===O.id?"active":""}`,onClick:()=>Wa(O),children:[o.jsx("div",{className:"channel-icon-v3",children:O.private?o.jsx(Qo,{size:14}):o.jsx(Cy,{size:14})}),o.jsx("span",{className:"channel-name",children:O.name}),O.createdBy===t.uid&&o.jsx("button",{className:"btn-delete-tiny",onClick:me=>{me.stopPropagation(),qa(O.id)},title:"",children:o.jsx(Yo,{size:12})})]},O.id))})]}),o.jsxs("div",{className:"sidebar-section",children:[o.jsxs("div",{className:"section-header",onClick:()=>k(!g),children:[g?o.jsx($c,{size:16}):o.jsx(qc,{size:16}),o.jsx("span",{children:" "})]}),g&&o.jsx("div",{className:"section-content",children:B?o.jsx("div",{className:"loading-hint",children:" ..."}):_.length===0?o.jsx("div",{className:"empty-hint",children:o.jsx("p",{children:"  "})}):_.map(O=>o.jsxs("div",{className:`dm-item-v3 ${(C==null?void 0:C.id)===O.id?"active":""}`,onClick:()=>Ha(O),children:[o.jsxs("div",{className:"dm-avatar",children:[o.jsx(_s,{size:16}),o.jsx(Ny,{size:8,className:`status-dot ${Xs(O.id)?"online":"offline"}`,fill:"currentColor"})]}),o.jsx("span",{className:"dm-name",children:O.name||" "}),X[O.id]>0&&o.jsx("span",{className:"unread-badge-v3",children:X[O.id]})]},O.id))})]})]}),o.jsx("div",{className:"messenger-chat-v3",children:!C&&!s?o.jsxs("div",{className:"chat-empty",children:[o.jsx(PP,{size:64}),o.jsx("h3",{children:" "}),o.jsx("p",{children:"     "})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"chat-header-v3",children:[o.jsx("button",{className:"mobile-back-btn",onClick:()=>$(!1),title:"",children:o.jsx(RE,{size:20})}),o.jsx("div",{className:"chat-user-info-v3",children:C?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"chat-avatar-v3",children:[o.jsx(_s,{size:28}),o.jsx(Ny,{size:10,className:`status-indicator ${Xs(C==null?void 0:C.id)?"online":"offline"}`,fill:"currentColor"})]}),o.jsxs("div",{children:[o.jsx("h3",{children:C==null?void 0:C.name}),o.jsx("p",{className:"chat-status",children:Xs(C==null?void 0:C.id)?" ":" "})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"channel-avatar-v3",children:s!=null&&s.private?o.jsx(Qo,{size:24}):o.jsx(Cy,{size:24})}),o.jsxs("div",{children:[o.jsx("h3",{children:s==null?void 0:s.name}),o.jsx("p",{children:(s==null?void 0:s.description)||"  "})]})]})}),o.jsx("div",{className:"chat-actions-v3",children:o.jsx("button",{className:"btn-icon",title:"",children:o.jsx(bP,{size:20})})})]}),o.jsx("div",{className:"chat-messages-v3",children:y.length===0?o.jsx("div",{className:"messages-empty",children:o.jsx("p",{children:"  ! "})}):o.jsxs(o.Fragment,{children:[y.map((O,me)=>{const _e=O.senderId===t.uid,we=me===0||y[me-1].senderId!==O.senderId;return o.jsxs("div",{className:`message-v3 ${_e?"mine":"theirs"} ${we?"show-avatar":""}`,children:[!_e&&we&&o.jsx("div",{className:"message-avatar-v3",children:o.jsx(_s,{size:24})}),o.jsxs("div",{className:"message-content-v3",children:[!_e&&we&&o.jsx("span",{className:"message-sender",children:O.senderName}),o.jsx("div",{className:"message-bubble-v3",children:o.jsx("p",{children:O.message})}),o.jsxs("div",{className:"message-footer",children:[o.jsx("span",{className:"message-time",children:Ys(O.timestamp)}),o.jsxs("button",{className:"btn-thread-v3",onClick:()=>Mu(O),children:[o.jsx(Us,{size:14}),O.replyCount>0&&o.jsx("span",{children:O.replyCount})]})]})]})]},O.id)}),o.jsx("div",{ref:ge})]})}),o.jsxs("div",{className:"chat-input-v3",children:[o.jsx("button",{className:"btn-icon",title:"",children:o.jsx(VP,{size:20})}),o.jsx("button",{className:"btn-icon",title:" ",children:o.jsx(DP,{size:20})}),o.jsx("input",{ref:Fe,type:"text",placeholder:" ...",value:w,onChange:O=>I(O.target.value),onKeyPress:Vu}),o.jsx("button",{className:"btn-send-v3",onClick:_t,disabled:!w.trim(),children:o.jsx(Py,{size:20})})]})]})}),re&&q&&o.jsxs("div",{className:"thread-panel-v3",children:[o.jsxs("div",{className:"thread-header-v3",children:[o.jsxs("h3",{children:[o.jsx(Us,{size:20}),o.jsx("span",{children:""})]}),o.jsx("button",{className:"btn-icon",onClick:Yn,children:o.jsx(Bs,{size:20})})]}),o.jsxs("div",{className:"thread-content-v3",children:[o.jsxs("div",{className:"thread-parent-v3",children:[o.jsx("div",{className:"message-avatar-v3",children:o.jsx(_s,{size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"message-sender",children:q.senderName}),o.jsx("div",{className:"message-bubble-v3",children:o.jsx("p",{children:q.message})}),o.jsx("span",{className:"message-time",children:Ys(q.timestamp)})]})]}),o.jsx("div",{className:"thread-divider-v3",children:o.jsxs("span",{children:[fe.length," "]})}),o.jsxs("div",{className:"thread-messages-v3",children:[fe.map(O=>o.jsxs("div",{className:"thread-reply-v3",children:[o.jsx("div",{className:"message-avatar-v3",children:o.jsx(_s,{size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"message-sender",children:O.senderName}),o.jsx("div",{className:"message-bubble-v3",children:o.jsx("p",{children:O.message})}),o.jsx("span",{className:"message-time",children:Ys(O.timestamp)})]})]},O.id)),o.jsx("div",{ref:ue})]})]}),o.jsxs("div",{className:"thread-input-v3",children:[o.jsx("input",{ref:be,type:"text",placeholder:" ...",value:ce,onChange:O=>pe(O.target.value),onKeyPress:eo}),o.jsx("button",{className:"btn-send-v3",onClick:tt,disabled:!ce.trim(),children:o.jsx(Py,{size:18})})]})]}),a&&o.jsx("div",{className:"modal-overlay",onClick:()=>c(!1),children:o.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:"  "}),o.jsx("button",{onClick:()=>c(!1),children:o.jsx(Bs,{size:24})})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"  *"}),o.jsx("input",{type:"text",placeholder:": ",value:u,onChange:O=>d(O.target.value),autoFocus:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" "}),o.jsx("textarea",{placeholder:"   ",value:p,onChange:O=>m(O.target.value),rows:3})]}),o.jsxs("div",{className:"form-group-checkbox",children:[o.jsx("input",{type:"checkbox",id:"private-channel",checked:v,onChange:O=>x(O.target.checked)}),o.jsxs("label",{htmlFor:"private-channel",children:[o.jsx(Qo,{size:16}),o.jsx("span",{children:"  "})]})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"btn-secondary",onClick:()=>c(!1),children:""}),o.jsx("button",{className:"btn-primary",onClick:$a,children:" "})]})]})})]})},ab=()=>{const{user:t,userData:e,setUserData:n}=Qt(),[r,s]=D.useState(!1),[i,a]=D.useState(!1),[c,u]=D.useState(""),[d,p]=D.useState({name:"",phone:"",bio:"",location:"",birthDate:""}),m=D.useRef(null);D.useEffect(()=>{e&&(p({name:e.name||"",phone:e.phone||"",bio:e.bio||"",location:e.location||"",birthDate:e.birthDate||""}),u(e.profileImage||""))},[e]);const v=()=>{s(!0)},x=()=>{s(!1),e&&p({name:e.name||"",phone:e.phone||"",bio:e.bio||"",location:e.location||"",birthDate:e.birthDate||""})},A=async()=>{if(t)try{a(!0);const N=ke(W,"employees",t.uid);await Ge(N,{...d,profileImage:c}),n({...e,...d,profileImage:c}),s(!1),alert(" !")}catch(N){console.error("  :",N),alert("  .")}finally{a(!1)}},R=()=>{var N;r&&((N=m.current)==null||N.click())},P=N=>{var M;const C=(M=N.target.files)==null?void 0:M[0];if(!C)return;const b=new FileReader;b.onloadend=()=>{u(b.result)},b.readAsDataURL(C)},j=()=>{if(!d.name)return"?";const N=d.name.split(" ");return N.length>=2?N[0][0]+N[1][0]:d.name.substring(0,2)},_=N=>N?new Date(N).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"";return o.jsxs("div",{className:"profile-page",children:[o.jsxs("div",{className:"profile-header",children:[o.jsxs("div",{className:"profile-header-content",children:[o.jsx("h1",{children:" "}),o.jsx("p",{children:"     "})]}),r?o.jsxs("div",{className:"edit-actions",children:[o.jsxs("button",{className:"btn-cancel",onClick:x,disabled:i,children:[o.jsx(Bs,{size:18}),o.jsx("span",{children:""})]}),o.jsxs("button",{className:"btn-save",onClick:A,disabled:i,children:[o.jsx(Lu,{size:18}),o.jsx("span",{children:i?" ...":""})]})]}):o.jsxs("button",{className:"btn-edit",onClick:v,children:[o.jsx(LP,{size:18}),o.jsx("span",{children:""})]})]}),o.jsxs("div",{className:"profile-content",children:[o.jsx("div",{className:"profile-sidebar",children:o.jsxs("div",{className:"profile-card",children:[o.jsxs("div",{className:"profile-image-section",children:[o.jsxs("div",{className:`profile-image-wrapper ${r?"editable":""}`,onClick:R,children:[c?o.jsx("img",{src:c,alt:"",className:"profile-image"}):o.jsx("div",{className:"profile-image-placeholder",children:o.jsx("span",{className:"profile-initials",children:j()})}),r&&o.jsxs("div",{className:"profile-image-overlay",children:[o.jsx(yP,{size:24}),o.jsx("span",{children:" "})]})]}),o.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:P,style:{display:"none"}})]}),o.jsxs("div",{className:"profile-name-section",children:[r?o.jsx("input",{type:"text",className:"profile-name-input",value:d.name,onChange:N=>p({...d,name:N.target.value}),placeholder:""}):o.jsx("h2",{children:d.name||" "}),o.jsx("p",{className:"profile-email",children:(e==null?void 0:e.email)||(t==null?void 0:t.email)})]}),o.jsxs("div",{className:"profile-info-cards",children:[o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"info-icon",children:o.jsx(mP,{size:20})}),o.jsxs("div",{className:"info-content",children:[o.jsx("span",{className:"info-label",children:""}),o.jsx("span",{className:"info-value",children:(e==null?void 0:e.department)||""})]})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"info-icon",children:o.jsx(fP,{size:20})}),o.jsxs("div",{className:"info-content",children:[o.jsx("span",{className:"info-label",children:""}),o.jsx("span",{className:"info-value",children:(e==null?void 0:e.position)||""})]})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"info-icon",children:o.jsx(Un,{size:20})}),o.jsxs("div",{className:"info-content",children:[o.jsx("span",{className:"info-label",children:""}),o.jsx("span",{className:"info-value",children:e!=null&&e.joinDate?_(e.joinDate):""})]})]})]})]})}),o.jsxs("div",{className:"profile-main",children:[o.jsxs("div",{className:"profile-section",children:[o.jsx("h3",{children:" "}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:[o.jsx(rm,{size:16}),o.jsx("span",{children:""})]}),o.jsx("input",{type:"email",value:(e==null?void 0:e.email)||(t==null?void 0:t.email),disabled:!0,className:"form-input disabled"}),o.jsx("small",{children:"   "})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:[o.jsx(DE,{size:16}),o.jsx("span",{children:""})]}),o.jsx("input",{type:"tel",value:d.phone,onChange:N=>p({...d,phone:N.target.value}),placeholder:"010-1234-5678",disabled:!r,className:`form-input ${r?"":"disabled"}`})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:[o.jsx(CP,{size:16}),o.jsx("span",{children:""})]}),o.jsx("input",{type:"text",value:d.location,onChange:N=>p({...d,location:N.target.value}),placeholder:":  ",disabled:!r,className:`form-input ${r?"":"disabled"}`})]}),o.jsxs("div",{className:"form-group",children:[o.jsxs("label",{children:[o.jsx(gP,{size:16}),o.jsx("span",{children:""})]}),o.jsx("input",{type:"date",value:d.birthDate,onChange:N=>p({...d,birthDate:N.target.value}),disabled:!r,className:`form-input ${r?"":"disabled"}`})]})]}),o.jsxs("div",{className:"profile-section",children:[o.jsx("h3",{children:""}),o.jsx("div",{className:"form-group",children:o.jsx("textarea",{value:d.bio,onChange:N=>p({...d,bio:N.target.value}),placeholder:"  ...",disabled:!r,className:`form-textarea ${r?"":"disabled"}`,rows:6})})]}),o.jsxs("div",{className:"profile-section",children:[o.jsx("h3",{children:" "}),o.jsxs("div",{className:"permissions-grid",children:[o.jsxs("div",{className:"permission-item",children:[o.jsx("span",{className:"permission-label",children:" "}),o.jsx("span",{className:`permission-badge ${e!=null&&e.isAdmin?"active":""}`,children:e!=null&&e.isAdmin?"":""})]}),o.jsxs("div",{className:"permission-item",children:[o.jsx("span",{className:"permission-label",children:" "}),o.jsx("span",{className:`permission-badge ${e!=null&&e.isApprover?"active":""}`,children:e!=null&&e.isApprover?"":""})]}),o.jsxs("div",{className:"permission-item",children:[o.jsx("span",{className:"permission-label",children:" "}),o.jsx("span",{className:"permission-badge active",children:""})]})]})]})]})]})]})},lb=()=>{const{userData:t}=Qt(),[e,n]=D.useState(!0),[r,s]=D.useState(!0),[i,a]=D.useState(!0),[c,u]=D.useState(!0),[d,p]=D.useState(!0),[m,v]=D.useState("light"),[x,A]=D.useState("ko"),[R,P]=D.useState("");D.useEffect(()=>{const N=localStorage.getItem("userSettings");if(N){const C=JSON.parse(N);n(C.emailNotifications??!0),s(C.pushNotifications??!0),a(C.messageNotifications??!0),u(C.approvalNotifications??!0),p(C.leaveNotifications??!0),v(C.theme||"light"),A(C.language||"ko")}},[]);const j=()=>{const N={emailNotifications:e,pushNotifications:r,messageNotifications:i,approvalNotifications:c,leaveNotifications:d,theme:m,language:x};localStorage.setItem("userSettings",JSON.stringify(N)),m==="dark"?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.remove("dark-theme"),P("!"),setTimeout(()=>P(""),3e3)},_=N=>{v(N),N==="dark"?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.remove("dark-theme")};return o.jsxs("div",{className:"settings-page",children:[o.jsxs("div",{className:"settings-header",children:[o.jsxs("div",{className:"settings-header-content",children:[o.jsxs("h1",{children:[o.jsx(by,{size:28}),o.jsx("span",{children:""})]}),o.jsx("p",{children:"      "})]}),o.jsxs("button",{className:"btn-save-settings",onClick:j,children:[o.jsx(Lu,{size:18}),o.jsx("span",{children:" "})]})]}),R&&o.jsxs("div",{className:"save-status-banner",children:[o.jsx(_P,{size:18}),o.jsx("span",{children:R})]}),o.jsxs("div",{className:"settings-content",children:[o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx(nf,{size:20}),o.jsx("h2",{children:" "})]}),o.jsx("p",{className:"section-description",children:"   "}),o.jsxs("div",{className:"settings-group",children:[o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx(rm,{size:18}),o.jsxs("div",{children:[o.jsx("h3",{children:" "}),o.jsx("p",{children:"   "})]})]}),o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:e,onChange:N=>n(N.target.checked)}),o.jsx("span",{className:"toggle-slider"})]})]}),o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx(nf,{size:18}),o.jsxs("div",{children:[o.jsx("h3",{children:" "}),o.jsx("p",{children:"   "})]})]}),o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:N=>s(N.target.checked)}),o.jsx("span",{className:"toggle-slider"})]})]}),o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx(Us,{size:18}),o.jsxs("div",{children:[o.jsx("h3",{children:" "}),o.jsx("p",{children:"     "})]})]}),o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:i,onChange:N=>a(N.target.checked)}),o.jsx("span",{className:"toggle-slider"})]})]}),o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx(Vd,{size:18}),o.jsxs("div",{children:[o.jsx("h3",{children:"  "}),o.jsx("p",{children:"     "})]})]}),o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:c,onChange:N=>u(N.target.checked)}),o.jsx("span",{className:"toggle-slider"})]})]}),o.jsxs("div",{className:"setting-item",children:[o.jsxs("div",{className:"setting-info",children:[o.jsx(Vd,{size:18}),o.jsxs("div",{children:[o.jsx("h3",{children:" "}),o.jsx("p",{children:" /   "})]})]}),o.jsxs("label",{className:"toggle-switch",children:[o.jsx("input",{type:"checkbox",checked:d,onChange:N=>p(N.target.checked)}),o.jsx("span",{className:"toggle-slider"})]})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx(Ry,{size:20}),o.jsx("h2",{children:" "})]}),o.jsx("p",{className:"section-description",children:"  "}),o.jsxs("div",{className:"theme-options",children:[o.jsxs("div",{className:`theme-card ${m==="light"?"active":""}`,onClick:()=>_("light"),children:[o.jsx("div",{className:"theme-preview light",children:o.jsx(UP,{size:32})}),o.jsx("h3",{children:" "}),o.jsx("p",{children:"   "})]}),o.jsxs("div",{className:`theme-card ${m==="dark"?"active":""}`,onClick:()=>_("dark"),children:[o.jsx("div",{className:"theme-preview dark",children:o.jsx(Ry,{size:32})}),o.jsx("h3",{children:" "}),o.jsx("p",{children:"    "})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx(SP,{size:20}),o.jsx("h2",{children:" "})]}),o.jsx("p",{className:"section-description",children:"   "}),o.jsx("div",{className:"language-select",children:o.jsxs("select",{value:x,onChange:N=>A(N.target.value),className:"select-input",children:[o.jsx("option",{value:"ko",children:""}),o.jsx("option",{value:"en",children:"English"}),o.jsx("option",{value:"ja",children:""})]})})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx(Qo,{size:20}),o.jsx("h2",{children:" "})]}),o.jsx("p",{className:"section-description",children:"  "}),o.jsxs("div",{className:"security-actions",children:[o.jsxs("button",{className:"security-btn",children:[o.jsx(Qo,{size:18}),o.jsxs("div",{children:[o.jsx("h3",{children:" "}),o.jsx("p",{children:"   "})]})]}),o.jsxs("button",{className:"security-btn",children:[o.jsx(Vd,{size:18}),o.jsxs("div",{children:[o.jsx("h3",{children:"2 "}),o.jsx("p",{children:"    "})]})]})]})]}),o.jsxs("div",{className:"settings-section",children:[o.jsxs("div",{className:"section-header",children:[o.jsx(by,{size:20}),o.jsx("h2",{children:" "})]}),o.jsxs("div",{className:"account-info",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:" ID"}),o.jsx("span",{className:"info-value",children:t==null?void 0:t.email})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:" "}),o.jsx("span",{className:"info-value",children:t!=null&&t.isAdmin?"":" "})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{className:"info-label",children:""}),o.jsx("span",{className:"info-value",children:t!=null&&t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString("ko-KR"):" "})]})]})]})]})]})};function cb(){const[t,e]=D.useState("dashboard"),[n,r]=D.useState([]),[s,i]=D.useState(window.innerWidth>768),{userData:a,isAdmin:c,isSubAdmin:u,isApprover:d}=Qt();D.useEffect(()=>{p()},[]),D.useEffect(()=>{const x=()=>{window.innerWidth>768&&i(!0)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const p=async()=>{try{const A=(await Te(te(W,"employees"))).docs.map(R=>({id:R.id,...R.data()}));r(A)}catch(x){console.error("   :",x)}},m=()=>{i(!s)},v=(x,A)=>{e(x)};return o.jsxs("div",{className:"app-container",children:[o.jsx(qP,{onMenuToggle:m,onNavigate:v}),o.jsxs("div",{className:"main-content",children:[o.jsx(HP,{activeTab:t,setActiveTab:e,isOpen:s,onClose:()=>i(!1)}),o.jsxs("div",{className:`content ${s?"menu-open":"menu-closed"}`,children:[t==="dashboard"&&o.jsx(WP,{setActiveTab:e}),t==="calendar"&&o.jsx(QP,{employees:n}),t==="annualLeave"&&o.jsx(JP,{}),t==="approval"&&o.jsx(ZP,{}),t==="ptSchedule"&&o.jsx(eb,{}),t==="department"&&o.jsx(tb,{}),t==="notes"&&o.jsx(ib,{}),t==="messenger"&&o.jsx(ob,{}),t==="admin"&&o.jsx(nb,{}),t==="approval-line"&&o.jsx(rb,{}),t==="admin-leave"&&o.jsx(sb,{}),t==="profile"&&o.jsx(ab,{}),t==="settings"&&o.jsx(lb,{}),t!=="dashboard"&&t!=="calendar"&&t!=="annualLeave"&&t!=="approval"&&t!=="ptSchedule"&&t!=="department"&&t!=="notes"&&t!=="messenger"&&t!=="admin"&&t!=="approval-line"&&t!=="admin-leave"&&t!=="profile"&&t!=="settings"&&o.jsxs("div",{className:"content-placeholder",children:[o.jsxs("h2",{children:[t," "]}),o.jsx("p",{children:" ..."})]})]})]})]})}function ub(){const{user:t,loading:e,initialize:n}=Qt();return D.useEffect(()=>{const r=n();return()=>r()},[n]),e?o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--text-secondary)"},children:"..."}):t?o.jsx(cb,{}):o.jsx(lP,{})}Fd.createRoot(document.getElementById("root")).render(o.jsx(cf.StrictMode,{children:o.jsx(ub,{})}));
//# sourceMappingURL=index-GVvBXDzi.js.map
