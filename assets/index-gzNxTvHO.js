import{r as l,a as Vt,g as Wt,R as Ts}from"./react-vendor-F9Y4d3HK.js";import{_ as Kt,C as Yt,r as Os,S as Xt,F as Gt,g as Qt,a as ms,b as Zt,c as Jt,d as ea,i as sa,e as ta,f as aa,s as na,h as ia,o as la,j as rs,k as le,l as O,m as se,q as ie,n as Je,w as W,p as Ie,t as ue,u as xe,v as Ce,x as Be,y as cs,z as Me}from"./firebase-vendor-CZQfbTF5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();var ot={exports:{}},ps={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=l,ca=Symbol.for("react.element"),oa=Symbol.for("react.fragment"),da=Object.prototype.hasOwnProperty,ha=ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ua={key:!0,ref:!0,__self:!0,__source:!0};function dt(s,t,a){var i,n={},r=null,o=null;a!==void 0&&(r=""+a),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)da.call(t,i)&&!ua.hasOwnProperty(i)&&(n[i]=t[i]);if(s&&s.defaultProps)for(i in t=s.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:ca,type:s,key:r,ref:o,props:n,_owner:ha.current}}ps.Fragment=oa;ps.jsx=dt;ps.jsxs=dt;ot.exports=ps;var e=ot.exports,Cs={},Fs=Vt;Cs.createRoot=Fs.createRoot,Cs.hydrateRoot=Fs.hydrateRoot;const ma={},Bs=s=>{let t;const a=new Set,i=(E,D)=>{const z=typeof E=="function"?E(t):E;if(!Object.is(z,t)){const h=t;t=D??(typeof z!="object"||z===null)?z:Object.assign({},t,z),a.forEach(C=>C(t,h))}},n=()=>t,d={setState:i,getState:n,getInitialState:()=>j,subscribe:E=>(a.add(E),()=>a.delete(E)),destroy:()=>{(ma?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},j=t=s(i,n,d);return d},pa=s=>s?Bs(s):Bs;var ht={exports:{}},ut={},mt={exports:{}},pt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xe=l;function xa(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var ja=typeof Object.is=="function"?Object.is:xa,va=Xe.useState,fa=Xe.useEffect,ya=Xe.useLayoutEffect,ga=Xe.useDebugValue;function Na(s,t){var a=t(),i=va({inst:{value:a,getSnapshot:t}}),n=i[0].inst,r=i[1];return ya(function(){n.value=a,n.getSnapshot=t,Ns(n)&&r({inst:n})},[s,a,t]),fa(function(){return Ns(n)&&r({inst:n}),s(function(){Ns(n)&&r({inst:n})})},[s]),ga(a),a}function Ns(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!ja(s,a)}catch{return!0}}function ba(s,t){return t()}var ka=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ba:Na;pt.useSyncExternalStore=Xe.useSyncExternalStore!==void 0?Xe.useSyncExternalStore:ka;mt.exports=pt;var wa=mt.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xs=l,Sa=wa;function Ca(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Ea=typeof Object.is=="function"?Object.is:Ca,Da=Sa.useSyncExternalStore,_a=xs.useRef,Ta=xs.useEffect,Aa=xs.useMemo,Ma=xs.useDebugValue;ut.useSyncExternalStoreWithSelector=function(s,t,a,i,n){var r=_a(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=Aa(function(){function d(h){if(!j){if(j=!0,E=h,h=i(h),n!==void 0&&o.hasValue){var C=o.value;if(n(C,h))return D=C}return D=h}if(C=D,Ea(E,h))return C;var N=i(h);return n!==void 0&&n(C,N)?(E=h,C):(E=h,D=N)}var j=!1,E,D,z=a===void 0?null:a;return[function(){return d(t())},z===null?void 0:function(){return d(z())}]},[t,a,i,n]);var f=Da(s,r[0],r[1]);return Ta(function(){o.hasValue=!0,o.value=f},[f]),Ma(f),f};ht.exports=ut;var La=ht.exports;const Ra=Wt(La),xt={},{useDebugValue:za}=Ts,{useSyncExternalStoreWithSelector:Ia}=Ra;let qs=!1;const Pa=s=>s;function $a(s,t=Pa,a){(xt?"production":void 0)!=="production"&&a&&!qs&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qs=!0);const i=Ia(s.subscribe,s.getState,s.getServerState||s.getInitialState,t,a);return za(i),i}const Hs=s=>{(xt?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof s=="function"?pa(s):s,a=(i,n)=>$a(t,i,n);return Object.assign(a,t),a},Ua=s=>s?Hs(s):Hs;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="firebasestorage.googleapis.com",vt="storageBucket",Oa=2*60*1e3,Fa=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be extends Gt{constructor(t,a,i=0){super(bs(t),`Firebase Storage: ${a} (${bs(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,be.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return bs(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ne;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ne||(Ne={}));function bs(s){return"storage/"+s}function As(){const s="An unknown error occurred, please check the error payload for server response.";return new be(Ne.UNKNOWN,s)}function Ba(s){return new be(Ne.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function qa(s){return new be(Ne.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ha(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new be(Ne.UNAUTHENTICATED,s)}function Va(){return new be(Ne.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Wa(s){return new be(Ne.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Ka(){return new be(Ne.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ya(){return new be(Ne.CANCELED,"User canceled the upload/download.")}function Xa(s){return new be(Ne.INVALID_URL,"Invalid URL '"+s+"'.")}function Ga(s){return new be(Ne.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function Qa(){return new be(Ne.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vt+"' property when initializing the app?")}function Za(){return new be(Ne.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ja(){return new be(Ne.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function en(s){return new be(Ne.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Es(s){return new be(Ne.INVALID_ARGUMENT,s)}function ft(){return new be(Ne.APP_DELETED,"The Firebase app was deleted.")}function sn(s){return new be(Ne.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function es(s,t){return new be(Ne.INVALID_FORMAT,"String does not match format '"+s+"': "+t)}function Qe(s){throw new be(Ne.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t,a){this.bucket=t,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,a){let i;try{i=Ee.makeFromUrl(t,a)}catch{return new Ee(t,"")}if(i.path==="")return i;throw Ga(t)}static makeFromUrl(t,a){let i=null;const n="([A-Za-z0-9.\\-_]+)";function r(m){m.path.charAt(m.path.length-1)==="/"&&(m.path_=m.path_.slice(0,-1))}const o="(/(.*))?$",f=new RegExp("^gs://"+n+o,"i"),d={bucket:1,path:3};function j(m){m.path_=decodeURIComponent(m.path)}const E="v[A-Za-z0-9_]+",D=a.replace(/[.]/g,"\\."),z="(/([^?#]*).*)?$",h=new RegExp(`^https?://${D}/${E}/b/${n}/o${z}`,"i"),C={bucket:1,path:3},N=a===jt?"(?:storage.googleapis.com|storage.cloud.google.com)":a,g="([^?#]*)",I=new RegExp(`^https?://${N}/${n}/${g}`,"i"),y=[{regex:f,indices:d,postModify:r},{regex:h,indices:C,postModify:j},{regex:I,indices:{bucket:1,path:2},postModify:j}];for(let m=0;m<y.length;m++){const v=y[m],P=v.regex.exec(t);if(P){const R=P[v.indices.bucket];let T=P[v.indices.path];T||(T=""),i=new Ee(R,T),v.postModify(i);break}}if(i==null)throw Xa(t);return i}}class tn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(s,t,a){let i=1,n=null,r=null,o=!1,f=0;function d(){return f===2}let j=!1;function E(...g){j||(j=!0,t.apply(null,g))}function D(g){n=setTimeout(()=>{n=null,s(h,d())},g)}function z(){r&&clearTimeout(r)}function h(g,...I){if(j){z();return}if(g){z(),E.call(null,g,...I);return}if(d()||o){z(),E.call(null,g,...I);return}i<64&&(i*=2);let y;f===1?(f=2,y=0):y=(i+Math.random())*1e3,D(y)}let C=!1;function N(g){C||(C=!0,z(),!j&&(n!==null?(g||(f=2),clearTimeout(n),D(0)):g||(f=1)))}return D(0),r=setTimeout(()=>{o=!0,N(!0)},a),N}function nn(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(s){return s!==void 0}function rn(s){return typeof s=="object"&&!Array.isArray(s)}function Ms(s){return typeof s=="string"||s instanceof String}function Vs(s){return Ls()&&s instanceof Blob}function Ls(){return typeof Blob<"u"}function Ws(s,t,a,i){if(i<t)throw Es(`Invalid value for '${s}'. Expected ${t} or greater.`);if(i>a)throw Es(`Invalid value for '${s}'. Expected ${a} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(s,t,a){let i=t;return a==null&&(i=`https://${t}`),`${a}://${i}/v0${s}`}function yt(s){const t=encodeURIComponent;let a="?";for(const i in s)if(s.hasOwnProperty(i)){const n=t(i)+"="+t(s[i]);a=a+n+"&"}return a=a.slice(0,-1),a}var qe;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(qe||(qe={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(s,t){const a=s>=500&&s<600,n=[408,429].indexOf(s)!==-1,r=t.indexOf(s)!==-1;return a||n||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t,a,i,n,r,o,f,d,j,E,D,z=!0){this.url_=t,this.method_=a,this.headers_=i,this.body_=n,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=f,this.errorCallback_=d,this.timeout_=j,this.progressCallback_=E,this.connectionFactory_=D,this.retry=z,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,C)=>{this.resolve_=h,this.reject_=C,this.start_()})}start_(){const t=(i,n)=>{if(n){i(!1,new ns(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=f=>{const d=f.loaded,j=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,j)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const f=r.getErrorCode()===qe.NO_ERROR,d=r.getStatus();if(!f||cn(d,this.additionalRetryCodes_)&&this.retry){const E=r.getErrorCode()===qe.ABORT;i(!1,new ns(!1,null,E));return}const j=this.successCodes_.indexOf(d)!==-1;i(!0,new ns(j,r))})},a=(i,n)=>{const r=this.resolve_,o=this.reject_,f=n.connection;if(n.wasSuccessCode)try{const d=this.callback_(f,f.getResponse());ln(d)?r(d):r()}catch(d){o(d)}else if(f!==null){const d=As();d.serverResponse=f.getErrorText(),this.errorCallback_?o(this.errorCallback_(f,d)):o(d)}else if(n.canceled){const d=this.appDelete_?ft():Ya();o(d)}else{const d=Ka();o(d)}};this.canceled_?a(!1,new ns(!1,null,!0)):this.backoffId_=an(t,a,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&nn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ns{constructor(t,a,i){this.wasSuccessCode=t,this.connection=a,this.canceled=!!i}}function dn(s,t){t!==null&&t.length>0&&(s.Authorization="Firebase "+t)}function hn(s,t){s["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function un(s,t){t&&(s["X-Firebase-GMPID"]=t)}function mn(s,t){t!==null&&(s["X-Firebase-AppCheck"]=t)}function pn(s,t,a,i,n,r,o=!0){const f=yt(s.urlParams),d=s.url+f,j=Object.assign({},s.headers);return un(j,t),dn(j,a),hn(j,r),mn(j,i),new on(d,s.method,j,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jn(...s){const t=xn();if(t!==void 0){const a=new t;for(let i=0;i<s.length;i++)a.append(s[i]);return a.getBlob()}else{if(Ls())return new Blob(s);throw new be(Ne.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vn(s,t,a){return s.webkitSlice?s.webkitSlice(t,a):s.mozSlice?s.mozSlice(t,a):s.slice?s.slice(t,a):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(s){if(typeof atob>"u")throw en("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ks{constructor(t,a){this.data=t,this.contentType=a||null}}function yn(s,t){switch(s){case _e.RAW:return new ks(gt(t));case _e.BASE64:case _e.BASE64URL:return new ks(Nt(s,t));case _e.DATA_URL:return new ks(Nn(t),bn(t))}throw As()}function gt(s){const t=[];for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(a<s.length-1&&(s.charCodeAt(a+1)&64512)===56320))t.push(239,191,189);else{const r=i,o=s.charCodeAt(++a);i=65536|(r&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function gn(s){let t;try{t=decodeURIComponent(s)}catch{throw es(_e.DATA_URL,"Malformed data URL.")}return gt(t)}function Nt(s,t){switch(s){case _e.BASE64:{const n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r)throw es(s,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case _e.BASE64URL:{const n=t.indexOf("+")!==-1,r=t.indexOf("/")!==-1;if(n||r)throw es(s,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let a;try{a=fn(t)}catch(n){throw n.message.includes("polyfill")?n:es(s,"Invalid character found")}const i=new Uint8Array(a.length);for(let n=0;n<a.length;n++)i[n]=a.charCodeAt(n);return i}class bt{constructor(t){this.base64=!1,this.contentType=null;const a=t.match(/^data:([^,]+)?,/);if(a===null)throw es(_e.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=a[1]||null;i!=null&&(this.base64=kn(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function Nn(s){const t=new bt(s);return t.base64?Nt(_e.BASE64,t.rest):gn(t.rest)}function bn(s){return new bt(s).contentType}function kn(s,t){return s.length>=t.length?s.substring(s.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t,a){let i=0,n="";Vs(t)?(this.data_=t,i=t.size,n=t.type):t instanceof ArrayBuffer?(a?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(a?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,a){if(Vs(this.data_)){const i=this.data_,n=vn(i,t,a);return n===null?null:new Pe(n)}else{const i=new Uint8Array(this.data_.buffer,t,a-t);return new Pe(i,!0)}}static getBlob(...t){if(Ls()){const a=t.map(i=>i instanceof Pe?i.data_:i);return new Pe(jn.apply(null,a))}else{const a=t.map(o=>Ms(o)?yn(_e.RAW,o).data:o.data_);let i=0;a.forEach(o=>{i+=o.byteLength});const n=new Uint8Array(i);let r=0;return a.forEach(o=>{for(let f=0;f<o.length;f++)n[r++]=o[f]}),new Pe(n,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(s){let t;try{t=JSON.parse(s)}catch{return null}return rn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(s){if(s.length===0)return null;const t=s.lastIndexOf("/");return t===-1?"":s.slice(0,t)}function Sn(s,t){const a=t.split("/").filter(i=>i.length>0).join("/");return s.length===0?a:s+"/"+a}function wt(s){const t=s.lastIndexOf("/",s.length-2);return t===-1?s:s.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(s,t){return t}class ke{constructor(t,a,i,n){this.server=t,this.local=a||t,this.writable=!!i,this.xform=n||Cn}}let is=null;function En(s){return!Ms(s)||s.length<2?s:wt(s)}function St(){if(is)return is;const s=[];s.push(new ke("bucket")),s.push(new ke("generation")),s.push(new ke("metageneration")),s.push(new ke("name","fullPath",!0));function t(r,o){return En(o)}const a=new ke("name");a.xform=t,s.push(a);function i(r,o){return o!==void 0?Number(o):o}const n=new ke("size");return n.xform=i,s.push(n),s.push(new ke("timeCreated")),s.push(new ke("updated")),s.push(new ke("md5Hash",null,!0)),s.push(new ke("cacheControl",null,!0)),s.push(new ke("contentDisposition",null,!0)),s.push(new ke("contentEncoding",null,!0)),s.push(new ke("contentLanguage",null,!0)),s.push(new ke("contentType",null,!0)),s.push(new ke("metadata","customMetadata",!0)),is=s,is}function Dn(s,t){function a(){const i=s.bucket,n=s.fullPath,r=new Ee(i,n);return t._makeStorageReference(r)}Object.defineProperty(s,"ref",{get:a})}function _n(s,t,a){const i={};i.type="file";const n=a.length;for(let r=0;r<n;r++){const o=a[r];i[o.local]=o.xform(i,t[o.server])}return Dn(i,s),i}function Ct(s,t,a){const i=kt(t);return i===null?null:_n(s,i,a)}function Tn(s,t,a,i){const n=kt(t);if(n===null||!Ms(n.downloadTokens))return null;const r=n.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(j=>{const E=s.bucket,D=s.fullPath,z="/b/"+o(E)+"/o/"+o(D),h=Rs(z,a,i),C=yt({alt:"media",token:j});return h+C})[0]}function An(s,t){const a={},i=t.length;for(let n=0;n<i;n++){const r=t[n];r.writable&&(a[r.server]=s[r.local])}return JSON.stringify(a)}class Et{constructor(t,a,i,n){this.url=t,this.method=a,this.handler=i,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(s){if(!s)throw As()}function Mn(s,t){function a(i,n){const r=Ct(s,n,t);return Dt(r!==null),r}return a}function Ln(s,t){function a(i,n){const r=Ct(s,n,t);return Dt(r!==null),Tn(r,n,s.host,s._protocol)}return a}function _t(s){function t(a,i){let n;return a.getStatus()===401?a.getErrorText().includes("Firebase App Check token is invalid")?n=Va():n=Ha():a.getStatus()===402?n=qa(s.bucket):a.getStatus()===403?n=Wa(s.path):n=i,n.status=a.getStatus(),n.serverResponse=i.serverResponse,n}return t}function Rn(s){const t=_t(s);function a(i,n){let r=t(i,n);return i.getStatus()===404&&(r=Ba(s.path)),r.serverResponse=n.serverResponse,r}return a}function zn(s,t,a){const i=t.fullServerUrl(),n=Rs(i,s.host,s._protocol),r="GET",o=s.maxOperationRetryTime,f=new Et(n,r,Ln(s,a),o);return f.errorHandler=Rn(t),f}function In(s,t){return s&&s.contentType||t&&t.type()||"application/octet-stream"}function Pn(s,t,a){const i=Object.assign({},a);return i.fullPath=s.path,i.size=t.size(),i.contentType||(i.contentType=In(null,t)),i}function $n(s,t,a,i,n){const r=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function f(){let y="";for(let m=0;m<2;m++)y=y+Math.random().toString().slice(2);return y}const d=f();o["Content-Type"]="multipart/related; boundary="+d;const j=Pn(t,i,n),E=An(j,a),D="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+d+`\r
Content-Type: `+j.contentType+`\r
\r
`,z=`\r
--`+d+"--",h=Pe.getBlob(D,i,z);if(h===null)throw Za();const C={name:j.fullPath},N=Rs(r,s.host,s._protocol),g="POST",I=s.maxUploadRetryTime,b=new Et(N,g,Mn(s,a),I);return b.urlParams=C,b.headers=o,b.body=h.uploadData(),b.errorHandler=_t(t),b}class Un{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qe.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qe.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qe.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,a,i,n){if(this.sent_)throw Qe("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(a,t,!0),n!==void 0)for(const r in n)n.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,n[r].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qe("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qe("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qe("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qe("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class On extends Un{initXhr(){this.xhr_.responseType="text"}}function Tt(){return new On}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t,a){this._service=t,a instanceof Ee?this._location=a:this._location=Ee.makeFromUrl(a,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,a){return new He(t,a)}get root(){const t=new Ee(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wt(this._location.path)}get storage(){return this._service}get parent(){const t=wn(this._location.path);if(t===null)return null;const a=new Ee(this._location.bucket,t);return new He(this._service,a)}_throwIfRoot(t){if(this._location.path==="")throw sn(t)}}function Fn(s,t,a){s._throwIfRoot("uploadBytes");const i=$n(s.storage,s._location,St(),new Pe(t,!0),a);return s.storage.makeRequestWithTokens(i,Tt).then(n=>({metadata:n,ref:s}))}function Bn(s){s._throwIfRoot("getDownloadURL");const t=zn(s.storage,s._location,St());return s.storage.makeRequestWithTokens(t,Tt).then(a=>{if(a===null)throw Ja();return a})}function qn(s,t){const a=Sn(s._location.path,t),i=new Ee(s._location.bucket,a);return new He(s.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(s){return/^[A-Za-z]+:\/\//.test(s)}function Vn(s,t){return new He(s,t)}function At(s,t){if(s instanceof zs){const a=s;if(a._bucket==null)throw Qa();const i=new He(a,a._bucket);return t!=null?At(i,t):i}else return t!==void 0?qn(s,t):s}function Wn(s,t){if(t&&Hn(t)){if(s instanceof zs)return Vn(s,t);throw Es("To use ref(service, url), the first argument must be a Storage instance.")}else return At(s,t)}function Ks(s,t){const a=t==null?void 0:t[vt];return a==null?null:Ee.makeFromBucketSpec(a,s)}function Kn(s,t,a,i={}){s.host=`${t}:${a}`,s._protocol="http";const{mockUserToken:n}=i;n&&(s._overrideAuthToken=typeof n=="string"?n:ea(n,s.app.options.projectId))}class zs{constructor(t,a,i,n,r){this.app=t,this._authProvider=a,this._appCheckProvider=i,this._url=n,this._firebaseVersion=r,this._bucket=null,this._host=jt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Oa,this._maxUploadRetryTime=Fa,this._requests=new Set,n!=null?this._bucket=Ee.makeFromBucketSpec(n,this._host):this._bucket=Ks(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ee.makeFromBucketSpec(this._url,t):this._bucket=Ks(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ws("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ws("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const a=await t.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new He(this,t)}_makeRequest(t,a,i,n,r=!0){if(this._deleted)return new tn(ft());{const o=pn(t,this._appId,i,n,a,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,a){const[i,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,a,i,n).getPromise()}}const Ys="@firebase/storage",Xs="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="storage";function Yn(s,t,a){return s=ms(s),Fn(s,t,a)}function Xn(s){return s=ms(s),Bn(s)}function Gn(s,t){return s=ms(s),Wn(s,t)}function Qn(s=Qt(),t){s=ms(s);const i=Zt(s,Mt).getImmediate({identifier:t}),n=Jt("storage");return n&&Zn(i,...n),i}function Zn(s,t,a,i={}){Kn(s,t,a,i)}function Jn(s,{instanceIdentifier:t}){const a=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),n=s.getProvider("app-check-internal");return new zs(a,i,n,t,Xt)}function ei(){Kt(new Yt(Mt,Jn,"PUBLIC").setMultipleInstances(!0)),Os(Ys,Xs,""),Os(Ys,Xs,"esm2017")}ei();const si={apiKey:"AIzaSyC_hwBHgdLWmI6z920PNgmWTKYSl_TZ4I0",authDomain:"work-calendar-839f2.firebaseapp.com",projectId:"work-calendar-839f2",storageBucket:"work-calendar-839f2.firebasestorage.app",messagingSenderId:"823701886482",appId:"1:823701886482:web:4a368e517a6d158ea12acb"},Is=sa(si),ws=ta(Is),k=aa(Is),ti=Qn(Is),we=Ua((s,t)=>({user:null,userData:null,loading:!0,isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1,initialize:()=>la(ws,async i=>{if(i)try{const n=await rs(le(k,"employees",i.uid));if(n.exists()){const r=n.data();s({user:i,userData:r,loading:!1,isAdmin:r.isAdmin===!0,isSubAdmin:r.isSubAdmin===!0,isApprover:r.isApprover===!0,isPTScheduleEditor:r.isPTScheduleEditor===!0})}else s({user:i,loading:!1})}catch(n){console.error("사용자 데이터 로드 실패:",n),s({loading:!1})}else s({user:null,userData:null,loading:!1,isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1})}),login:async(a,i)=>{try{return await ia(ws,a,i),{success:!0}}catch(n){return console.error("로그인 실패:",n),{success:!1,error:n.message}}},logout:async()=>{try{return await na(ws),s({user:null,userData:null,isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1}),{success:!0}}catch(a){return console.error("로그아웃 실패:",a),{success:!1,error:a.message}}},setUserData:a=>{s({userData:a})}}));function ai(){const[s,t]=l.useState(""),[a,i]=l.useState(""),[n,r]=l.useState(""),[o,f]=l.useState(!1),{login:d}=we(),j=async E=>{E.preventDefault(),r(""),f(!0),(await d(s,a)).success||r("로그인에 실패했습니다. 이메일과 비밀번호를 확인해주세요."),f(!1)};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("h1",{children:"ONFL 그룹웨어"}),e.jsx("p",{children:"캘린더 · 근태 · 연차 관리"})]}),e.jsxs("form",{onSubmit:j,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"이메일"}),e.jsx("input",{id:"email",type:"email",value:s,onChange:E=>t(E.target.value),placeholder:"example@company.com",required:!0,autoComplete:"email"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"비밀번호"}),e.jsx("input",{id:"password",type:"password",value:a,onChange:E=>i(E.target.value),placeholder:"••••••••",required:!0,autoComplete:"current-password"})]}),n&&e.jsx("div",{className:"error-message",children:n}),e.jsx("button",{type:"submit",className:"login-button",disabled:o,children:o?"로그인 중...":"로그인"})]})]})})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ni={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),F=(s,t)=>{const a=l.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:f="",children:d,...j},E)=>l.createElement("svg",{ref:E,...ni,width:n,height:n,stroke:i,strokeWidth:o?Number(r)*24/Number(n):r,className:["lucide",`lucide-${ii(s)}`,f].join(" "),...j},[...t.map(([D,z])=>l.createElement(D,z)),...Array.isArray(d)?d:[d]]));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=F("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=F("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=F("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=F("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=F("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=F("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=F("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=F("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=F("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=F("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=F("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=F("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=F("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=F("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=F("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=F("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=F("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=F("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=F("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=F("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=F("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=F("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=F("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=F("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=F("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=F("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=F("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=F("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=F("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=F("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=F("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=F("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=F("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=F("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=F("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=F("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=F("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=F("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=F("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=F("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=F("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=F("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=F("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=F("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=F("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=F("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=F("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=F("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=F("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=F("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=F("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=F("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=F("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=F("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=F("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=F("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=F("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=F("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=F("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$i=({isOpen:s,onClose:t,onNavigate:a})=>{const{user:i}=we(),[n,r]=l.useState(""),[o,f]=l.useState({notes:[],messages:[],events:[],employees:[],projects:[]}),[d,j]=l.useState(0),[E,D]=l.useState(!1),[z,h]=l.useState([]),C=l.useRef(null),N=l.useRef(null);l.useEffect(()=>{const u=c=>{if(!((c.ctrlKey||c.metaKey)&&c.key==="k"&&(c.preventDefault(),!s&&a))&&(c.key==="Escape"&&s&&t(),s&&n)){const A=P();c.key==="ArrowDown"?(c.preventDefault(),j(S=>(S+1)%A)):c.key==="ArrowUp"?(c.preventDefault(),j(S=>(S-1+A)%A)):c.key==="Enter"&&(c.preventDefault(),R())}};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[s,n,d]),l.useEffect(()=>{s&&C.current&&C.current.focus()},[s]),l.useEffect(()=>{const u=localStorage.getItem("recentSearches");u&&h(JSON.parse(u))},[]),l.useEffect(()=>(n.length>=2?(N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{g(n)},300)):f({notes:[],messages:[],events:[],employees:[],projects:[]}),()=>{N.current&&clearTimeout(N.current)}),[n]);const g=async u=>{if(i){D(!0);try{const c=await Promise.all([I(u),b(u),y(u),m(u),v(u)]);f({notes:c[0],messages:c[1],events:c[2],employees:c[3],projects:c[4]}),j(0)}catch(c){console.error("검색 실패:",c)}D(!1)}},I=async u=>{try{const c=O(k,"notes");return(await se(c)).docs.map(S=>({id:S.id,...S.data()})).filter(S=>{var X,U;return S.userId===i.uid&&(((X=S.title)==null?void 0:X.toLowerCase().includes(u.toLowerCase()))||((U=S.content)==null?void 0:U.toLowerCase().includes(u.toLowerCase())))}).slice(0,5)}catch(c){return console.error("노트 검색 실패:",c),[]}},b=async u=>{try{const c=O(k,"directMessages");return(await se(ie(c,Je(100)))).docs.map(S=>({id:S.id,...S.data()})).filter(S=>{var X;return(S.senderId===i.uid||S.receiverId===i.uid)&&((X=S.message)==null?void 0:X.toLowerCase().includes(u.toLowerCase()))}).slice(0,5)}catch(c){return console.error("메시지 검색 실패:",c),[]}},y=async u=>{try{const c=O(k,"schedules");return(await se(c)).docs.map(S=>({id:S.id,...S.data()})).filter(S=>{var X,U;return S.userId===i.uid&&(((X=S.title)==null?void 0:X.toLowerCase().includes(u.toLowerCase()))||((U=S.description)==null?void 0:U.toLowerCase().includes(u.toLowerCase())))}).slice(0,5)}catch(c){return console.error("일정 검색 실패:",c),[]}},m=async u=>{try{const c=O(k,"employees");return(await se(c)).docs.map(S=>({id:S.id,...S.data()})).filter(S=>{var X,U,ce;return((X=S.name)==null?void 0:X.toLowerCase().includes(u.toLowerCase()))||((U=S.email)==null?void 0:U.toLowerCase().includes(u.toLowerCase()))||((ce=S.department)==null?void 0:ce.toLowerCase().includes(u.toLowerCase()))}).slice(0,5)}catch(c){return console.error("사원 검색 실패:",c),[]}},v=async u=>{try{const c=O(k,"projects");return(await se(c)).docs.map(S=>({id:S.id,...S.data()})).filter(S=>{var X;return(S.ownerId===i.uid||S.type==="team")&&((X=S.name)==null?void 0:X.toLowerCase().includes(u.toLowerCase()))}).slice(0,5)}catch(c){return console.error("프로젝트 검색 실패:",c),[]}},P=()=>Object.values(o).reduce((u,c)=>u+c.length,0),R=()=>{const u=[...o.notes.map(c=>({...c,type:"note"})),...o.messages.map(c=>({...c,type:"message"})),...o.events.map(c=>({...c,type:"event"})),...o.employees.map(c=>({...c,type:"employee"})),...o.projects.map(c=>({...c,type:"project"}))];u[d]&&T(u[d])},T=u=>{const c=[n,...z.filter(A=>A!==n)].slice(0,5);if(h(c),localStorage.setItem("recentSearches",JSON.stringify(c)),a)switch(u.type){case"note":a("notes",u);break;case"message":a("messenger",u);break;case"event":a("calendar",u);break;case"employee":a("department",u);break;case"project":a("notes",u);break}t()},B=u=>{r(u)},p=()=>{h([]),localStorage.removeItem("recentSearches")};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"search-overlay",onClick:t}),e.jsxs("div",{className:"search-modal",children:[e.jsxs("div",{className:"search-header",children:[e.jsx(We,{size:20,className:"search-icon"}),e.jsx("input",{ref:C,type:"text",className:"search-input",placeholder:"노트, 메시지, 일정, 사원 검색...",value:n,onChange:u=>r(u.target.value)}),e.jsx("div",{className:"search-shortcuts",children:e.jsx("kbd",{children:"ESC"})}),e.jsx("button",{className:"btn-close-search",onClick:t,children:e.jsx(Ke,{size:20})})]}),e.jsxs("div",{className:"search-content",children:[!n&&z.length>0&&e.jsxs("div",{className:"search-section",children:[e.jsxs("div",{className:"search-section-header",children:[e.jsxs("h3",{children:[e.jsx(us,{size:16}),e.jsx("span",{children:"최근 검색"})]}),e.jsx("button",{className:"btn-text-small",onClick:p,children:"지우기"})]}),e.jsx("div",{className:"recent-searches",children:z.map((u,c)=>e.jsxs("button",{className:"recent-search-item",onClick:()=>B(u),children:[e.jsx(us,{size:14}),e.jsx("span",{children:u})]},c))})]}),E&&e.jsxs("div",{className:"search-loading",children:[e.jsx("div",{className:"loading-spinner-small"}),e.jsx("p",{children:"검색 중..."})]}),n&&!E&&P()===0&&e.jsxs("div",{className:"search-empty",children:[e.jsx(We,{size:48}),e.jsxs("p",{children:["'",n,"'에 대한 결과가 없습니다"]})]}),n&&P()>0&&e.jsxs(e.Fragment,{children:[o.notes.length>0&&e.jsxs("div",{className:"search-section",children:[e.jsxs("div",{className:"search-section-header",children:[e.jsxs("h3",{children:[e.jsx(as,{size:16}),e.jsx("span",{children:"노트"})]}),e.jsx("span",{className:"result-count",children:o.notes.length})]}),o.notes.map((u,c)=>{var A;return e.jsxs("button",{className:`search-result-item ${d===c?"selected":""}`,onClick:()=>T({...u,type:"note"}),children:[e.jsx(as,{size:18}),e.jsxs("div",{className:"result-content",children:[e.jsx("h4",{children:u.title||"제목 없음"}),e.jsxs("p",{children:[(A=u.content)==null?void 0:A.replace(/<[^>]*>/g,"").substring(0,60),"..."]})]}),e.jsx(Ze,{size:16,className:"result-arrow"})]},u.id)})]}),o.messages.length>0&&e.jsxs("div",{className:"search-section",children:[e.jsxs("div",{className:"search-section-header",children:[e.jsxs("h3",{children:[e.jsx(Ve,{size:16}),e.jsx("span",{children:"메시지"})]}),e.jsx("span",{className:"result-count",children:o.messages.length})]}),o.messages.map((u,c)=>{var A;return e.jsxs("button",{className:`search-result-item ${d===o.notes.length+c?"selected":""}`,onClick:()=>T({...u,type:"message"}),children:[e.jsx(Ve,{size:18}),e.jsxs("div",{className:"result-content",children:[e.jsx("h4",{children:u.senderId===i.uid?"보낸 메시지":"받은 메시지"}),e.jsxs("p",{children:[(A=u.message)==null?void 0:A.substring(0,60),"..."]})]}),e.jsx(Ze,{size:16,className:"result-arrow"})]},u.id)})]}),o.events.length>0&&e.jsxs("div",{className:"search-section",children:[e.jsxs("div",{className:"search-section-header",children:[e.jsxs("h3",{children:[e.jsx(Te,{size:16}),e.jsx("span",{children:"일정"})]}),e.jsx("span",{className:"result-count",children:o.events.length})]}),o.events.map((u,c)=>e.jsxs("button",{className:"search-result-item",onClick:()=>T({...u,type:"event"}),children:[e.jsx(Te,{size:18}),e.jsxs("div",{className:"result-content",children:[e.jsx("h4",{children:u.title}),e.jsxs("p",{children:[u.date," ",u.time||""]})]}),e.jsx(Ze,{size:16,className:"result-arrow"})]},u.id))]}),o.employees.length>0&&e.jsxs("div",{className:"search-section",children:[e.jsxs("div",{className:"search-section-header",children:[e.jsxs("h3",{children:[e.jsx(Le,{size:16}),e.jsx("span",{children:"사원"})]}),e.jsx("span",{className:"result-count",children:o.employees.length})]}),o.employees.map((u,c)=>e.jsxs("button",{className:"search-result-item",onClick:()=>T({...u,type:"employee"}),children:[e.jsx(Le,{size:18}),e.jsxs("div",{className:"result-content",children:[e.jsx("h4",{children:u.name}),e.jsxs("p",{children:[u.department," · ",u.position]})]}),e.jsx(Ze,{size:16,className:"result-arrow"})]},u.id))]}),o.projects.length>0&&e.jsxs("div",{className:"search-section",children:[e.jsxs("div",{className:"search-section-header",children:[e.jsxs("h3",{children:[e.jsx(Fe,{size:16}),e.jsx("span",{children:"프로젝트"})]}),e.jsx("span",{className:"result-count",children:o.projects.length})]}),o.projects.map((u,c)=>e.jsxs("button",{className:"search-result-item",onClick:()=>T({...u,type:"project"}),children:[e.jsx(Fe,{size:18}),e.jsxs("div",{className:"result-content",children:[e.jsx("h4",{children:u.name}),e.jsx("p",{children:u.type==="personal"?"개인 프로젝트":"팀 프로젝트"})]}),e.jsx(Ze,{size:16,className:"result-arrow"})]},u.id))]})]})]}),e.jsx("div",{className:"search-footer",children:e.jsxs("div",{className:"search-tips",children:[e.jsxs("span",{children:[e.jsx("kbd",{children:"↑"}),e.jsx("kbd",{children:"↓"})," 탐색"]}),e.jsxs("span",{children:[e.jsx("kbd",{children:"Enter"})," 선택"]}),e.jsxs("span",{children:[e.jsx("kbd",{children:"ESC"})," 닫기"]})]})})]})]}):null};function Ui({onMenuToggle:s,onNavigate:t}){const{userData:a,isAdmin:i,isSubAdmin:n,isApprover:r,isPTScheduleEditor:o,logout:f}=we(),[d,j]=l.useState(!1),[E,D]=l.useState(!1),z=(a==null?void 0:a.name)||(a==null?void 0:a.email);return Ts.useEffect(()=>{const h=C=>{(C.ctrlKey||C.metaKey)&&C.key==="k"&&(C.preventDefault(),D(!0))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[]),e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"menu-toggle-btn",onClick:s,title:"메뉴 열기/닫기",children:e.jsx(Ci,{size:24})}),e.jsxs("div",{className:"header-title",children:[e.jsx("h1",{children:"ONFL 그룹웨어"}),e.jsx("p",{className:"header-subtitle",children:"캘린더 · 근태 · 연차 관리"})]})]}),e.jsx("div",{className:"header-center",children:e.jsxs("button",{className:"search-trigger",onClick:()=>D(!0),title:"검색 (Ctrl+K)",children:[e.jsx(We,{size:18}),e.jsx("span",{children:"검색..."}),e.jsxs("kbd",{className:"search-shortcut",children:[e.jsx(ji,{size:12}),e.jsx("span",{children:"K"})]})]})}),e.jsxs("div",{className:"user-info",children:[e.jsx("button",{className:"notification-bell",onClick:()=>j(!d),title:"알림",children:e.jsx(Ds,{size:20})}),e.jsx("span",{className:"user-name",children:z}),e.jsxs("span",{className:"user-badges",children:[i&&e.jsx("span",{className:"badge badge-admin",children:"관리자"}),n&&!i&&e.jsx("span",{className:"badge badge-subadmin",children:"부관리자"}),r&&!i&&e.jsx("span",{className:"badge badge-approver",children:"승인자"}),o&&e.jsx("span",{className:"badge badge-pt",children:"PT편집자"})]})]}),e.jsx($i,{isOpen:E,onClose:()=>D(!1),onNavigate:t})]})}function Oi({activeTab:s,setActiveTab:t,isOpen:a,onClose:i}){const{userData:n,isAdmin:r,isSubAdmin:o,isApprover:f,isPTScheduleEditor:d,logout:j}=we(),E=[{id:"dashboard",label:"대시보드",show:!0},{id:"calendar",label:"일정 캘린더",show:!0},{id:"annualLeave",label:"연차 관리",show:!r},{id:"ptSchedule",label:"PT 스케줄",show:!0},{id:"approval",label:"연차 승인",show:f&&!r},{id:"department",label:"조직 구성",show:!0},{id:"notes",label:"📚 노트",show:!0},{id:"messenger",label:"💬 메신저",show:!0},{id:"profile",label:"👤 내 프로필",show:!0},{id:"settings",label:"⚙️ 설정",show:!0},{id:"admin-leave",label:"사원연차 관리",show:r||o},{id:"approval-line",label:"결재선 관리",show:r||o},{id:"admin",label:"사원 관리",show:r||o},{id:"slack-settings",label:"Slack 설정",show:r||o}],D=h=>{t(h),window.innerWidth<=768&&i()},z=async()=>{confirm("로그아웃 하시겠습니까?")&&await j()};return e.jsxs(e.Fragment,{children:[a&&e.jsx("div",{className:"nav-overlay",onClick:i}),e.jsxs("nav",{className:`navigation-sidebar ${a?"open":""}`,children:[e.jsxs("div",{className:"nav-header",children:[e.jsx("h2",{children:"메뉴"}),e.jsx("button",{className:"nav-close-btn",onClick:i,title:"메뉴 닫기",children:e.jsx(Ke,{size:24})})]}),e.jsxs("div",{className:"nav-user-profile",children:[e.jsx("div",{className:"nav-user-avatar",children:e.jsx(Le,{size:24})}),e.jsxs("div",{className:"nav-user-info",children:[e.jsx("div",{className:"nav-user-name",children:(n==null?void 0:n.name)||(n==null?void 0:n.email)}),e.jsxs("div",{className:"nav-user-badges",children:[r&&e.jsx("span",{className:"nav-badge badge-admin",children:"관리자"}),o&&!r&&e.jsx("span",{className:"nav-badge badge-subadmin",children:"부관리자"}),f&&!r&&e.jsx("span",{className:"nav-badge badge-approver",children:"승인자"}),d&&e.jsx("span",{className:"nav-badge badge-pt",children:"PT편집자"})]})]})]}),e.jsx("div",{className:"nav-items",children:E.filter(h=>h.show).map(h=>e.jsx("button",{className:`nav-item ${s===h.id?"active":""}`,onClick:()=>D(h.id),children:h.label},h.id))}),e.jsx("div",{className:"nav-footer",children:e.jsxs("button",{className:"nav-logout-btn",onClick:z,children:[e.jsx(wi,{size:18}),e.jsx("span",{children:"로그아웃"})]})})]})]})}function Fi({setActiveTab:s}){const{user:t,userData:a,isApprover:i,isAdmin:n}=we(),[r,o]=l.useState([]),[f,d]=l.useState({total:0,used:0,remaining:0}),[j,E]=l.useState(0),[D,z]=l.useState({totalEmployees:0,onLeave:0,activeProjects:0,messagesCount:0}),[h,C]=l.useState([]),[N,g]=l.useState({labels:[],leaves:[],approvals:[]}),[I,b]=l.useState(!0);l.useEffect(()=>{t&&y()},[t]);const y=async()=>{b(!0);try{await Promise.all([m(),v(),i&&P(),R(),T(),B()])}catch(c){console.error("대시보드 데이터 로드 실패:",c)}b(!1)},m=async()=>{try{const c=new Date().toISOString().split("T")[0],A=ie(O(k,"schedules"),W("date","==",c)),X=(await se(A)).docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.approvalStatus==="approved"||U.userId===t.uid).slice(0,5);o(X)}catch(c){console.error("일정 로드 실패:",c)}},v=async()=>{try{const c=ie(O(k,"annualLeaves"),W("userId","==",t.uid)),U=(await se(c)).docs.map(ne=>ne.data()).filter(ne=>ne.status==="approved").reduce((ne,J)=>ne+(J.days||0),0),ce=(a==null?void 0:a.totalAnnualLeave)||15;d({total:ce,used:U,remaining:ce-U})}catch(c){console.error("연차 통계 로드 실패:",c)}},P=async()=>{try{const c=ie(O(k,"annualLeaves"),W("status","==","pending")),A=await se(c);E(A.size)}catch(c){console.error("승인 대기 로드 실패:",c)}},R=async()=>{try{const A=(await se(O(k,"employees"))).size,S=new Date().toISOString().split("T")[0],X=ie(O(k,"annualLeaves"),W("status","==","approved")),ce=(await se(X)).docs.filter(Q=>{const te=Q.data();return te.startDate<=S&&te.endDate>=S}).length,J=(await se(O(k,"projects"))).size,_=ie(O(k,"directMessages"),Je(100)),$=(await se(_)).docs.filter(Q=>{const te=Q.data();return te.timestamp?te.timestamp.toDate().toISOString().split("T")[0]===S:!1}).length;z({totalEmployees:A,onLeave:ce,activeProjects:J,messagesCount:$})}catch(c){console.error("팀 통계 로드 실패:",c)}},T=async()=>{try{const c=[],A=ie(O(k,"annualLeaves"),W("userId","==",t.uid),Ie("createdAt","desc"),Je(3));(await se(A)).docs.forEach(ne=>{var _;const J=ne.data();c.push({id:ne.id,type:"leave",title:`연차 ${J.status==="approved"?"승인":J.status==="rejected"?"반려":"신청"}`,description:`${J.startDate} ~ ${J.endDate}`,time:(_=J.createdAt)==null?void 0:_.toDate(),status:J.status,icon:J.status==="approved"?"check":J.status==="rejected"?"x":"clock"})});const X=ie(O(k,"directMessages"),Je(5));(await se(X)).docs.filter(ne=>{const J=ne.data();return J.senderId===t.uid||J.receiverId===t.uid}).slice(0,2).forEach(ne=>{var _,M;const J=ne.data();c.push({id:ne.id,type:"message",title:J.senderId===t.uid?"메시지 전송":"메시지 수신",description:((_=J.message)==null?void 0:_.substring(0,30))+"...",time:(M=J.timestamp)==null?void 0:M.toDate(),icon:"message"})}),c.sort((ne,J)=>ne.time?J.time?J.time-ne.time:-1:1),C(c.slice(0,8))}catch(c){console.error("활동 내역 로드 실패:",c)}},B=async()=>{try{g({labels:["1월","2월","3월","4월","5월","6월"],leaves:[2,1,3,2,4,1],approvals:[5,7,4,8,6,9]})}catch(c){console.error("월별 데이터 로드 실패:",c)}},p=c=>{switch(c){case"check":return e.jsx(_s,{size:18,className:"activity-icon success"});case"x":return e.jsx(Pi,{size:18,className:"activity-icon error"});case"clock":return e.jsx(us,{size:18,className:"activity-icon warning"});case"message":return e.jsx(Ve,{size:18,className:"activity-icon info"});default:return e.jsx(Gs,{size:18,className:"activity-icon"})}},u=c=>{if(!c)return"";const S=new Date-c,X=Math.floor(S/6e4),U=Math.floor(X/60),ce=Math.floor(U/24);return ce>0?`${ce}일 전`:U>0?`${U}시간 전`:X>0?`${X}분 전`:"방금"};return I?e.jsxs("div",{className:"dashboard-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"대시보드를 불러오는 중..."})]}):e.jsxs("div",{className:"dashboard-page",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{children:[e.jsxs("h1",{children:["안녕하세요, ",(a==null?void 0:a.name)||(t==null?void 0:t.email),"님! 👋"]}),e.jsx("p",{children:"오늘도 좋은 하루 되세요"})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{className:"quick-action-btn primary",onClick:()=>s&&s("calendar"),children:[e.jsx(ui,{size:18}),e.jsx("span",{children:"일정 추가"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>s&&s("annualLeave"),children:[e.jsx(Re,{size:18}),e.jsx("span",{children:"연차 신청"})]})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Te,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-label",children:"남은 연차"}),e.jsxs("h2",{className:"stat-value",children:[f.remaining,"일"]}),e.jsxs("p",{className:"stat-detail",children:["총 ",f.total,"일 중 ",f.used,"일 사용"]})]}),e.jsx("div",{className:"stat-progress",children:e.jsx("div",{className:"stat-progress-bar",style:{width:`${f.used/f.total*100}%`}})})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(_s,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-label",children:"오늘 일정"}),e.jsxs("h2",{className:"stat-value",children:[r.length,"개"]}),e.jsx("p",{className:"stat-detail",children:r.length>0?"일정이 있습니다":"일정이 없습니다"})]})]}),i&&e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(os,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-label",children:"승인 대기"}),e.jsxs("h2",{className:"stat-value",children:[j,"건"]}),e.jsx("p",{className:"stat-detail",children:"확인이 필요합니다"})]})]}),e.jsxs("div",{className:"stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx($e,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("p",{className:"stat-label",children:"팀 현황"}),e.jsxs("h2",{className:"stat-value",children:[D.totalEmployees,"명"]}),e.jsxs("p",{className:"stat-detail",children:["연차 ",D.onLeave,"명"]})]})]})]}),e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"dashboard-main",children:[e.jsxs("div",{className:"dashboard-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx(li,{size:20}),e.jsx("span",{children:"월별 트렌드"})]})}),e.jsxs("div",{className:"chart-container",children:[e.jsxs("div",{className:"chart-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot blue"}),e.jsx("span",{children:"연차 사용"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("span",{className:"legend-dot green"}),e.jsx("span",{children:"승인 처리"})]})]}),e.jsx("div",{className:"bar-chart",children:N.labels.map((c,A)=>e.jsxs("div",{className:"bar-group",children:[e.jsxs("div",{className:"bars",children:[e.jsx("div",{className:"bar blue",style:{height:`${N.leaves[A]/5*100}%`},title:`연차: ${N.leaves[A]}일`}),e.jsx("div",{className:"bar green",style:{height:`${N.approvals[A]/10*100}%`},title:`승인: ${N.approvals[A]}건`})]}),e.jsx("span",{className:"bar-label",children:c})]},c))})]})]}),e.jsxs("div",{className:"dashboard-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{children:[e.jsx(Te,{size:20}),e.jsx("span",{children:"오늘의 일정"})]}),e.jsx("button",{className:"btn-text",children:"전체 보기"})]}),e.jsx("div",{className:"schedule-list",children:r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(Te,{size:48}),e.jsx("p",{children:"오늘 일정이 없습니다"})]}):r.map(c=>e.jsxs("div",{className:"schedule-item",children:[e.jsxs("div",{className:"schedule-time",children:[e.jsx(us,{size:16}),e.jsx("span",{children:c.time||"종일"})]}),e.jsxs("div",{className:"schedule-content",children:[e.jsx("h4",{children:c.title}),c.description&&e.jsx("p",{children:c.description})]}),e.jsxs("div",{className:`schedule-badge ${c.type||"default"}`,children:[c.type==="meeting"&&"회의",c.type==="deadline"&&"마감",c.type==="event"&&"이벤트",!c.type&&"일정"]})]},c.id))})]})]}),e.jsxs("div",{className:"dashboard-sidebar",children:[e.jsxs("div",{className:"dashboard-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx(Gs,{size:20}),e.jsx("span",{children:"최근 활동"})]})}),e.jsx("div",{className:"activity-list",children:h.length===0?e.jsx("div",{className:"empty-state-small",children:e.jsx("p",{children:"활동 내역이 없습니다"})}):h.map(c=>e.jsxs("div",{className:"activity-item",children:[p(c.icon),e.jsxs("div",{className:"activity-content",children:[e.jsx("h4",{children:c.title}),e.jsx("p",{children:c.description}),e.jsx("span",{className:"activity-time",children:u(c.time)})]})]},c.id))})]}),e.jsxs("div",{className:"dashboard-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{children:[e.jsx(Ai,{size:20}),e.jsx("span",{children:"팀 통계"})]})}),e.jsxs("div",{className:"team-stats-list",children:[e.jsxs("div",{className:"team-stat-item",children:[e.jsx("div",{className:"team-stat-icon blue",children:e.jsx($e,{size:20})}),e.jsxs("div",{className:"team-stat-content",children:[e.jsx("p",{className:"team-stat-label",children:"전체 사원"}),e.jsxs("h3",{className:"team-stat-value",children:[D.totalEmployees,"명"]})]})]}),e.jsxs("div",{className:"team-stat-item",children:[e.jsx("div",{className:"team-stat-icon orange",children:e.jsx(Te,{size:20})}),e.jsxs("div",{className:"team-stat-content",children:[e.jsx("p",{className:"team-stat-label",children:"연차 중"}),e.jsxs("h3",{className:"team-stat-value",children:[D.onLeave,"명"]})]})]}),e.jsxs("div",{className:"team-stat-item",children:[e.jsx("div",{className:"team-stat-icon purple",children:e.jsx(as,{size:20})}),e.jsxs("div",{className:"team-stat-content",children:[e.jsx("p",{className:"team-stat-label",children:"활성 프로젝트"}),e.jsxs("h3",{className:"team-stat-value",children:[D.activeProjects,"개"]})]})]}),e.jsxs("div",{className:"team-stat-item",children:[e.jsx("div",{className:"team-stat-icon green",children:e.jsx(Ve,{size:20})}),e.jsxs("div",{className:"team-stat-content",children:[e.jsx("p",{className:"team-stat-label",children:"오늘 메시지"}),e.jsxs("h3",{className:"team-stat-value",children:[D.messagesCount,"개"]})]})]})]})]})]})]})]})}function Bi({date:s,currentSchedule:t,onSave:a,onClose:i,userName:n}){const[r,o]=l.useState(t||"출근"),f=["출근","재택","연차","반차(오전)","반차(오후)","병가","경조사","공가","여름휴가","겨울휴가"],d=()=>{a(s,r)};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"일정 등록"}),e.jsx("button",{className:"modal-close-btn",onClick:i,children:"✕"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"modal-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"날짜:"})," ",s]}),e.jsxs("p",{children:[e.jsx("strong",{children:"이름:"})," ",n.split("@")[0]]})]}),e.jsx("div",{className:"schedule-type-grid",children:f.map(j=>e.jsx("button",{className:`schedule-type-btn ${r===j?"active":""}`,onClick:()=>o(j),children:j},j))}),e.jsx("div",{className:"modal-notice",children:e.jsx("p",{children:"💡 연차/반차/휴가는 승인 대기 상태로 등록됩니다."})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn cancel-btn",onClick:i,children:"취소"}),e.jsx("button",{className:"modal-btn save-btn",onClick:d,children:"저장"})]})]})})}function qi({year:s,month:t,onSave:a,onClose:i}){const[n,r]=l.useState(""),[o,f]=l.useState(""),d=(h,C)=>new Date(h,C+1,0).getDate(),j=(h,C,N)=>`${h}-${String(C+1).padStart(2,"0")}-${String(N).padStart(2,"0")}`,E=()=>{if(!n){alert("날짜를 선택해주세요.");return}if(!o.trim()){alert("일정 내용을 입력해주세요.");return}a(n,o)},D=d(s,t),z=Array.from({length:D},(h,C)=>C+1);return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"공유일정 등록"}),e.jsx("button",{className:"modal-close-btn",onClick:i,children:"✕"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"날짜 선택"}),e.jsxs("select",{value:n,onChange:h=>r(h.target.value),className:"form-select",children:[e.jsx("option",{value:"",children:"날짜를 선택하세요"}),z.map(h=>{const C=j(s,t,h);return e.jsxs("option",{value:C,children:[t+1,"월 ",h,"일"]},h)})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"일정 내용"}),e.jsx("input",{type:"text",value:o,onChange:h=>f(h.target.value),placeholder:"공유일정 내용을 입력하세요",className:"form-input",maxLength:50})]}),e.jsx("div",{className:"modal-notice",children:e.jsx("p",{children:"📌 전체 사원에게 공유되는 일정입니다."})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn cancel-btn",onClick:i,children:"취소"}),e.jsx("button",{className:"modal-btn save-btn",onClick:E,children:"저장"})]})]})})}const rt={"2024-01-01":"신정","2024-02-09":"설날","2024-02-10":"설날","2024-02-11":"설날","2024-02-12":"대체공휴일","2024-03-01":"삼일절","2024-04-10":"국회의원선거일","2024-05-05":"어린이날","2024-05-06":"대체공휴일","2024-05-15":"부처님오신날","2024-06-06":"현충일","2024-08-15":"광복절","2024-09-16":"추석","2024-09-17":"추석","2024-09-18":"추석","2024-10-03":"개천절","2024-10-09":"한글날","2024-12-25":"크리스마스","2025-01-01":"신정","2025-01-28":"설날","2025-01-29":"설날","2025-01-30":"설날","2025-03-01":"삼일절","2025-03-03":"대체공휴일","2025-05-05":"어린이날","2025-05-06":"부처님오신날","2025-06-06":"현충일","2025-08-15":"광복절","2025-10-03":"개천절","2025-10-05":"추석","2025-10-06":"추석","2025-10-07":"추석","2025-10-08":"대체공휴일","2025-10-09":"한글날","2025-12-25":"크리스마스","2026-01-01":"신정","2026-02-16":"설날","2026-02-17":"설날","2026-02-18":"설날","2026-03-01":"삼일절","2026-03-02":"대체공휴일","2026-05-05":"어린이날","2026-05-25":"부처님오신날","2026-06-06":"현충일","2026-08-15":"광복절","2026-09-24":"추석","2026-09-25":"추석","2026-09-26":"추석","2026-10-03":"개천절","2026-10-05":"대체공휴일","2026-10-09":"한글날","2026-12-25":"크리스마스","2027-01-01":"신정","2027-02-06":"설날","2027-02-07":"설날","2027-02-08":"설날","2027-03-01":"삼일절","2027-05-05":"어린이날","2027-05-13":"부처님오신날","2027-06-06":"현충일","2027-06-07":"대체공휴일","2027-08-15":"광복절","2027-08-16":"대체공휴일","2027-09-14":"추석","2027-09-15":"추석","2027-09-16":"추석","2027-10-03":"개천절","2027-10-04":"대체공휴일","2027-10-09":"한글날","2027-12-25":"크리스마스","2028-01-01":"신정","2028-01-26":"설날","2028-01-27":"설날","2028-01-28":"설날","2028-03-01":"삼일절","2028-05-02":"부처님오신날","2028-05-05":"어린이날","2028-06-06":"현충일","2028-08-15":"광복절","2028-10-02":"추석","2028-10-03":"추석/개천절","2028-10-04":"추석","2028-10-09":"한글날","2028-12-25":"크리스마스","2029-01-01":"신정","2029-02-12":"설날","2029-02-13":"설날","2029-02-14":"설날","2029-03-01":"삼일절","2029-05-05":"어린이날","2029-05-20":"부처님오신날","2029-06-06":"현충일","2029-08-15":"광복절","2029-09-21":"추석","2029-09-22":"추석","2029-09-23":"추석","2029-09-24":"대체공휴일","2029-10-03":"개천절","2029-10-09":"한글날","2029-12-25":"크리스마스","2030-01-01":"신정","2030-02-02":"설날","2030-02-03":"설날","2030-02-04":"설날","2030-03-01":"삼일절","2030-05-05":"어린이날","2030-05-09":"부처님오신날","2030-06-06":"현충일","2030-08-15":"광복절","2030-09-11":"추석","2030-09-12":"추석","2030-09-13":"추석","2030-10-03":"개천절","2030-10-09":"한글날","2030-12-25":"크리스마스"},ze=(s,t,a)=>`${s}-${String(t+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,ls=(s,t)=>new Date(s,t+1,0).getDate(),ct=(s,t)=>new Date(s,t,1).getDay();function Hi({employees:s=[]}){var te;const{user:t,userData:a}=we(),[i,n]=l.useState(new Date),[r,o]=l.useState({}),[f,d]=l.useState(null),[j,E]=l.useState([]),[D,z]=l.useState(!1),[h,C]=l.useState(null),[N,g]=l.useState("all"),[I,b]=l.useState("all"),[y,m]=l.useState({}),[v,P]=l.useState(!1),[R,T]=l.useState(null),B=i.getFullYear(),p=i.getMonth();l.useEffect(()=>{t&&(u(),c(),A())},[t,B,p]),l.useEffect(()=>{const L=new Date,V=ze(L.getFullYear(),L.getMonth(),L.getDate());d(V)},[r]),l.useEffect(()=>{if(f&&r[f]){const V=r[f].filter(K=>K.approvalStatus!=="cancelled"&&K.approvalStatus!=="deletion-pending");E(V)}else f&&E([])},[f,r]);const u=async()=>{try{const L=le(k,"employees",t.uid),V=await se(ie(O(k,"employees"),W("__name__","==",t.uid)));V.empty||C(V.docs[0].data())}catch(L){console.error("사원 정보 로드 실패:",L)}},c=async()=>{try{const L=ze(B,p,1),V=ze(B,p,ls(B,p)),K=ie(O(k,"schedules"),W("date",">=",L),W("date","<=",V)),q=await se(K),G={};q.forEach(ee=>{const Y=ee.data();G[Y.date]||(G[Y.date]=[]),G[Y.date].push({id:ee.id,...Y})}),o(G)}catch(L){console.error("일정 로드 실패:",L)}},A=async()=>{try{const L=ze(B,p,1),V=ze(B,p,ls(B,p)),K=ie(O(k,"sharedEvents"),W("date",">=",L),W("date","<=",V)),q=await se(K),G={};q.forEach(ee=>{const Y=ee.data();G[Y.date]||(G[Y.date]=[]),G[Y.date].push({id:ee.id,...Y})}),m(G)}catch(L){console.error("공유 일정 로드 실패:",L)}},S=()=>{n(new Date(B,p-1))},X=()=>{n(new Date(B,p+1))},U=L=>{const V=ze(B,p,L);window.innerWidth<=768?R===V?z(!0):(d(V),T(V)):(d(V),z(!0))},ce=async(L,V)=>{try{const K=O(k,"schedules"),q=ie(K,W("userId","==",t.uid),W("date","==",L)),G=await se(q),ee=["연차","반차(오전)","반차(오후)","여름휴가","겨울휴가"].includes(V),Y=ee?h!=null&&h.isApprover?"approved":"pending":null;if(G.empty){const pe={userId:t.uid,userName:t.displayName||t.email,date:L,type:V,createdAt:ue()};ee&&(pe.approvalStatus=Y),await Ce(K,pe)}else{const pe=G.docs[0].id,me={type:V,updatedAt:ue()};ee?me.approvalStatus=Y:me.approvalStatus=null,await xe(le(k,"schedules",pe),me)}alert("일정이 등록되었습니다."),z(!1),c()}catch(K){console.error("일정 저장 실패:",K),alert("일정 저장에 실패했습니다.")}},ne=async(L,V,K)=>{if(confirm("이 일정을 삭제하시겠습니까?"))try{["연차","반차(오전)","반차(오후)","여름휴가","겨울휴가"].includes(K)?(await xe(le(k,"schedules",L),{approvalStatus:"deletion-pending",cancelledAt:ue()}),alert("취소 요청이 접수되었습니다.")):(await Be(le(k,"schedules",L)),alert("일정이 삭제되었습니다.")),c()}catch(q){console.error("일정 삭제 실패:",q),alert("삭제 실패: "+q.message)}},J=async(L,V)=>{try{await Ce(O(k,"sharedEvents"),{date:L,title:V,createdBy:t.uid,createdByName:t.displayName||t.email,createdAt:ue()}),alert("공유일정이 등록되었습니다."),P(!1),A()}catch(K){console.error("공유일정 등록 실패:",K),alert("등록 실패: "+K.message)}},_=async L=>{if(confirm("이 공유일정을 삭제하시겠습니까?"))try{await Be(le(k,"sharedEvents",L)),alert("공유일정이 삭제되었습니다."),A()}catch(V){console.error("공유일정 삭제 실패:",V),alert("삭제 실패: "+V.message)}},M=()=>{const L=ls(B,p),V=ct(B,p),K=[];let q=[];for(let Y=0;Y<V;Y++)q.push(e.jsx("td",{className:"other-month"},`empty-${Y}`));const G=new Date,ee=G.getFullYear()===B&&G.getMonth()===p;for(let Y=1;Y<=L;Y++){const pe=ze(B,p,Y);let ve=(r[pe]||[]).filter(H=>H.approvalStatus!=="cancelled"&&H.approvalStatus!=="deletion-pending");N!=="all"&&(ve=ve.filter(H=>H.userId===N)),I!=="all"&&(ve=ve.filter(H=>H.type===I));const Ue=ee&&G.getDate()===Y,De=rt[pe],Ae=new Date(B,p,Y).getDay(),w=Ae===0,oe=Ae===6;q.push(e.jsxs("td",{className:`
            ${Ue?"today":""} 
            ${De?"holiday":""} 
            ${w?"sunday":""} 
            ${oe?"saturday":""}
          `,onClick:()=>U(Y),children:[e.jsx("div",{className:"date-number",children:Y}),De&&e.jsx("div",{className:"holiday-name",children:De}),y[pe]&&y[pe].map((H,he)=>e.jsxs("div",{className:"schedule-item schedule-shared",onClick:je=>je.stopPropagation(),children:[e.jsxs("span",{children:["📌 ",H.title]}),((h==null?void 0:h.isSubAdmin)||(h==null?void 0:h.isApprover))&&e.jsx("button",{className:"delete-schedule-btn",onClick:je=>{je.stopPropagation(),_(H.id)},children:"✕"})]},`shared-${he}`)),ve.map((H,he)=>{const je=["연차","반차(오전)","반차(오후)","여름휴가","겨울휴가"].includes(H.type),fe=H.approvalStatus==="approved"?" (승인완료)":H.approvalStatus==="rejected"?" (반려)":H.approvalStatus==="pending"?" (승인대기)":H.approvalStatus==="deletion-pending"?" (취소대기)":H.approvalStatus==="cancelled"?" (취소됨)":"";H.date.slice(0,7);const ye=`${B}-${String(p+1).padStart(2,"0")}`,Oe=`${G.getFullYear()}-${String(G.getMonth()+1).padStart(2,"0")}`;return e.jsxs("div",{className:`schedule-item schedule-${H.type.replace(/[()]/g,"")}`,onClick:Ye=>Ye.stopPropagation(),children:[e.jsxs("span",{children:[H.userName.split("@")[0]," - ",H.type,je?fe:""]}),H.userId===t.uid&&ye>=Oe&&e.jsx("button",{className:"delete-schedule-btn",onClick:Ye=>{Ye.stopPropagation(),ne(H.id,H.date,H.type)},children:"✕"})]},he)})]},Y)),q.length===7&&(K.push(e.jsx("tr",{children:q},K.length)),q=[])}if(q.length>0){for(;q.length<7;)q.push(e.jsx("td",{className:"other-month"},`empty-end-${q.length}`));K.push(e.jsx("tr",{children:q},K.length))}return K},$=()=>{const L=ls(B,p),V=ct(B,p),K=[],q=new Date,G=q.getFullYear()===B&&q.getMonth()===p;for(let ee=0;ee<V;ee++)K.push(e.jsx("div",{className:"mobile-date-cell other-month",children:e.jsx("span",{className:"mobile-date-number"})},`empty-${ee}`));for(let ee=1;ee<=L;ee++){const Y=ze(B,p,ee);let me=(r[Y]||[]).filter(he=>he.approvalStatus!=="cancelled"&&he.approvalStatus!=="deletion-pending");N!=="all"&&(me=me.filter(he=>he.userId===N)),I!=="all"&&(me=me.filter(he=>he.type===I));const ve=y[Y]||[],Ue=G&&q.getDate()===ee,De=rt[Y],Ae=new Date(B,p,ee).getDay(),w=Ae===0,oe=Ae===6;let H="mobile-date-cell";Ue&&(H+=" today"),De&&(H+=" holiday"),w&&(H+=" sunday"),oe&&(H+=" saturday"),K.push(e.jsxs("div",{className:H,onClick:()=>U(ee),children:[e.jsx("span",{className:"mobile-date-number",children:ee}),De&&e.jsx("div",{className:"mobile-holiday-name",children:De}),e.jsxs("div",{className:"mobile-schedule-dots",children:[ve.map((he,je)=>e.jsx("div",{className:"mobile-schedule-dot shared"},`shared-${je}`)),me.slice(0,3).map((he,je)=>{const fe=["연차","반차(오전)","반차(오후)","여름휴가","겨울휴가"].includes(he.type),ye=he.type==="재택"||he.type==="재택근무";let Oe="mobile-schedule-dot";return fe?Oe+=" leave":ye&&(Oe+=" remote"),e.jsx("div",{className:Oe},je)}),ve.length+me.length>3&&e.jsx("span",{style:{fontSize:"8px",color:"#999"},children:"+"})]})]},ee))}return K},Q=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"];return e.jsxs("div",{className:"calendar-container",children:[e.jsxs("div",{className:"calendar-header",children:[e.jsxs("h2",{children:[B,"년 ",Q[p]]}),e.jsxs("div",{className:"calendar-nav",children:[e.jsx("button",{className:"nav-btn shared-event-btn",onClick:()=>P(!0),children:"공유일정등록"}),e.jsx("button",{className:"nav-btn",onClick:S,children:"이전"}),e.jsx("button",{className:"nav-btn",onClick:X,children:"다음"})]})]}),e.jsxs("div",{className:"filter-bar",children:[e.jsxs("select",{className:"filter-select",value:N,onChange:L=>g(L.target.value),children:[e.jsx("option",{value:"all",children:"전체 사원"}),s.map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]}),e.jsxs("select",{className:"filter-select",value:I,onChange:L=>b(L.target.value),children:[e.jsx("option",{value:"all",children:"전체 유형"}),e.jsx("option",{value:"출근",children:"출근"}),e.jsx("option",{value:"재택",children:"재택"}),e.jsx("option",{value:"연차",children:"연차"}),e.jsx("option",{value:"반차(오전)",children:"반차(오전)"}),e.jsx("option",{value:"반차(오후)",children:"반차(오후)"}),e.jsx("option",{value:"병가",children:"병가"}),e.jsx("option",{value:"경조사",children:"경조사"}),e.jsx("option",{value:"공가",children:"공가"}),e.jsx("option",{value:"여름휴가",children:"여름휴가"}),e.jsx("option",{value:"겨울휴가",children:"겨울휴가"})]})]}),e.jsx("div",{className:"calendar desktop-calendar",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"sunday",children:"일"}),e.jsx("th",{children:"월"}),e.jsx("th",{children:"화"}),e.jsx("th",{children:"수"}),e.jsx("th",{children:"목"}),e.jsx("th",{children:"금"}),e.jsx("th",{className:"saturday",children:"토"})]})}),e.jsx("tbody",{children:M()})]})}),e.jsxs("div",{className:"calendar mobile-calendar",children:[e.jsxs("div",{className:"mobile-weekdays",children:[e.jsx("div",{className:"mobile-weekday sunday",children:"일"}),e.jsx("div",{className:"mobile-weekday",children:"월"}),e.jsx("div",{className:"mobile-weekday",children:"화"}),e.jsx("div",{className:"mobile-weekday",children:"수"}),e.jsx("div",{className:"mobile-weekday",children:"목"}),e.jsx("div",{className:"mobile-weekday",children:"금"}),e.jsx("div",{className:"mobile-weekday saturday",children:"토"})]}),e.jsx("div",{className:"mobile-calendar-grid",children:$()})]}),f&&j.length>0&&e.jsxs("div",{className:"daily-schedules",children:[e.jsxs("h3",{children:[f," 일정"]}),e.jsx("div",{className:"daily-schedule-list",children:j.map((L,V)=>e.jsxs("div",{className:`daily-schedule-card ${L.type.replace(/[()]/g,"")}`,children:[e.jsx("div",{className:"name",children:L.userName.split("@")[0]}),e.jsx("div",{className:"type",children:L.type})]},V))})]}),D&&f&&e.jsx(Bi,{date:f,currentSchedule:(te=j.find(L=>L.userId===t.uid))==null?void 0:te.type,onSave:ce,onClose:()=>z(!1),userName:t.displayName||t.email}),v&&e.jsx(qi,{year:B,month:p,onSave:J,onClose:()=>P(!1)})]})}function Vi({onClose:s,onSubmit:t,remainingLeave:a}){const[i,n]=l.useState(""),[r,o]=l.useState(""),[f,d]=l.useState("연차"),[j,E]=l.useState(""),[D,z]=l.useState([]),[h,C]=l.useState(!1),N=b=>{const m=Array.from(b.target.files).filter(v=>v.size>5242880?(alert(`${v.name}은(는) 5MB를 초과합니다.`),!1):!0);z([...D,...m])},g=b=>{z(D.filter((y,m)=>m!==b))},I=()=>{if(!i||!r){alert("시작일과 종료일을 모두 선택해주세요.");return}t({startDate:i,endDate:r,leaveType:f,note:j,files:D})};return e.jsx("div",{className:"modal-overlay",onClick:s,children:e.jsxs("div",{className:"modal-content leave-register-modal",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"연차 등록"}),e.jsx("button",{className:"modal-close-btn",onClick:s,children:"✕"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"remaining-leave-info",children:e.jsxs("span",{children:["남은 연차: ",e.jsxs("strong",{children:[a,"일"]})]})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"시작일"}),e.jsx("input",{type:"date",value:i,onChange:b=>n(b.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"종료일"}),e.jsx("input",{type:"date",value:r,onChange:b=>o(b.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"유형"}),e.jsxs("select",{value:f,onChange:b=>d(b.target.value),className:"form-select",children:[e.jsx("option",{value:"연차",children:"연차"}),e.jsx("option",{value:"반차(오전)",children:"반차(오전) - 0.5일"}),e.jsx("option",{value:"반차(오후)",children:"반차(오후) - 0.5일"}),e.jsx("option",{value:"병가",children:"병가"}),e.jsx("option",{value:"경조사",children:"경조사 휴가"}),e.jsx("option",{value:"공가",children:"공가"}),e.jsx("option",{value:"여름휴가",children:"여름휴가"}),e.jsx("option",{value:"겨울휴가",children:"겨울휴가"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"사유 (선택)"}),e.jsx("textarea",{value:j,onChange:b=>E(b.target.value),placeholder:"휴가 사유를 입력하세요",className:"form-textarea",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"첨부 파일 (선택) - 병가 진단서 등"}),e.jsxs("div",{className:"file-upload-area",onClick:()=>document.getElementById("leave-file-input").click(),children:[e.jsx("input",{id:"leave-file-input",type:"file",multiple:!0,onChange:N,style:{display:"none"},accept:"image/*,.pdf,.doc,.docx"}),e.jsx("div",{className:"file-upload-icon",children:"📎"}),e.jsx("div",{className:"file-upload-text",children:"클릭하여 파일 선택 (최대 5MB)"})]}),D.length>0&&e.jsx("div",{className:"file-list",children:D.map((b,y)=>e.jsxs("div",{className:"file-item",children:[e.jsxs("span",{className:"file-name",children:["📄 ",b.name]}),e.jsxs("span",{className:"file-size",children:[(b.size/1024).toFixed(1),"KB"]}),e.jsx("button",{className:"file-remove-btn",onClick:()=>g(y),children:"✕"})]},y))})]}),e.jsxs("div",{className:"modal-notice",children:[e.jsx("p",{children:"💡 주말(토,일)은 자동으로 제외됩니다."}),e.jsx("p",{children:"💡 반차는 0.5일로 계산됩니다."})]}),h&&e.jsx("div",{className:"uploading-message",children:"파일 업로드 중..."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"modal-btn cancel-btn",onClick:()=>{z([]),E(""),s()},children:"취소"}),e.jsx("button",{className:"modal-btn save-btn",onClick:I,disabled:h,children:"등록"})]})]})})}function Wi({currentPage:s,totalPages:t,onPageChange:a}){if(t<=1)return null;const i=[],n=5;let r=Math.max(1,s-Math.floor(n/2)),o=Math.min(t,r+n-1);o-r<n-1&&(r=Math.max(1,o-n+1));for(let f=r;f<=o;f++)i.push(f);return e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>a(s-1),disabled:s===1,children:"이전"}),r>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"pagination-btn",onClick:()=>a(1),children:"1"}),r>2&&e.jsx("span",{className:"pagination-ellipsis",children:"..."})]}),i.map(f=>e.jsx("button",{className:`pagination-btn ${f===s?"active":""}`,onClick:()=>a(f),children:f},f)),o<t&&e.jsxs(e.Fragment,{children:[o<t-1&&e.jsx("span",{className:"pagination-ellipsis",children:"..."}),e.jsx("button",{className:"pagination-btn",onClick:()=>a(t),children:t})]}),e.jsx("button",{className:"pagination-btn",onClick:()=>a(s+1),disabled:s===t,children:"다음"})]})}function Ki(){const{user:s,userData:t}=we(),[a,i]=l.useState(null),[n,r]=l.useState([]),[o,f]=l.useState(!1),[d,j]=l.useState(1),[E,D]=l.useState(!0),z=10;l.useEffect(()=>{s&&(h(),C())},[s]);const h=async()=>{try{const p=ie(O(k,"employees"),W("__name__","==",s.uid)),u=await se(p);u.empty||i(u.docs[0].data()),D(!1)}catch(p){console.error("사원 정보 로드 실패:",p),D(!1)}},C=async()=>{try{const p=ie(O(k,"leaveUsage"),W("userId","==",s.uid)),u=await se(p),c=[];u.forEach(U=>{c.push({id:U.id,...U.data()})});const A={},S=[];c.forEach(U=>{U.groupId?A[U.groupId]?A[U.groupId].ids.push(U.id):A[U.groupId]={id:U.groupId,ids:[U.id],userId:U.userId,startDate:U.startDate||U.date,endDate:U.endDate||U.date,date:U.startDate||U.date,type:U.type,amount:U.amount,totalDays:U.totalDays||1,note:U.note,approvalStatus:U.approvalStatus,createdAt:U.createdAt,groupId:U.groupId,isGrouped:!0}:S.push(U)});const X=[...Object.values(A),...S];X.sort((U,ce)=>(ce.startDate||ce.date).localeCompare(U.startDate||U.date)),r(X)}catch(p){console.error("연차 내역 로드 실패:",p)}},N=p=>{if(!p)return 0;const u=new Date(p),c=new Date,A=c.getFullYear()-u.getFullYear();if(A<1){const S=(c.getFullYear()-u.getFullYear())*12+(c.getMonth()-u.getMonth());return Math.floor(S)}return 15+Math.min(A-1,10)},g=()=>n.filter(p=>p.approvalStatus==="approved"||p.approvalStatus==="pending").reduce((p,u)=>p+u.amount,0),I=async(p,u)=>{if(u.length===0)return[];const c=[];try{for(const A of u){const S=Gn(ti,`leave-attachments/${s.uid}/${p}/${A.name}`);await Yn(S,A);const X=await Xn(S);c.push({name:A.name,url:X,size:A.size})}return c}catch(A){return console.error("파일 업로드 실패:",A),alert("파일 업로드 중 오류가 발생했습니다."),[]}},b=async p=>{try{const{startDate:u,endDate:c,leaveType:A,note:S,files:X}=p,U=new Date(u),ce=new Date(c);if(U>ce){alert("종료일은 시작일보다 늦어야 합니다.");return}const ne=a!=null&&a.isApprover?"approved":"pending";let J=0;if(A==="연차"?J=1:A==="반차(오전)"||A==="반차(오후)"?J=.5:(A==="여름휴가"||A==="겨울휴가")&&(J=0),A!=="여름휴가"&&A!=="겨울휴가"){let L=0;const V=new Date(U);for(;V<=ce;){const ee=V.getDay();ee!==0&&ee!==6&&(L+=J),V.setDate(V.getDate()+1)}const K=N(a==null?void 0:a.joinDate),q=g(),G=K-q;if(G<=0){alert(`사용 가능한 연차가 없습니다.

총 연차: ${K}일
사용한 연차: ${q}일
남은 연차: ${G}일`);return}if(L>G){alert(`사용 가능한 연차를 초과했습니다.

요청한 연차: ${L}일
사용 가능한 연차: ${G}일

${G}일 이하로 신청해주세요.`);return}}const _=`${s.uid}_${Date.now()}`;let M=0;const $=new Date(U);for(;$<=ce;){const L=$.getDay();L!==0&&L!==6&&M++,$.setDate($.getDate()+1)}const Q=new Date(U);for(;Q<=ce;){const L=Q.toISOString().split("T")[0],V=Q.getDay();if(V!==0&&V!==6){await Ce(O(k,"leaveUsage"),{userId:s.uid,date:L,startDate:u,endDate:c,type:A,amount:J,totalDays:M,groupId:_,approvalStatus:ne,createdAt:ue()});const K=ie(O(k,"schedules"),W("userId","==",s.uid),W("date","==",L)),q=await se(K);if(q.empty)await Ce(O(k,"schedules"),{userId:s.uid,userName:s.displayName||s.email,date:L,type:A,groupId:_,approvalStatus:ne,createdAt:ue()});else{const G=q.docs[0].id;await xe(le(k,"schedules",G),{type:A,groupId:_,approvalStatus:ne,updatedAt:ue()})}}Q.setDate(Q.getDate()+1)}if(X&&X.length>0){const L=await I(_,X),V=ie(O(k,"leaveUsage"),W("groupId","==",_),Je(1)),K=await se(V);K.empty||await xe(le(k,"leaveUsage",K.docs[0].id),{attachments:L,note:S||""})}const te=a!=null&&a.isApprover?"연차 등록이 완료되었습니다.":"연차 신청이 완료되었습니다. 승인을 기다려주세요.";alert(te),f(!1),C()}catch(u){console.error("연차 등록 실패:",u),alert("연차 등록 중 오류가 발생했습니다.")}},y=async(p,u,c,A,S)=>{try{const X=a==null?void 0:a.isApprover,U=S?p.ids:[p],ce=!!S;if(A==="approved")if(X){const ne=ce?`${p.startDate} ~ ${p.endDate} (${p.totalDays}일) 연차를 모두 취소하시겠습니까?`:"이 연차를 취소하시겠습니까?";if(!confirm(ne))return;for(const M of U)await xe(le(k,"leaveUsage",M),{approvalStatus:"cancelled",cancelledAt:ue()});const J=S?ie(O(k,"schedules"),W("userId","==",s.uid),W("groupId","==",S)):ie(O(k,"schedules"),W("userId","==",s.uid),W("date","==",u),W("type","==",c));(await se(J)).forEach(async M=>{await xe(le(k,"schedules",M.id),{approvalStatus:"cancelled",cancelledAt:ue()})}),alert("연차가 취소되었습니다.")}else{const ne=ce?`승인 완료된 연차입니다. ${p.startDate} ~ ${p.endDate} (${p.totalDays}일) 연차의 취소 승인을 요청하시겠습니까?`:"승인 완료된 연차입니다. 취소 승인을 요청하시겠습니까?";if(!confirm(ne))return;for(const M of U)await xe(le(k,"leaveUsage",M),{approvalStatus:"deletion-pending",deletionRequestedAt:ue()});const J=S?ie(O(k,"schedules"),W("userId","==",s.uid),W("groupId","==",S)):ie(O(k,"schedules"),W("userId","==",s.uid),W("date","==",u),W("type","==",c));(await se(J)).forEach(async M=>{await xe(le(k,"schedules",M.id),{approvalStatus:"deletion-pending",deletionRequestedAt:ue()})}),alert("취소 승인 요청이 완료되었습니다.")}else if(A==="pending"){const ne=ce?`${p.startDate} ~ ${p.endDate} (${p.totalDays}일) 연차 신청을 모두 취소하시겠습니까?`:"이 연차 신청을 취소하시겠습니까?";if(!confirm(ne))return;for(const M of U)await xe(le(k,"leaveUsage",M),{approvalStatus:"cancelled",cancelledAt:ue()});const J=S?ie(O(k,"schedules"),W("userId","==",s.uid),W("groupId","==",S)):ie(O(k,"schedules"),W("userId","==",s.uid),W("date","==",u),W("type","==",c));(await se(J)).forEach(async M=>{await xe(le(k,"schedules",M.id),{approvalStatus:"cancelled",cancelledAt:ue()})}),alert("연차 신청이 취소되었습니다.")}else{const ne=ce?`${p.startDate} ~ ${p.endDate} (${p.totalDays}일) 연차 내역을 취소하시겠습니까?`:"이 연차 내역을 취소하시겠습니까?";if(!confirm(ne))return;for(const J of U)await xe(le(k,"leaveUsage",J),{approvalStatus:"cancelled",cancelledAt:ue()});alert("취소되었습니다.")}C(),h()}catch(X){console.error("처리 실패:",X),alert("처리 실패: "+X.message)}};if(E)return e.jsx("div",{className:"annual-leave-container",children:"사원 정보를 불러오는 중..."});if(!a)return e.jsx("div",{className:"annual-leave-container",children:"사원 정보를 찾을 수 없습니다."});const m=a.customTotalLeave||N(a.joinDate),v=g(),P=m-v,R=(d-1)*z,T=R+z,B=n.slice(R,T);return e.jsxs("div",{className:"annual-leave-container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"연차 관리"}),e.jsx("button",{className:"register-btn",onClick:()=>f(!0),children:"연차 등록"})]}),e.jsxs("div",{className:"annual-leave-info",children:[e.jsxs("div",{className:"info-card",children:[e.jsx("h4",{children:"입사일"}),e.jsx("div",{className:"value",children:a.joinDate})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("h4",{children:"총 연차"}),e.jsxs("div",{className:"value",children:[m,"일"]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("h4",{children:"사용 연차"}),e.jsxs("div",{className:"value",children:[v,"일"]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("h4",{children:"남은 연차"}),e.jsxs("div",{className:"value remaining",children:[P,"일"]})]})]}),e.jsxs("div",{className:"leave-history",children:[e.jsx("h3",{children:"연차 사용 내역"}),n.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"연차 사용 내역이 없습니다."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"날짜"}),e.jsx("th",{children:"유형"}),e.jsx("th",{children:"사용일수"}),e.jsx("th",{children:"승인 상태"}),e.jsx("th",{children:"관리"})]})}),e.jsx("tbody",{children:B.map(p=>e.jsxs("tr",{children:[e.jsx("td",{children:p.isGrouped&&p.startDate!==p.endDate?`${p.startDate} ~ ${p.endDate}`:p.startDate||p.date}),e.jsx("td",{children:p.type}),e.jsx("td",{children:p.isGrouped&&p.totalDays>1?`${p.totalDays}일`:p.amount>0?`${p.amount}일`:"-"}),e.jsx("td",{children:e.jsx("span",{className:`status-badge status-${p.approvalStatus}`,children:p.approvalStatus==="approved"?"승인완료":p.approvalStatus==="rejected"?"반려":p.approvalStatus==="deletion-pending"?"취소대기":p.approvalStatus==="cancelled"?"취소됨":"승인대기"})}),e.jsx("td",{children:p.approvalStatus!=="deletion-pending"&&p.approvalStatus!=="cancelled"&&e.jsx("button",{className:"delete-btn",onClick:()=>y(p.isGrouped?p:p.id,p.date,p.type,p.approvalStatus,p.groupId),children:"취소"})})]},p.id))})]})}),n.length>z&&e.jsx(Wi,{currentPage:d,totalPages:Math.ceil(n.length/z),onPageChange:j})]})]}),o&&e.jsx(Vi,{onClose:()=>f(!1),onSubmit:b,remainingLeave:P})]})}function Yi(){const{user:s}=we(),[t,a]=l.useState([]),[i,n]=l.useState([]),[r,o]=l.useState(!0);l.useEffect(()=>{s&&f()},[s]);const f=async()=>{try{const h=ie(O(k,"employees"),W("approver","==",s.uid)),C=await se(h),N=[];C.forEach(g=>{N.push({id:g.id,...g.data()})}),n(N),N.length>0?d(N.map(g=>g.id)):o(!1)}catch(h){console.error("담당 사원 목록 로드 실패:",h),o(!1)}},d=async h=>{try{const C=ie(O(k,"leaveUsage"),W("approvalStatus","==","pending")),N=await se(C),g=ie(O(k,"leaveUsage"),W("approvalStatus","==","deletion-pending")),I=await se(g),b=[];for(const y of N.docs){const m=y.data();if(h.includes(m.userId)){const v=await se(ie(O(k,"employees"),W("__name__","==",m.userId))),P=v.empty?m.userId:v.docs[0].data().name;b.push({id:y.id,...m,userName:P,requestType:"approval"})}}for(const y of I.docs){const m=y.data();if(h.includes(m.userId)){const v=await se(ie(O(k,"employees"),W("__name__","==",m.userId))),P=v.empty?m.userId:v.docs[0].data().name;b.push({id:y.id,...m,userName:P,requestType:"deletion"})}}b.sort((y,m)=>(m.date||"").localeCompare(y.date||"")),a(b),o(!1)}catch(C){console.error("승인 대기 목록 로드 실패:",C),o(!1)}},j=async(h,C,N,g)=>{try{if(!confirm(`이 연차를 ${g==="approved"?"승인":"반려"}하시겠습니까?`))return;await xe(le(k,"leaveUsage",h),{approvalStatus:g,approvedBy:s.uid,approvedAt:ue()});const I=ie(O(k,"schedules"),W("userId","==",C),W("date","==",N));(await se(I)).forEach(async y=>{await xe(le(k,"schedules",y.id),{approvalStatus:g,approvedBy:s.uid,approvedAt:ue()})}),await Ce(O(k,"notifications"),{userId:C,title:g==="approved"?"연차 승인":"연차 반려",message:`${N} 연차 신청이 ${g==="approved"?"승인":"반려"}되었습니다.`,type:"leave-result",read:!1,createdAt:ue()}),alert(g==="approved"?"승인되었습니다.":"반려되었습니다."),f()}catch(I){console.error("처리 실패:",I),alert("처리 실패: "+I.message)}},E=async(h,C,N)=>{try{if(!confirm("이 연차 취소를 승인하시겠습니까?"))return;await xe(le(k,"leaveUsage",h),{approvalStatus:"cancelled",cancelledAt:ue()});const g=ie(O(k,"schedules"),W("userId","==",C),W("date","==",N));(await se(g)).forEach(async b=>{await xe(le(k,"schedules",b.id),{approvalStatus:"cancelled",cancelledAt:ue()})}),await Ce(O(k,"notifications"),{userId:C,title:"연차 취소 승인",message:`${N} 연차 취소가 승인되었습니다.`,type:"leave-cancellation",read:!1,createdAt:ue()}),alert("취소가 승인되었습니다."),f()}catch(g){console.error("처리 실패:",g),alert("처리 실패: "+g.message)}},D=async(h,C,N)=>{try{if(!confirm("이 연차 취소를 반려하시겠습니까?"))return;await xe(le(k,"leaveUsage",h),{approvalStatus:"approved",deletionRejectedAt:ue()});const g=ie(O(k,"schedules"),W("userId","==",C),W("date","==",N));(await se(g)).forEach(async b=>{await xe(le(k,"schedules",b.id),{approvalStatus:"approved",deletionRejectedAt:ue()})}),await Ce(O(k,"notifications"),{userId:C,title:"연차 취소 반려",message:`${N} 연차 취소가 반려되었습니다.`,type:"leave-cancellation-rejected",read:!1,createdAt:ue()}),alert("취소가 반려되었습니다."),f()}catch(g){console.error("처리 실패:",g),alert("처리 실패: "+g.message)}},z=h=>h?(h.toDate?h.toDate():new Date(h)).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"-";return r?e.jsx("div",{className:"approval-container",children:"로딩 중..."}):e.jsxs("div",{className:"approval-container",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{children:"연차 승인 관리"})}),e.jsxs("div",{className:"employee-section",children:[e.jsx("h3",{children:"담당 사원 목록"}),i.length>0?e.jsx("div",{className:"employee-tags",children:i.map(h=>e.jsx("span",{className:"employee-tag",children:h.name},h.id))}):e.jsx("p",{className:"no-employees",children:"담당 사원이 없습니다. 관리자에게 문의하세요."})]}),e.jsx("h3",{className:"list-title",children:"승인 대기 목록"}),t.length>0?e.jsx("div",{className:"approval-list",children:t.map(h=>e.jsx("div",{className:"approval-card",children:e.jsxs("div",{className:"approval-card-content",children:[e.jsxs("div",{className:"info-block",children:[e.jsx("div",{className:"info-label",children:"사원명"}),e.jsx("div",{className:"info-value employee-name",children:h.userName})]}),e.jsxs("div",{className:"info-block",children:[e.jsx("div",{className:"info-label",children:h.requestType==="deletion"?"🗑️ 삭제 요청":"연차 내용"}),e.jsxs("div",{className:"info-value",children:[h.requestType==="deletion"&&e.jsx("span",{className:"deletion-badge",children:"취소 요청"}),h.type,e.jsxs("span",{className:"leave-amount",children:["(",h.amount>0?`${h.amount}일`:"무급",")"]})]}),e.jsxs("div",{className:"leave-date",children:["📅 ",h.date]})]}),e.jsxs("div",{className:"info-block",children:[e.jsx("div",{className:"info-label",children:"신청일"}),e.jsx("div",{className:"info-value request-date",children:z(h.createdAt)})]}),e.jsx("div",{className:"approval-buttons",children:h.requestType==="deletion"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn approve-btn",onClick:()=>E(h.id,h.userId,h.date),children:"✓ 삭제 승인"}),e.jsx("button",{className:"btn reject-btn",onClick:()=>D(h.id,h.userId,h.date),children:"✕ 삭제 반려"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn approve-btn",onClick:()=>j(h.id,h.userId,h.date,"approved"),children:"✓ 승인"}),e.jsx("button",{className:"btn reject-btn",onClick:()=>j(h.id,h.userId,h.date,"rejected"),children:"✕ 반려"})]})})]})},h.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"📋"}),e.jsx("div",{className:"empty-text",children:"승인 대기중인 연차 신청이 없습니다."})]})]})}function Xi(){const{isPTScheduleEditor:s}=we(),[t,a]=l.useState(new Date),[i,n]=l.useState([]),[r,o]=l.useState(!1),[f,d]=l.useState(null),[j,E]=l.useState({}),[D,z]=l.useState([]),[h,C]=l.useState([]),N=["12:00","13:00","14:00","15:00","16:00"],g=["월","화","수","목","금"];l.useEffect(()=>{I(),m()},[t]);const I=async()=>{try{const M=(await se(O(k,"employees"))).docs.map($=>({id:$.id,...$.data()}));C(M)}catch(_){console.error("사원 목록 로드 실패:",_)}},b=(_,M)=>{const $=[],Q=new Date(_,M,1),te=new Date(_,M+1,0);let L=new Date(Q);const V=Q.getDay();V===0?L.setDate(L.getDate()-6):V!==1&&L.setDate(L.getDate()-(V-1));let K=1,q=new Date(L);for(;q<=te;){const G=[];for(let Y=0;Y<5;Y++){const pe=new Date(q);pe.setDate(q.getDate()+Y),G.push({date:new Date(pe),isCurrentMonth:pe.getMonth()===M})}if(G.some(Y=>Y.isCurrentMonth)){const Y=G.filter(ve=>ve.isCurrentMonth).map(ve=>ve.date),pe=Y[0],me=Y[Y.length-1];$.push({weekNumber:K,startDate:new Date(pe),endDate:new Date(me),dates:G}),K++}q.setDate(q.getDate()+7)}return $},y=_=>{const M=_.getFullYear(),$=String(_.getMonth()+1).padStart(2,"0"),Q=String(_.getDate()).padStart(2,"0");return`${M}-${$}-${Q}`},m=async()=>{o(!0);try{const _=t.getFullYear(),M=t.getMonth(),$=b(_,M),Q=`${_}-${String(M+1).padStart(2,"0")}`,te=le(k,"ptSchedules",Q),L=await rs(te),V=L.exists()?L.data():{},K=$.map(q=>{const G=`week${q.weekNumber}`,ee=V[G]||{},Y=ee.timeSlots||N,pe=ee.slots||{};return{...q,timeSlots:Y,slots:pe}});n(K)}catch(_){console.error("스케줄 로드 실패:",_)}o(!1)},v=_=>{const M=i.find($=>$.weekNumber===_);if(M){d(_);const $={};Object.keys(M.slots).forEach(Q=>{const te=M.slots[Q];typeof te=="string"?$[Q]={name:te,cancelled:!1}:$[Q]=te}),E($),z([...M.timeSlots])}},P=()=>{d(null),E({}),z([])},R=async _=>{try{const M=t.getFullYear(),$=t.getMonth(),Q=`${M}-${String($+1).padStart(2,"0")}`,te=`week${_}`,L={};Object.keys(j).forEach(G=>{const ee=j[G],Y=ee.name||"";Y&&Y!==""&&Y!=="-"&&(L[G]={name:Y,cancelled:ee.cancelled||!1})});const V=le(k,"ptSchedules",Q),K=await rs(V),q=K.exists()?K.data():{};q[te]={timeSlots:D,slots:L},await cs(V,q),alert("저장되었습니다."),d(null),E({}),z([]),m()}catch(M){console.error("저장 실패:",M),alert("저장 실패: "+M.message)}},T=(_,M)=>{E($=>({...$,[_]:{name:M,cancelled:!1}}))},B=_=>{E(M=>{const $=M[_]||{name:"",cancelled:!1};return{...M,[_]:{...$,cancelled:!0}}})},p=(_,M)=>{M==="오기입"?E($=>{const Q={...$};return delete Q[_],Q}):M&&E($=>({...$,[_]:{name:M,cancelled:!1}}))},u=()=>{const _=prompt("추가할 시간을 입력하세요 (예: 17:00, 09:30)");if(_){if(!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(_)){alert(`올바른 시간 형식이 아닙니다.
예시: 17:00, 09:30, 14:15`);return}if(D.includes(_)){alert("이미 존재하는 시간입니다.");return}z(M=>[...M,_].sort())}},c=_=>{if(!confirm(`${_} 시간대를 삭제하시겠습니까?
해당 시간의 모든 데이터가 삭제됩니다.`))return;z($=>$.filter(Q=>Q!==_));const M={...j};g.forEach($=>{delete M[`${$}-${_}`]}),E(M)},A=(_,M)=>{if(!M)return;if(!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(M)){alert("올바른 시간 형식이 아닙니다 (예: 17:00)");return}z(Q=>Q.map(te=>te===_?M:te));const $={...j};g.forEach(Q=>{const te=`${Q}-${_}`,L=`${Q}-${M}`;$[te]&&($[L]=$[te],delete $[te])}),E($)},S=()=>i.map(_=>{let M=0;return Object.values(_.slots).forEach($=>{const Q=typeof $=="string"?{name:$,cancelled:!1}:$;Q.name&&!Q.cancelled&&M++}),{week:_,count:M}}),X=()=>{a(_=>{const M=new Date(_);return M.setMonth(_.getMonth()-1),M}),d(null),E({}),z([])},U=()=>{a(_=>{const M=new Date(_);return M.setMonth(_.getMonth()+1),M}),d(null),E({}),z([])},ce=()=>{a(new Date),d(null),E({}),z([])},ne=S(),J=ne.reduce((_,M)=>_+M.count,0);return e.jsxs("div",{className:"pt-schedule-container",children:[e.jsxs("div",{className:"pt-schedule-header",children:[e.jsx("h2",{children:"PT 스케줄"}),e.jsxs("div",{className:"calendar-nav",children:[e.jsx("button",{className:"nav-btn",onClick:X,children:"◀ 이전달"}),e.jsx("button",{className:"nav-btn",onClick:ce,children:"오늘"}),e.jsx("button",{className:"nav-btn",onClick:U,children:"다음달 ▶"})]})]}),e.jsxs("div",{className:"pt-schedule-title",children:[t.getFullYear(),"년 ",t.getMonth()+1,"월 PT 스케줄"]}),r?e.jsx("div",{className:"loading-state",children:"로딩 중..."}):i.length===0?e.jsx("div",{className:"empty-state",children:"이번 달은 표시할 주차가 없습니다."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"weeks-container",children:i.map(_=>{const M=f===_.weekNumber,$=M?j:_.slots,Q=M?D:_.timeSlots;return e.jsxs("div",{className:"week-card",children:[e.jsxs("div",{className:"week-header",children:[e.jsxs("div",{children:[e.jsxs("h3",{children:["💪 ",_.weekNumber,"주차"]}),e.jsxs("p",{className:"week-date",children:[y(_.startDate)," ~ ",y(_.endDate)]})]}),s&&e.jsx("div",{className:"week-actions",children:M?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn-add-time",onClick:u,children:"+ 시간 추가"}),e.jsx("button",{className:"btn-save",onClick:()=>R(_.weekNumber),children:"저장"}),e.jsx("button",{className:"btn-cancel",onClick:P,children:"취소"})]}):e.jsx("button",{className:"btn-edit",onClick:()=>v(_.weekNumber),children:"수정"})})]}),e.jsx("div",{className:"schedule-table-wrapper",children:e.jsxs("table",{className:"schedule-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"시간"}),_.dates.map((te,L)=>e.jsxs("th",{className:te.isCurrentMonth?"":"other-month",children:[g[L],e.jsx("br",{}),e.jsx("span",{className:"date-number",children:te.date.getDate()})]},L))]})}),e.jsx("tbody",{children:Q.map(te=>e.jsxs("tr",{children:[e.jsx("td",{className:"time-cell",children:M?e.jsxs("div",{className:"time-edit",children:[e.jsx("input",{type:"text",value:te,onChange:L=>A(te,L.target.value),className:"time-input"}),e.jsx("button",{onClick:()=>c(te),className:"time-delete-btn",children:"✕"})]}):te}),g.map((L,V)=>{const K=`${L}-${te}`,q=$==null?void 0:$[K],G=typeof q=="string"?q:(q==null?void 0:q.name)||"",ee=(q==null?void 0:q.cancelled)||!1,Y=_.dates[V],pe=Y&&Y.isCurrentMonth;return e.jsx("td",{className:`slot-cell ${pe?"":"other-month"}`,children:pe?M?ee?e.jsxs("div",{className:"slot-cancelled",children:[e.jsx("span",{className:"cancelled-name",children:G}),e.jsxs("select",{value:"",onChange:me=>p(K,me.target.value),className:"slot-select",children:[e.jsx("option",{value:"",children:"변경"}),e.jsx("option",{value:"오기입",className:"delete-option",children:"🗑️ 오기입"}),h.map(me=>e.jsx("option",{value:me.name,children:me.name},me.id))]})]}):G?e.jsxs("div",{className:"slot-filled",children:[e.jsx("span",{children:G}),e.jsx("button",{onClick:()=>B(K),className:"slot-cancel-btn",children:"✕"})]}):e.jsxs("select",{value:"",onChange:me=>T(K,me.target.value),className:"slot-select",children:[e.jsx("option",{value:"",children:"선택"}),h.map(me=>e.jsx("option",{value:me.name,children:me.name},me.id))]}):e.jsx("span",{className:`slot-display ${ee?"cancelled":""}`,children:G||"-"}):e.jsx("span",{className:"disabled",children:"-"})},K)})]},te))})]})})]},_.weekNumber)})}),e.jsxs("div",{className:"monthly-stats",children:[e.jsxs("h3",{children:[t.getFullYear(),"년 ",t.getMonth()+1,"월 PT 이용 통계"]}),e.jsxs("table",{className:"stats-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"주차"}),e.jsx("th",{children:"기간"}),e.jsx("th",{children:"PT 횟수"})]})}),e.jsxs("tbody",{children:[ne.map(({week:_,count:M})=>e.jsxs("tr",{children:[e.jsxs("td",{children:[_.weekNumber,"주차"]}),e.jsxs("td",{children:[y(_.startDate)," ~ ",y(_.endDate)]}),e.jsxs("td",{className:"count-cell",children:[M,"회"]})]},_.weekNumber)),e.jsxs("tr",{className:"total-row",children:[e.jsx("td",{colSpan:"2",children:"합계"}),e.jsxs("td",{className:"count-cell",children:[J,"회"]})]})]})]})]})]})]})}function Gi(){const[s,t]=l.useState([]),[a,i]=l.useState([]),[n,r]=l.useState(""),[o,f]=l.useState("grid"),[d,j]=l.useState(!0);l.useEffect(()=>{E()},[]),l.useEffect(()=>{D()},[n,s]);const E=async()=>{j(!0);try{const g=(await se(O(k,"employees"))).docs.map(I=>({id:I.id,...I.data()}));g.sort((I,b)=>{if(I.department!==b.department)return(I.department||"").localeCompare(b.department||"");const y={대표:0,이사:1,팀장:2,매니저:3,사원:4},m=y[I.position]??999,v=y[b.position]??999;return m!==v?m-v:(I.name||"").localeCompare(b.name||"")}),t(g)}catch(N){console.error("사원 목록 로드 실패:",N)}j(!1)},D=()=>{if(!n.trim()){i(s);return}const N=n.toLowerCase(),g=s.filter(I=>(I.name||"").toLowerCase().includes(N)||(I.department||"").toLowerCase().includes(N)||(I.position||"").toLowerCase().includes(N)||(I.email||"").toLowerCase().includes(N)||(I.phone||"").toLowerCase().includes(N));i(g)},z=()=>{const N={};return s.forEach(g=>{const I=g.department||"미지정";N[I]||(N[I]=[]),N[I].push(g)}),N},h=N=>({대표:"#9C27B0",이사:"#E91E63",팀장:"#2196F3",매니저:"#4CAF50",사원:"#FF9800"})[N]||"#757575";if(d)return e.jsx("div",{className:"department-page",children:e.jsx("div",{className:"loading-state",children:"사원 정보를 불러오는 중..."})});const C=z();return e.jsxs("div",{className:"department-page",children:[e.jsxs("div",{className:"department-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx(oi,{size:28}),e.jsxs("div",{children:[e.jsx("h1",{children:"조직도"}),e.jsxs("p",{children:[s.length,"명의 사원"]})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(We,{size:18}),e.jsx("input",{type:"text",placeholder:"이름, 부서, 직급, 연락처 검색...",value:n,onChange:N=>r(N.target.value)})]}),e.jsxs("div",{className:"view-toggle",children:[e.jsx("button",{className:o==="grid"?"active":"",onClick:()=>f("grid"),title:"카드 보기",children:e.jsx(gi,{size:18})}),e.jsx("button",{className:o==="list"?"active":"",onClick:()=>f("list"),title:"목록 보기",children:e.jsx(Rt,{size:18})})]})]})]}),a.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx($e,{size:48}),e.jsx("p",{children:"검색 결과가 없습니다."})]}),o==="grid"?e.jsx("div",{className:"department-sections",children:Object.entries(C).map(([N,g])=>{const I=g.filter(b=>!n||a.some(y=>y.id===b.id));return I.length===0?null:e.jsxs("div",{className:"department-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:N}),e.jsxs("span",{className:"employee-count",children:[I.length,"명"]})]}),e.jsx("div",{className:"employee-grid",children:I.map(b=>e.jsxs("div",{className:"employee-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("div",{className:"avatar",children:(b.name||"?")[0]}),e.jsx("div",{className:"position-badge",style:{backgroundColor:h(b.position)},children:b.position||"직급 미지정"})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"employee-name",children:b.name||"이름 없음"}),e.jsx("p",{className:"employee-dept",children:b.department||"부서 미지정"}),e.jsxs("div",{className:"contact-info",children:[b.phone&&e.jsxs("div",{className:"contact-item",children:[e.jsx(It,{size:14}),e.jsx("span",{children:b.phone})]}),b.email&&e.jsxs("div",{className:"contact-item",children:[e.jsx(Ps,{size:14}),e.jsx("span",{children:b.email})]}),b.joinDate&&e.jsxs("div",{className:"contact-item",children:[e.jsx(Te,{size:14}),e.jsxs("span",{children:["입사: ",b.joinDate]})]})]})]})]},b.id))})]},N)})}):e.jsx("div",{className:"employee-table-container",children:e.jsxs("table",{className:"employee-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"이름"}),e.jsx("th",{children:"부서"}),e.jsx("th",{children:"직급"}),e.jsx("th",{children:"연락처"}),e.jsx("th",{children:"이메일"}),e.jsx("th",{children:"입사일"})]})}),e.jsx("tbody",{children:a.map(N=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"name-cell",children:[e.jsx("div",{className:"avatar small",children:(N.name||"?")[0]}),e.jsx("span",{className:"name-text",children:N.name||"이름 없음"})]})}),e.jsx("td",{children:N.department||"-"}),e.jsx("td",{children:e.jsx("span",{className:"position-tag",style:{backgroundColor:h(N.position)},children:N.position||"-"})}),e.jsx("td",{children:N.phone||"-"}),e.jsx("td",{children:N.email||"-"}),e.jsx("td",{children:N.joinDate||"-"})]},N.id))})]})})]})}function Qi(){const[s,t]=l.useState([]),[a,i]=l.useState([]),[n,r]=l.useState(""),[o,f]=l.useState(null),[d,j]=l.useState({}),[E,D]=l.useState(!1),[z,h]=l.useState(!0);l.useEffect(()=>{C()},[]),l.useEffect(()=>{N()},[n,s]);const C=async()=>{h(!0);try{const P=(await se(O(k,"employees"))).docs.map(R=>({id:R.id,...R.data()}));P.sort((R,T)=>(R.name||"").localeCompare(T.name||"")),t(P)}catch(v){console.error("사원 목록 로드 실패:",v),alert("사원 목록을 불러오는데 실패했습니다.")}h(!1)},N=()=>{if(!n.trim()){i(s);return}const v=n.toLowerCase(),P=s.filter(R=>(R.name||"").toLowerCase().includes(v)||(R.email||"").toLowerCase().includes(v)||(R.department||"").toLowerCase().includes(v));i(P)},g=v=>{f(v.id),j({...v})},I=()=>{f(null),j({})},b=async()=>{if(!d.name||!d.email){alert("이름과 이메일은 필수입니다.");return}try{const v=le(k,"employees",o);await xe(v,{name:d.name,email:d.email,department:d.department||"",position:d.position||"",phone:d.phone||"",joinDate:d.joinDate||"",customTotalLeave:Number(d.customTotalLeave)||null,isAdmin:d.isAdmin||!1,isSubAdmin:d.isSubAdmin||!1,isApprover:d.isApprover||!1,isPTScheduleEditor:d.isPTScheduleEditor||!1}),alert("수정되었습니다."),f(null),j({}),C()}catch(v){console.error("수정 실패:",v),alert("수정에 실패했습니다: "+v.message)}},y=async(v,P)=>{if(window.confirm(`${P} 사원을 정말 삭제하시겠습니까?

삭제하면 되돌릴 수 없습니다.`))try{await Be(le(k,"employees",v)),alert("삭제되었습니다."),C()}catch(R){console.error("삭제 실패:",R),alert("삭제에 실패했습니다: "+R.message)}},m=()=>{const[v,P]=l.useState({id:"",name:"",email:"",department:"",position:"",phone:"",joinDate:"",customTotalLeave:"",isAdmin:!1,isSubAdmin:!1,isApprover:!1,isPTScheduleEditor:!1}),R=async()=>{if(!v.id||!v.name||!v.email){alert("사원 ID, 이름, 이메일은 필수입니다.");return}try{await cs(le(k,"employees",v.id),{name:v.name,email:v.email,department:v.department||"",position:v.position||"",phone:v.phone||"",joinDate:v.joinDate||"",customTotalLeave:v.customTotalLeave?Number(v.customTotalLeave):null,isAdmin:v.isAdmin,isSubAdmin:v.isSubAdmin,isApprover:v.isApprover,isPTScheduleEditor:v.isPTScheduleEditor,createdAt:new Date().toISOString()}),alert("사원이 추가되었습니다."),D(!1),C()}catch(T){console.error("추가 실패:",T),alert("추가에 실패했습니다: "+T.message)}};return e.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:e.jsxs("div",{className:"modal-content large",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"사원 추가"}),e.jsx("button",{className:"close-btn",onClick:()=>D(!1),children:e.jsx(Ke,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"사원 ID (Firebase Auth UID) *"}),e.jsx("input",{type:"text",value:v.id,onChange:T=>P({...v,id:T.target.value}),placeholder:"Firebase Auth UID"}),e.jsx("small",{children:"Firebase Authentication의 사용자 UID를 입력하세요"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"이름 *"}),e.jsx("input",{type:"text",value:v.name,onChange:T=>P({...v,name:T.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"이메일 *"}),e.jsx("input",{type:"email",value:v.email,onChange:T=>P({...v,email:T.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"부서"}),e.jsx("input",{type:"text",value:v.department,onChange:T=>P({...v,department:T.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"직급"}),e.jsxs("select",{value:v.position,onChange:T=>P({...v,position:T.target.value}),children:[e.jsx("option",{value:"",children:"선택"}),e.jsx("option",{value:"대표",children:"대표"}),e.jsx("option",{value:"이사",children:"이사"}),e.jsx("option",{value:"팀장",children:"팀장"}),e.jsx("option",{value:"매니저",children:"매니저"}),e.jsx("option",{value:"사원",children:"사원"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"연락처"}),e.jsx("input",{type:"text",value:v.phone,onChange:T=>P({...v,phone:T.target.value}),placeholder:"010-1234-5678"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"입사일"}),e.jsx("input",{type:"date",value:v.joinDate,onChange:T=>P({...v,joinDate:T.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"연차 (커스텀)"}),e.jsx("input",{type:"number",value:v.customTotalLeave,onChange:T=>P({...v,customTotalLeave:T.target.value}),placeholder:"미입력시 입사일 기준 자동 계산"})]})]}),e.jsxs("div",{className:"permissions-section",children:[e.jsx("h3",{children:"권한 설정"}),e.jsxs("div",{className:"permission-checks",children:[e.jsxs("label",{className:"permission-check",children:[e.jsx("input",{type:"checkbox",checked:v.isAdmin,onChange:T=>P({...v,isAdmin:T.target.checked})}),e.jsx("span",{children:"관리자 (Admin)"}),e.jsx("small",{children:"전체 권한"})]}),e.jsxs("label",{className:"permission-check",children:[e.jsx("input",{type:"checkbox",checked:v.isSubAdmin,onChange:T=>P({...v,isSubAdmin:T.target.checked})}),e.jsx("span",{children:"부관리자 (Sub Admin)"}),e.jsx("small",{children:"사원 관리 권한"})]}),e.jsxs("label",{className:"permission-check",children:[e.jsx("input",{type:"checkbox",checked:v.isApprover,onChange:T=>P({...v,isApprover:T.target.checked})}),e.jsx("span",{children:"승인자 (Approver)"}),e.jsx("small",{children:"연차 승인 권한"})]}),e.jsxs("label",{className:"permission-check",children:[e.jsx("input",{type:"checkbox",checked:v.isPTScheduleEditor,onChange:T=>P({...v,isPTScheduleEditor:T.target.checked})}),e.jsx("span",{children:"PT 스케줄 편집자"}),e.jsx("small",{children:"PT 스케줄 수정 권한"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>D(!1),children:"취소"}),e.jsxs("button",{className:"btn-primary",onClick:R,children:[e.jsx(Re,{size:18}),"추가"]})]})]})})};return z?e.jsx("div",{className:"admin-employees-page",children:e.jsx("div",{className:"loading-state",children:"사원 목록을 불러오는 중..."})}):e.jsxs("div",{className:"admin-employees-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx($e,{size:28}),e.jsxs("div",{children:[e.jsx("h1",{children:"사원 관리"}),e.jsx("p",{children:"권한 설정 및 사원 정보 관리"})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsx("input",{type:"text",className:"search-input",placeholder:"이름, 이메일, 부서 검색...",value:n,onChange:v=>r(v.target.value)}),e.jsxs("button",{className:"btn-primary",onClick:()=>D(!0),children:[e.jsx(Re,{size:18}),"사원 추가"]})]})]}),e.jsxs("div",{className:"info-banner",children:[e.jsx(os,{size:20}),e.jsxs("div",{children:[e.jsx("strong",{children:"권한 안내:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"관리자:"})," 모든 메뉴 접근 가능 (사원 관리, 연차 관리, 결재선 관리, Slack 설정)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"부관리자:"})," 관리자와 동일하지만 최고 권한은 없음"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"승인자:"})," 연차 승인 메뉴 표시, 담당 사원의 연차 승인/반려"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"PT 스케줄 편집자:"})," PT 스케줄 수정 권한"]})]})]})]}),e.jsxs("div",{className:"employees-table-container",children:[e.jsxs("table",{className:"employees-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"이름"}),e.jsx("th",{children:"이메일"}),e.jsx("th",{children:"부서"}),e.jsx("th",{children:"직급"}),e.jsx("th",{children:"연락처"}),e.jsx("th",{children:"입사일"}),e.jsx("th",{children:"연차"}),e.jsx("th",{children:"권한"}),e.jsx("th",{children:"작업"})]})}),e.jsx("tbody",{children:a.map(v=>e.jsx("tr",{children:o===v.id?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsx("input",{type:"text",value:d.name||"",onChange:P=>j({...d,name:P.target.value}),className:"table-input"})}),e.jsx("td",{children:e.jsx("input",{type:"email",value:d.email||"",onChange:P=>j({...d,email:P.target.value}),className:"table-input"})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:d.department||"",onChange:P=>j({...d,department:P.target.value}),className:"table-input"})}),e.jsx("td",{children:e.jsxs("select",{value:d.position||"",onChange:P=>j({...d,position:P.target.value}),className:"table-input",children:[e.jsx("option",{value:"",children:"선택"}),e.jsx("option",{value:"대표",children:"대표"}),e.jsx("option",{value:"이사",children:"이사"}),e.jsx("option",{value:"팀장",children:"팀장"}),e.jsx("option",{value:"매니저",children:"매니저"}),e.jsx("option",{value:"사원",children:"사원"})]})}),e.jsx("td",{children:e.jsx("input",{type:"text",value:d.phone||"",onChange:P=>j({...d,phone:P.target.value}),className:"table-input"})}),e.jsx("td",{children:e.jsx("input",{type:"date",value:d.joinDate||"",onChange:P=>j({...d,joinDate:P.target.value}),className:"table-input"})}),e.jsx("td",{children:e.jsx("input",{type:"number",value:d.customTotalLeave||"",onChange:P=>j({...d,customTotalLeave:P.target.value}),className:"table-input small",placeholder:"자동"})}),e.jsx("td",{children:e.jsxs("div",{className:"permission-checkboxes",children:[e.jsxs("label",{title:"관리자",children:[e.jsx("input",{type:"checkbox",checked:d.isAdmin||!1,onChange:P=>j({...d,isAdmin:P.target.checked})}),e.jsx("span",{children:"관리자"})]}),e.jsxs("label",{title:"부관리자",children:[e.jsx("input",{type:"checkbox",checked:d.isSubAdmin||!1,onChange:P=>j({...d,isSubAdmin:P.target.checked})}),e.jsx("span",{children:"부관리자"})]}),e.jsxs("label",{title:"승인자",children:[e.jsx("input",{type:"checkbox",checked:d.isApprover||!1,onChange:P=>j({...d,isApprover:P.target.checked})}),e.jsx("span",{children:"승인자"})]}),e.jsxs("label",{title:"PT 편집자",children:[e.jsx("input",{type:"checkbox",checked:d.isPTScheduleEditor||!1,onChange:P=>j({...d,isPTScheduleEditor:P.target.checked})}),e.jsx("span",{children:"PT"})]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-success small",onClick:b,title:"저장",children:e.jsx(js,{size:16})}),e.jsx("button",{className:"btn-secondary small",onClick:I,title:"취소",children:e.jsx(Ke,{size:16})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"name-cell",children:e.jsx("strong",{children:v.name||"-"})}),e.jsx("td",{children:v.email||"-"}),e.jsx("td",{children:v.department||"-"}),e.jsx("td",{children:v.position||"-"}),e.jsx("td",{children:v.phone||"-"}),e.jsx("td",{children:v.joinDate||"-"}),e.jsx("td",{className:"center",children:v.customTotalLeave?e.jsxs("span",{className:"custom-leave",children:[v.customTotalLeave,"일"]}):e.jsx("span",{className:"auto-leave",children:"자동"})}),e.jsx("td",{children:e.jsxs("div",{className:"permission-badges",children:[v.isAdmin&&e.jsx("span",{className:"badge admin",children:"관리자"}),v.isSubAdmin&&e.jsx("span",{className:"badge sub-admin",children:"부관리자"}),v.isApprover&&e.jsx("span",{className:"badge approver",children:"승인자"}),v.isPTScheduleEditor&&e.jsx("span",{className:"badge pt-editor",children:"PT"}),!v.isAdmin&&!v.isSubAdmin&&!v.isApprover&&!v.isPTScheduleEditor&&e.jsx("span",{className:"badge default",children:"일반"})]})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-secondary small",onClick:()=>g(v),title:"수정",children:e.jsx(zt,{size:16})}),e.jsx("button",{className:"btn-danger small",onClick:()=>y(v.id,v.name),title:"삭제",children:e.jsx(ts,{size:16})})]})})]})},v.id))})]}),a.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx($e,{size:48}),e.jsx("p",{children:"검색 결과가 없습니다."})]})]}),E&&e.jsx(m,{})]})}function Zi(){const[s,t]=l.useState([]),[a,i]=l.useState([]),[n,r]=l.useState({}),[o,f]=l.useState(!0),[d,j]=l.useState(!1);l.useEffect(()=>{E()},[]);const E=async()=>{f(!0);try{const I=(await se(O(k,"employees"))).docs.map(m=>({id:m.id,...m.data()}));I.sort((m,v)=>(m.name||"").localeCompare(v.name||""));const b=I.filter(m=>m.isApprover||m.isAdmin||m.isSubAdmin),y={};I.forEach(m=>{y[m.id]=m.approver||""}),t(I),i(b),r(y)}catch(g){console.error("데이터 로드 실패:",g),alert("데이터를 불러오는데 실패했습니다.")}f(!1)},D=(g,I)=>{r({...n,[g]:I})},z=async()=>{if(window.confirm("결재선을 저장하시겠습니까?")){j(!0);try{const g=[];for(const[I,b]of Object.entries(n)){const y=le(k,"employees",I);g.push(xe(y,{approver:b||null}))}await Promise.all(g),alert("결재선이 저장되었습니다."),E()}catch(g){console.error("저장 실패:",g),alert("저장에 실패했습니다: "+g.message)}j(!1)}},h=()=>{const g={};return s.forEach(I=>{const b=I.department||"미지정";g[b]||(g[b]=[]),g[b].push(I)}),g},C=g=>n[g]===g;if(o)return e.jsx("div",{className:"approval-line-page",children:e.jsx("div",{className:"loading-state",children:"결재선 정보를 불러오는 중..."})});const N=h();return e.jsxs("div",{className:"approval-line-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx(et,{size:28}),e.jsxs("div",{children:[e.jsx("h1",{children:"결재선 관리"}),e.jsx("p",{children:"사원별 연차 승인자를 지정합니다"})]})]}),e.jsxs("button",{className:"btn-primary",onClick:z,disabled:d,children:[e.jsx(js,{size:18}),d?"저장 중...":"결재선 저장"]})]}),e.jsxs("div",{className:"info-banner",children:[e.jsx(os,{size:20}),e.jsxs("div",{children:[e.jsx("strong",{children:"결재선 안내:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"각 사원의 연차 신청을 승인할 승인자를 지정합니다"}),e.jsx("li",{children:"승인자로 지정할 수 있는 사람: 관리자, 부관리자, 승인자 권한이 있는 사원"}),e.jsx("li",{children:"승인자가 없으면 해당 사원의 연차는 자동 승인되지 않습니다"}),e.jsxs("li",{children:[e.jsx("strong",{children:"주의:"})," 자기 자신을 승인자로 지정하면 안 됩니다"]})]})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx($e,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"전체 사원"}),e.jsx("div",{className:"stat-value",children:s.length}),e.jsx("p",{className:"stat-label",children:"명"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(_s,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"승인자 지정"}),e.jsx("div",{className:"stat-value",children:Object.values(n).filter(g=>g).length}),e.jsx("p",{className:"stat-label",children:"명 설정됨"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(et,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"가능한 승인자"}),e.jsx("div",{className:"stat-value",children:a.length}),e.jsx("p",{className:"stat-label",children:"명 등록됨"})]})]})]}),e.jsx("div",{className:"department-sections",children:Object.entries(N).map(([g,I])=>e.jsxs("div",{className:"department-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:g}),e.jsxs("span",{className:"employee-count",children:[I.length,"명"]})]}),e.jsx("div",{className:"approval-grid",children:I.map(b=>e.jsxs("div",{className:`approval-card ${C(b.id)?"warning":""}`,children:[e.jsxs("div",{className:"employee-info",children:[e.jsx("div",{className:"avatar",children:(b.name||"?")[0]}),e.jsxs("div",{className:"employee-details",children:[e.jsx("h3",{children:b.name||"이름 없음"}),e.jsx("p",{children:b.position||"직급 미지정"}),(b.isAdmin||b.isSubAdmin||b.isApprover)&&e.jsxs("div",{className:"role-badges",children:[b.isAdmin&&e.jsx("span",{className:"role-badge admin",children:"관리자"}),b.isSubAdmin&&e.jsx("span",{className:"role-badge sub-admin",children:"부관리자"}),b.isApprover&&e.jsx("span",{className:"role-badge approver",children:"승인자"})]})]})]}),e.jsxs("div",{className:"approver-select",children:[e.jsx("label",{children:"승인자"}),e.jsxs("select",{value:n[b.id]||"",onChange:y=>D(b.id,y.target.value),className:C(b.id)?"error":"",children:[e.jsx("option",{value:"",children:"선택 안 함"}),a.map(y=>e.jsxs("option",{value:y.id,disabled:y.id===b.id,children:[y.name,y.isAdmin&&" (관리자)",y.isSubAdmin&&" (부관리자)",y.isApprover&&" (승인자)",y.id===b.id&&" (자기 자신 - 선택 불가)"]},y.id))]}),C(b.id)&&e.jsx("small",{className:"error-text",children:"⚠️ 자기 자신을 승인자로 지정할 수 없습니다"})]})]},b.id))})]},g))}),Object.values(n).filter(g=>!g).length>0&&e.jsxs("div",{className:"warning-banner",children:[e.jsx(os,{size:20}),e.jsxs("div",{children:[e.jsx("strong",{children:"경고:"})," 승인자가 지정되지 않은 사원이 ",Object.values(n).filter(g=>!g).length,"명 있습니다. 승인자가 없으면 연차 승인 프로세스가 작동하지 않습니다."]})]})]})}function Ji(){const[s,t]=l.useState([]),[a,i]=l.useState({}),[n,r]=l.useState([]),[o,f]=l.useState(""),[d,j]=l.useState("all"),[E,D]=l.useState(!0),[z,h]=l.useState(!1);l.useEffect(()=>{C()},[]),l.useEffect(()=>{g()},[o,d,s,a]);const C=async()=>{D(!0);try{const T=(await se(O(k,"employees"))).docs.map(u=>({id:u.id,...u.data()})),B=await se(O(k,"leaveUsage")),p={};T.forEach(u=>{p[u.id]={total:N(u),used:0,pending:0,approved:0,details:[]}}),B.docs.forEach(u=>{const c={id:u.id,...u.data()},A=c.userId;p[A]&&(p[A].details.push(c),c.approvalStatus==="approved"?(p[A].approved+=c.amount||0,p[A].used+=c.amount||0):c.approvalStatus==="pending"&&(p[A].pending+=c.amount||0,p[A].used+=c.amount||0))}),t(T),i(p)}catch(R){console.error("데이터 로드 실패:",R),alert("데이터를 불러오는데 실패했습니다.")}D(!1)},N=R=>{if(R.customTotalLeave)return R.customTotalLeave;if(!R.joinDate)return 15;const T=new Date(R.joinDate),B=new Date,p=B.getFullYear()-T.getFullYear();if(p<1){const u=(B.getFullYear()-T.getFullYear())*12+(B.getMonth()-T.getMonth());return Math.floor(u)}else return 15+Math.min(p-1,10)},g=()=>{let R=s;if(o.trim()){const T=o.toLowerCase();R=R.filter(B=>(B.name||"").toLowerCase().includes(T)||(B.department||"").toLowerCase().includes(T)||(B.email||"").toLowerCase().includes(T))}d!=="all"&&(R=R.filter(T=>T.department===d)),r(R)},I=()=>{const R=new Set;return s.forEach(T=>{T.department&&R.add(T.department)}),Array.from(R).sort()},b=async(R,T)=>{var c;const B=((c=a[R])==null?void 0:c.total)||15,p=prompt(`${T}님의 연차를 조정합니다.
현재: ${B}일
새로운 연차 일수:`,B);if(p===null)return;const u=parseInt(p);if(isNaN(u)||u<0){alert("올바른 숫자를 입력하세요.");return}try{await xe(le(k,"employees",R),{customTotalLeave:u}),alert("연차가 조정되었습니다."),C()}catch(A){console.error("연차 조정 실패:",A),alert("연차 조정에 실패했습니다: "+A.message)}},y=()=>{const[R,T]=l.useState("all"),[B,p]=l.useState(""),[u,c]=l.useState(15),A=async()=>{let S=[];if(R==="all")S=s;else if(R==="department"){if(!B){alert("부서를 선택하세요.");return}S=s.filter(U=>U.department===B)}if(S.length===0){alert("대상 사원이 없습니다.");return}const X=`${S.length}명에게 ${u}일의 연차를 일괄 부여하시겠습니까?`;if(window.confirm(X))try{const U=S.map(ce=>xe(le(k,"employees",ce.id),{customTotalLeave:u}));await Promise.all(U),alert("연차가 일괄 부여되었습니다."),h(!1),C()}catch(U){console.error("일괄 부여 실패:",U),alert("일괄 부여에 실패했습니다: "+U.message)}};return e.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:e.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"연차 일괄 부여"}),e.jsx("button",{className:"close-btn",onClick:()=>h(!1),children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"부여 대상"}),e.jsxs("select",{value:R,onChange:S=>T(S.target.value),children:[e.jsx("option",{value:"all",children:"전체 사원"}),e.jsx("option",{value:"department",children:"부서별"})]})]}),R==="department"&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"부서 선택"}),e.jsxs("select",{value:B,onChange:S=>p(S.target.value),children:[e.jsx("option",{value:"",children:"선택하세요"}),I().map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"연차 일수"}),e.jsx("input",{type:"number",value:u,onChange:S=>c(parseInt(S.target.value)),min:"0"})]}),e.jsxs("div",{className:"info-box",children:[e.jsx("strong",{children:"안내:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"기존 연차 설정을 덮어씁니다"}),e.jsx("li",{children:"이미 사용한 연차는 영향받지 않습니다"}),e.jsx("li",{children:"입사일 기준 자동 계산을 무시합니다"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>h(!1),children:"취소"}),e.jsxs("button",{className:"btn-primary",onClick:A,children:[e.jsx(Js,{size:18}),"일괄 부여"]})]})]})})},m=()=>{const R=[];R.push(["이름","부서","직급","총 연차","사용 연차","잔여 연차","승인 대기"]),n.forEach(u=>{const c=a[u.id]||{total:0,used:0,pending:0};R.push([u.name||"",u.department||"",u.position||"",c.total,c.approved,c.total-c.used,c.pending])});const T=R.map(u=>u.join(",")).join(`
`),B=new Blob(["\uFEFF"+T],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(B),p.download=`연차현황_${new Date().toISOString().split("T")[0]}.csv`,p.click()},v=()=>{const R={totalEmployees:n.length,totalLeave:0,usedLeave:0,remainingLeave:0,pendingLeave:0};return n.forEach(T=>{const B=a[T.id]||{total:0,pending:0};R.totalLeave+=B.total,R.usedLeave+=B.approved,R.pendingLeave+=B.pending}),R.remainingLeave=R.totalLeave-R.usedLeave-R.pendingLeave,R};if(E)return e.jsx("div",{className:"admin-leave-page",children:e.jsx("div",{className:"loading-state",children:"데이터를 불러오는 중..."})});const P=v();return e.jsxs("div",{className:"admin-leave-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx(Te,{size:28}),e.jsxs("div",{children:[e.jsx("h1",{children:"사원 연차 관리"}),e.jsx("p",{children:"전체 사원의 연차 현황을 조회하고 관리합니다"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn-secondary",onClick:C,children:[e.jsx(Mi,{size:18}),"새로고침"]}),e.jsxs("button",{className:"btn-secondary",onClick:m,children:[e.jsx(vi,{size:18}),"엑셀 다운로드"]}),e.jsxs("button",{className:"btn-primary",onClick:()=>h(!0),children:[e.jsx(Js,{size:18}),"일괄 부여"]})]})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon blue",children:e.jsx($e,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"전체 사원"}),e.jsx("div",{className:"stat-value",children:P.totalEmployees}),e.jsx("p",{className:"stat-label",children:"명"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon green",children:e.jsx(lt,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"총 연차"}),e.jsx("div",{className:"stat-value",children:P.totalLeave}),e.jsx("p",{className:"stat-label",children:"일"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon orange",children:e.jsx(Te,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"사용 연차"}),e.jsx("div",{className:"stat-value",children:P.usedLeave}),e.jsx("p",{className:"stat-label",children:"일"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon purple",children:e.jsx(lt,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"잔여 연차"}),e.jsx("div",{className:"stat-value",children:P.remainingLeave}),e.jsx("p",{className:"stat-label",children:"일"})]})]})]}),e.jsxs("div",{className:"filter-section",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(We,{size:18}),e.jsx("input",{type:"text",placeholder:"이름, 부서, 이메일 검색...",value:o,onChange:R=>f(R.target.value)})]}),e.jsxs("div",{className:"filter-box",children:[e.jsx(fi,{size:18}),e.jsxs("select",{value:d,onChange:R=>j(R.target.value),children:[e.jsx("option",{value:"all",children:"전체 부서"}),I().map(R=>e.jsx("option",{value:R,children:R},R))]})]})]}),e.jsxs("div",{className:"leave-table-container",children:[e.jsxs("table",{className:"leave-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"이름"}),e.jsx("th",{children:"부서"}),e.jsx("th",{children:"직급"}),e.jsx("th",{children:"총 연차"}),e.jsx("th",{children:"사용"}),e.jsx("th",{children:"대기"}),e.jsx("th",{children:"잔여"}),e.jsx("th",{children:"사용률"}),e.jsx("th",{children:"작업"})]})}),e.jsx("tbody",{children:n.map(R=>{const T=a[R.id]||{total:0,used:0,pending:0,approved:0},B=T.total-T.used,p=T.total>0?(T.approved/T.total*100).toFixed(1):0;return e.jsxs("tr",{children:[e.jsx("td",{className:"name-cell",children:e.jsx("strong",{children:R.name||"이름 없음"})}),e.jsx("td",{children:R.department||"-"}),e.jsx("td",{children:R.position||"-"}),e.jsxs("td",{className:"number-cell",children:[T.total,"일"]}),e.jsxs("td",{className:"number-cell used",children:[T.approved,"일"]}),e.jsxs("td",{className:"number-cell pending",children:[T.pending,"일"]}),e.jsx("td",{className:"number-cell remaining",children:e.jsxs("span",{className:B<3?"warning":"",children:[B,"일"]})}),e.jsx("td",{className:"number-cell",children:e.jsxs("div",{className:"progress-bar",children:[e.jsx("div",{className:"progress-fill",style:{width:`${Math.min(p,100)}%`}}),e.jsxs("span",{className:"progress-text",children:[p,"%"]})]})}),e.jsx("td",{children:e.jsx("div",{className:"action-buttons",children:e.jsx("button",{className:"btn-icon",onClick:()=>b(R.id,R.name),title:"연차 조정",children:e.jsx(zt,{size:16})})})})]},R.id)})})]}),n.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx($e,{size:48}),e.jsx("p",{children:"검색 결과가 없습니다."})]})]}),z&&e.jsx(y,{})]})}const el=()=>{const{user:s,userData:t}=we(),[a,i]=l.useState([]),[n,r]=l.useState([]),[o,f]=l.useState([]),[d,j]=l.useState(null),[E,D]=l.useState(!1),[z,h]=l.useState(""),[C,N]=l.useState("personal"),[g,I]=l.useState({personal:!0,team:!0}),[b,y]=l.useState([]),[m,v]=l.useState(null),[P,R]=l.useState(""),[T,B]=l.useState([]),[p,u]=l.useState(!1),[c,A]=l.useState(""),[S,X]=l.useState(""),[U,ce]=l.useState(!1),[ne,J]=l.useState(null),[_,M]=l.useState(!1),$=l.useRef(null),Q=l.useRef(null);l.useEffect(()=>{s&&te()},[s]),l.useEffect(()=>{d?L(d.id):(y([]),B([]))},[d]),l.useEffect(()=>{V()},[b,P,p]),l.useEffect(()=>{m&&(X(m.content||""),A(m.title||""),setTimeout(()=>{$.current&&!$.current.textContent&&($.current.innerHTML=m.content||"")},0))},[m==null?void 0:m.id]),l.useEffect(()=>(m&&(c!==m.title||S!==m.content)&&(Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{Y()},1e3)),()=>{Q.current&&clearTimeout(Q.current)}),[c,S]);const te=async()=>{try{const w=O(k,"projects");return Me(w,H=>{const he=[],je=[];H.forEach(fe=>{const ye={id:fe.id,...fe.data()};ye.type==="personal"?ye.userId===s.uid&&he.push(ye):ye.type==="team"&&je.push(ye)}),he.sort((fe,ye)=>(fe.name||"").localeCompare(ye.name||"")),je.sort((fe,ye)=>(fe.name||"").localeCompare(ye.name||"")),r(he),f(je),i([...he,...je]),!d&&(he.length>0||je.length>0)&&j(he[0]||je[0])})}catch(w){console.error("프로젝트 로드 실패:",w)}},L=async w=>{try{const oe=O(k,"notes"),H=ie(oe,W("projectId","==",w),Ie("updatedAt","desc"));return Me(H,je=>{const fe=[];je.forEach(ye=>{fe.push({id:ye.id,...ye.data()})}),y(fe),m&&!fe.find(ye=>ye.id===m.id)&&(fe.length>0?ee(fe[0]):(v(null),A(""),X("")))})}catch(oe){console.error("노트 로드 실패:",oe),alert("노트 로딩 실패: "+oe.message)}},V=()=>{let w=[...b];if(p&&(w=w.filter(oe=>oe.favorite)),P){const oe=P.toLowerCase();w=w.filter(H=>{var he,je;return((he=H.title)==null?void 0:he.toLowerCase().includes(oe))||((je=H.content)==null?void 0:je.toLowerCase().includes(oe))})}B(w)},K=async()=>{if(!z.trim()){alert("프로젝트 이름을 입력하세요.");return}try{const w={name:z.trim(),type:C,createdBy:s.uid,createdByName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||s.email,createdAt:ue()};C==="personal"&&(w.userId=s.uid);const oe=await Ce(O(k,"projects"),w);D(!1),h(""),N("personal"),j({id:oe.id,...w}),alert("프로젝트가 생성되었습니다!")}catch(w){console.error("프로젝트 생성 실패:",w),alert("프로젝트 생성에 실패했습니다.")}},q=async(w,oe)=>{if(oe.stopPropagation(),!!confirm("프로젝트를 삭제하면 모든 노트도 함께 삭제됩니다. 계속하시겠습니까?"))try{const H=ie(O(k,"notes"),W("projectId","==",w)),je=(await se(H)).docs.map(fe=>Be(fe.ref));if(await Promise.all(je),await Be(le(k,"projects",w)),(d==null?void 0:d.id)===w){const fe=a.filter(ye=>ye.id!==w);j(fe[0]||null)}alert("프로젝트가 삭제되었습니다.")}catch(H){console.error("프로젝트 삭제 실패:",H),alert("프로젝트 삭제에 실패했습니다.")}},G=async()=>{if(!d){alert("프로젝트를 먼저 선택하세요.");return}try{const w={projectId:d.id,title:"제목 없음",content:"",userId:s.uid,type:d.type,favorite:!1,createdAt:ue(),updatedAt:ue()},H={id:(await Ce(O(k,"notes"),w)).id,...w};ee(H)}catch(w){console.error("노트 생성 실패:",w),alert("노트 생성에 실패했습니다.")}},ee=w=>{v(w),A(w.title||""),X(w.content||""),$.current&&($.current.innerHTML=w.content||""),window.innerWidth<=768&&M(!0)},Y=async()=>{if(m)try{ce(!0);const w=le(k,"notes",m.id);await xe(w,{title:c,content:S,updatedAt:ue()}),J(new Date),setTimeout(()=>ce(!1),500)}catch(w){console.error("노트 저장 실패:",w),ce(!1)}},pe=async(w,oe)=>{if(oe.stopPropagation(),!!confirm("이 노트를 삭제하시겠습니까?"))try{if(await Be(le(k,"notes",w)),(m==null?void 0:m.id)===w){const H=b.filter(he=>he.id!==w);H.length>0?ee(H[0]):(v(null),A(""),X(""))}alert("노트가 삭제되었습니다.")}catch(H){console.error("노트 삭제 실패:",H),alert("노트 삭제에 실패했습니다.")}},me=async(w,oe,H)=>{H.stopPropagation();try{const he=le(k,"notes",w);await xe(he,{favorite:!oe})}catch(he){console.error("즐겨찾기 토글 실패:",he)}},ve=(w,oe=null)=>{var H;document.execCommand(w,!1,oe),(H=$.current)==null||H.focus()},Ue=()=>{const w=prompt("링크 URL을 입력하세요:");w&&ve("createLink",w)},De=()=>{$.current&&X($.current.innerHTML)},Ae=()=>{if(!ne)return"";const oe=new Date-ne;return oe<5e3?"방금 저장됨":oe<6e4?"저장됨":ne.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})+" 저장됨"};return e.jsxs("div",{className:`notes-page-v2 ${_?"mobile-editor-active":""}`,children:[e.jsxs("div",{className:"projects-sidebar-v2",children:[e.jsx("div",{className:"sidebar-header-v2",children:e.jsx("h2",{children:"📚 노트"})}),e.jsxs("div",{className:"project-section-v2",children:[e.jsxs("div",{className:"section-header-v2",onClick:()=>I(w=>({...w,personal:!w.personal})),children:[g.personal?e.jsx(ds,{size:16}):e.jsx(hs,{size:16}),e.jsx(Fe,{size:16}),e.jsx("span",{children:"개인 프로젝트"}),e.jsx("button",{className:"btn-icon-tiny",onClick:w=>{w.stopPropagation(),N("personal"),D(!0)},title:"프로젝트 추가",children:e.jsx(Re,{size:14})})]}),g.personal&&e.jsx("div",{className:"project-list-v2",children:n.length===0?e.jsxs("div",{className:"empty-hint-v2",children:[e.jsx("p",{children:"프로젝트가 없습니다"}),e.jsx("button",{className:"btn-create-hint-v2",onClick:()=>{N("personal"),D(!0)},children:"첫 프로젝트 만들기"})]}):n.map(w=>e.jsxs("div",{className:`project-item-v2 ${(d==null?void 0:d.id)===w.id?"active":""}`,onClick:()=>j(w),children:[e.jsx(Fe,{size:16}),e.jsx("span",{className:"project-name",children:w.name}),e.jsx("button",{className:"btn-delete-tiny",onClick:oe=>q(w.id,oe),title:"프로젝트 삭제",children:e.jsx(ts,{size:12})})]},w.id))})]}),e.jsxs("div",{className:"project-section-v2",children:[e.jsxs("div",{className:"section-header-v2",onClick:()=>I(w=>({...w,team:!w.team})),children:[g.team?e.jsx(ds,{size:16}):e.jsx(hs,{size:16}),e.jsx(Fe,{size:16}),e.jsx("span",{children:"팀 프로젝트"}),e.jsx("button",{className:"btn-icon-tiny",onClick:w=>{w.stopPropagation(),N("team"),D(!0)},title:"프로젝트 추가",children:e.jsx(Re,{size:14})})]}),g.team&&e.jsx("div",{className:"project-list-v2",children:o.length===0?e.jsxs("div",{className:"empty-hint-v2",children:[e.jsx("p",{children:"프로젝트가 없습니다"}),e.jsx("button",{className:"btn-create-hint-v2",onClick:()=>{N("team"),D(!0)},children:"첫 프로젝트 만들기"})]}):o.map(w=>e.jsxs("div",{className:`project-item-v2 ${(d==null?void 0:d.id)===w.id?"active":""}`,onClick:()=>j(w),children:[e.jsx(Fe,{size:16}),e.jsx("span",{className:"project-name",children:w.name}),w.createdBy===s.uid&&e.jsx("button",{className:"btn-delete-tiny",onClick:oe=>q(w.id,oe),title:"프로젝트 삭제",children:e.jsx(ts,{size:12})})]},w.id))})]}),e.jsx("div",{className:"project-add-section-v2",children:e.jsxs("button",{className:"btn-add-project-v2",onClick:()=>D(!0),children:[e.jsx(Zs,{size:16}),e.jsx("span",{children:"새 프로젝트 만들기"})]})})]}),e.jsxs("div",{className:"notes-list-v2",children:[e.jsxs("div",{className:"notes-list-header-v2",children:[e.jsxs("div",{className:"search-box-v2",children:[e.jsx(We,{size:16}),e.jsx("input",{type:"text",placeholder:"노트 검색...",value:P,onChange:w=>R(w.target.value)})]}),e.jsxs("div",{className:"list-actions-v2",children:[e.jsx("button",{className:`btn-filter-v2 ${p?"active":""}`,onClick:()=>u(!p),title:"즐겨찾기만 보기",children:e.jsx(it,{size:16,fill:p?"currentColor":"none"})}),e.jsxs("button",{className:"btn-primary-v2",onClick:G,disabled:!d,title:"새 노트",children:[e.jsx(Re,{size:16}),e.jsx("span",{children:"새 노트"})]})]})]}),e.jsx("div",{className:"notes-list-content-v2",children:d?T.length===0?e.jsxs("div",{className:"empty-state-v2",children:[e.jsx(as,{size:48}),e.jsx("p",{children:P||p?"노트가 없습니다":"첫 노트를 만들어보세요"}),!P&&!p&&e.jsxs("button",{className:"btn-create-large-v2",onClick:G,children:[e.jsx(Re,{size:20}),e.jsx("span",{children:"노트 만들기"})]})]}):T.map(w=>{var oe;return e.jsxs("div",{className:`note-item-v2 ${(m==null?void 0:m.id)===w.id?"active":""}`,onClick:()=>ee(w),children:[e.jsxs("div",{className:"note-item-header-v2",children:[e.jsx("h3",{children:w.title||"제목 없음"}),e.jsxs("div",{className:"note-item-actions-v2",children:[e.jsx("button",{className:"btn-icon-small",onClick:H=>me(w.id,w.favorite,H),title:w.favorite?"즐겨찾기 해제":"즐겨찾기",children:e.jsx(it,{size:14,fill:w.favorite?"currentColor":"none"})}),e.jsx("button",{className:"btn-icon-small",onClick:H=>pe(w.id,H),title:"노트 삭제",children:e.jsx(ts,{size:14})})]})]}),e.jsx("p",{className:"note-preview-v2",children:w.content?w.content.replace(/<[^>]*>/g,"").substring(0,100):"내용 없음"}),e.jsx("div",{className:"note-item-footer-v2",children:e.jsx("span",{className:"note-date-v2",children:(oe=w.updatedAt)!=null&&oe.toDate?w.updatedAt.toDate().toLocaleDateString("ko-KR",{month:"short",day:"numeric"}):"날짜 없음"})})]},w.id)}):e.jsxs("div",{className:"empty-state-v2",children:[e.jsx(Fe,{size:48}),e.jsx("p",{children:"프로젝트를 선택하세요"})]})})]}),e.jsx("div",{className:"note-editor-v2",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"editor-header-v2",children:[e.jsx("button",{className:"mobile-back-btn",onClick:()=>M(!1),title:"목록으로",children:e.jsx(Lt,{size:20})}),e.jsx("input",{type:"text",className:"note-title-input-v2",placeholder:"제목을 입력하세요...",value:c,onChange:w=>A(w.target.value)}),e.jsx("div",{className:"editor-status-v2",children:U?e.jsx("span",{className:"saving",children:"저장 중..."}):e.jsx("span",{className:"saved",children:Ae()})})]}),e.jsxs("div",{className:"editor-toolbar-v2",children:[e.jsx("div",{className:"toolbar-group-v2",children:e.jsxs("select",{className:"toolbar-select-v2",onChange:w=>ve("formatBlock",w.target.value),defaultValue:"p",children:[e.jsx("option",{value:"p",children:"본문"}),e.jsx("option",{value:"h1",children:"제목 1"}),e.jsx("option",{value:"h2",children:"제목 2"}),e.jsx("option",{value:"h3",children:"제목 3"})]})}),e.jsx("div",{className:"toolbar-divider-v2"}),e.jsxs("div",{className:"toolbar-group-v2",children:[e.jsx("button",{className:"toolbar-btn-v2",onClick:()=>ve("bold"),title:"굵게 (Ctrl+B)",children:e.jsx(ri,{size:16})}),e.jsx("button",{className:"toolbar-btn-v2",onClick:()=>ve("italic"),title:"기울임 (Ctrl+I)",children:e.jsx(Ni,{size:16})}),e.jsx("button",{className:"toolbar-btn-v2",onClick:()=>ve("underline"),title:"밑줄 (Ctrl+U)",children:e.jsx(Ii,{size:16})}),e.jsx("button",{className:"toolbar-btn-v2",onClick:()=>ve("strikeThrough"),title:"취소선",children:e.jsx(Ri,{size:16})})]}),e.jsx("div",{className:"toolbar-divider-v2"}),e.jsxs("div",{className:"toolbar-group-v2",children:[e.jsx("button",{className:"toolbar-btn-v2",onClick:()=>ve("insertUnorderedList"),title:"글머리 기호 목록",children:e.jsx(Rt,{size:16})}),e.jsx("button",{className:"toolbar-btn-v2",onClick:()=>ve("insertOrderedList"),title:"번호 매기기 목록",children:e.jsx(ki,{size:16})})]}),e.jsx("div",{className:"toolbar-divider-v2"}),e.jsxs("div",{className:"toolbar-group-v2",children:[e.jsx("button",{className:"toolbar-btn-v2",onClick:Ue,title:"링크 삽입",children:e.jsx(bi,{size:16})}),e.jsx("button",{className:"toolbar-btn-v2",onClick:()=>ve("formatBlock","pre"),title:"코드 블록",children:e.jsx(xi,{size:16})})]})]}),e.jsx("div",{ref:$,className:"rich-editor-v2",contentEditable:!0,dir:"ltr",onInput:De,suppressContentEditableWarning:!0,"data-placeholder":"내용을 입력하세요..."})]}):e.jsxs("div",{className:"editor-empty-v2",children:[e.jsx(as,{size:64}),e.jsx("h3",{children:"노트를 선택하세요"}),e.jsx("p",{children:"좌측에서 노트를 선택하거나 새로 만들어보세요"})]})}),E&&e.jsx("div",{className:"modal-overlay-v2",onClick:()=>D(!1),children:e.jsxs("div",{className:"modal-content-v2",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"modal-header-v2",children:[e.jsx("h2",{children:"새 프로젝트 만들기"}),e.jsx("button",{onClick:()=>D(!1),children:"×"})]}),e.jsxs("div",{className:"modal-body-v2",children:[e.jsxs("div",{className:"form-group-v2",children:[e.jsx("label",{children:"프로젝트 이름 *"}),e.jsx("input",{type:"text",placeholder:"예: 마케팅 프로젝트",value:z,onChange:w=>h(w.target.value),autoFocus:!0})]}),e.jsxs("div",{className:"form-group-v2",children:[e.jsx("label",{children:"프로젝트 타입"}),e.jsxs("div",{className:"radio-group-v2",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"personal",checked:C==="personal",onChange:w=>N(w.target.value)}),e.jsx("span",{children:"개인 프로젝트"})]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"team",checked:C==="team",onChange:w=>N(w.target.value)}),e.jsx("span",{children:"팀 프로젝트"})]})]})]})]}),e.jsxs("div",{className:"modal-footer-v2",children:[e.jsx("button",{className:"btn-secondary-v2",onClick:()=>D(!1),children:"취소"}),e.jsxs("button",{className:"btn-primary-v2",onClick:K,children:[e.jsx(Zs,{size:16}),e.jsx("span",{children:"프로젝트 만들기"})]})]})]})})]})},sl=()=>{const{user:s,userData:t}=we(),[a,i]=l.useState([]),[n,r]=l.useState(null),[o,f]=l.useState(!1),[d,j]=l.useState(""),[E,D]=l.useState(""),[z,h]=l.useState(!1),[C,N]=l.useState(!0),[g,I]=l.useState([]),[b,y]=l.useState([]),[m,v]=l.useState(null),[P,R]=l.useState(new Set),[T,B]=l.useState(!0),[p,u]=l.useState([]),[c,A]=l.useState(""),[S,X]=l.useState(""),[U,ce]=l.useState({}),[ne,J]=l.useState(!0),[_,M]=l.useState(!1),[$,Q]=l.useState(null),[te,L]=l.useState([]),[V,K]=l.useState(!1),[q,G]=l.useState(""),ee=l.useRef(null),Y=l.useRef(null),pe=l.useRef(null),me=l.useRef(null);l.useEffect(()=>{if(s)return De(),Ae(),ve(),()=>Ue()},[s]),l.useEffect(()=>{if(!s)return;const x=O(k,"presence");return Me(x,ae=>{const re=new Set;ae.forEach(de=>{de.data().online&&re.add(de.id)}),R(re)})},[s]),l.useEffect(()=>{oe()},[g,S]),l.useEffect(()=>{let x;return m?(x=H(),Pt()):n&&(x=he()),()=>{x&&x()}},[m,n]),l.useEffect(()=>{$&&je()},[$]),l.useEffect(()=>{fs()},[p]),l.useEffect(()=>{Bt()},[te]);const ve=async()=>{if(s)try{await cs(le(k,"presence",s.uid),{online:!0,lastSeen:ue()})}catch(x){console.error("온라인 상태 설정 실패:",x)}},Ue=async()=>{if(s)try{await cs(le(k,"presence",s.uid),{online:!1,lastSeen:ue()})}catch(x){console.error("오프라인 상태 설정 실패:",x)}},De=async()=>{if(s)try{J(!0);const x=O(k,"employees"),Z=await se(x),ae=[];Z.forEach(re=>{const de={id:re.id,...re.data()};re.id!==s.uid&&ae.push(de)}),ae.sort((re,de)=>(re.name||"").localeCompare(de.name||"")),I(ae),w(ae)}catch(x){console.error("사원 목록 로드 실패:",x)}finally{J(!1)}},Ae=async()=>{if(s)try{const x=O(k,"channels"),Z=ie(x,Ie("createdAt","desc"));return Me(Z,re=>{const de=[];re.forEach(ge=>{var Ge;const Se={id:ge.id,...ge.data()};(!Se.private||(Ge=Se.members)!=null&&Ge.includes(s.uid))&&de.push(Se)}),i(de)})}catch(x){console.error("채널 목록 로드 실패:",x)}},w=async x=>{if(!s)return;const Z={};for(const ae of x)try{const re=O(k,"directMessages"),de=ie(re,W("receiverId","==",s.uid),W("senderId","==",ae.id),W("read","==",!1)),ge=await se(de);Z[ae.id]=ge.size}catch{Z[ae.id]=0}ce(Z)},oe=()=>{if(!S){y(g);return}const x=S.toLowerCase(),Z=g.filter(ae=>{var re,de,ge;return((re=ae.name)==null?void 0:re.toLowerCase().includes(x))||((de=ae.department)==null?void 0:de.toLowerCase().includes(x))||((ge=ae.email)==null?void 0:ge.toLowerCase().includes(x))});y(Z)},H=()=>{if(!s||!m)return;const x=O(k,"directMessages"),Z=fe(s.uid,m.id),ae=ie(x,W("chatId","==",Z),W("parentId","==",null),Ie("timestamp","asc"));return Me(ae,de=>{const ge=[];de.forEach(Se=>{ge.push({id:Se.id,...Se.data()})}),u(ge)})},he=()=>{if(!s||!n)return;const x=O(k,"channelMessages"),Z=ie(x,W("channelId","==",n.id),W("parentId","==",null),Ie("timestamp","asc"));return Me(Z,re=>{const de=[];re.forEach(ge=>{de.push({id:ge.id,...ge.data()})}),u(de)})},je=()=>{if(!$)return;const Z=O(k,m?"directMessages":"channelMessages"),ae=ie(Z,W("parentId","==",$.id),Ie("timestamp","asc"));return Me(ae,de=>{const ge=[];de.forEach(Se=>{ge.push({id:Se.id,...Se.data()})}),L(ge)})},fe=(x,Z)=>[x,Z].sort().join("_"),ye=async()=>{var x;if(!(!c.trim()||!m))try{const Z={chatId:fe(s.uid,m.id),senderId:s.uid,senderName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||s.email,receiverId:m.id,receiverName:m.name,message:c.trim(),timestamp:ue(),read:!1,parentId:null,replyCount:0};await Ce(O(k,"directMessages"),Z),A(""),(x=pe.current)==null||x.focus()}catch(Z){console.error("메시지 전송 실패:",Z),alert("메시지 전송에 실패했습니다.")}},Oe=async()=>{var x;if(!(!c.trim()||!n))try{const Z={channelId:n.id,senderId:s.uid,senderName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||s.email,message:c.trim(),timestamp:ue(),parentId:null,replyCount:0};await Ce(O(k,"channelMessages"),Z),A(""),(x=pe.current)==null||x.focus()}catch(Z){console.error("메시지 전송 실패:",Z),alert("메시지 전송에 실패했습니다.")}},Ye=async()=>{var x;if(!(!q.trim()||!$))try{const Z=m?"directMessages":"channelMessages",ae={senderId:s.uid,senderName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||s.email,message:q.trim(),timestamp:ue(),parentId:$.id};m?(ae.chatId=$.chatId,ae.receiverId=$.senderId===s.uid?$.receiverId:$.senderId,ae.receiverName=$.senderId===s.uid?$.receiverName:$.senderName):ae.channelId=$.channelId,await Ce(O(k,Z),ae);const re=le(k,Z,$.id),de=await rs(re);if(de.exists()){const ge=de.data().replyCount||0;await xe(re,{replyCount:ge+1})}G(""),(x=me.current)==null||x.focus()}catch(Z){console.error("답글 전송 실패:",Z),alert("답글 전송에 실패했습니다.")}},$s=()=>{m?ye():n&&Oe()},Pt=async()=>{if(!(!s||!m))try{const x=O(k,"directMessages"),Z=ie(x,W("receiverId","==",s.uid),W("senderId","==",m.id),W("read","==",!1)),ae=await se(Z),re=[];ae.forEach(de=>{re.push(xe(le(k,"directMessages",de.id),{read:!0}))}),await Promise.all(re),ce(de=>({...de,[m.id]:0}))}catch(x){console.error("읽음 처리 실패:",x)}},$t=async()=>{if(!d.trim()){alert("채널 이름을 입력하세요.");return}try{const x={name:d.trim(),description:E.trim(),private:z,createdBy:s.uid,createdByName:(t==null?void 0:t.name)||(t==null?void 0:t.email)||s.email,members:[s.uid],createdAt:ue()};await Ce(O(k,"channels"),x),f(!1),j(""),D(""),h(!1),alert("채널이 생성되었습니다!")}catch(x){console.error("채널 생성 실패:",x),alert("채널 생성에 실패했습니다.")}},Ut=async x=>{if(confirm("정말 이 채널을 삭제하시겠습니까?"))try{await Be(le(k,"channels",x)),(n==null?void 0:n.id)===x&&r(null),alert("채널이 삭제되었습니다.")}catch(Z){console.error("채널 삭제 실패:",Z),alert("채널 삭제에 실패했습니다.")}},Ot=x=>{Q(x),K(!0),G("")},vs=()=>{Q(null),K(!1),L([]),G("")},Us=x=>{v(x),r(null),vs(),window.innerWidth<=768&&M(!0)},Ft=x=>{r(x),v(null),vs(),window.innerWidth<=768&&M(!0)};l.useEffect(()=>{if(!n&&!m){u([]);return}let x;return(async()=>{try{if(n){const ae=O(k,"channels",n.id,"messages"),re=ie(ae,Ie("createdAt","asc"));x=Me(re,de=>{const ge=de.docs.map(Se=>({id:Se.id,...Se.data()}));u(ge),setTimeout(fs,100)})}else if(m){const ae=[s.uid,m.id].sort().join("_"),re=O(k,"directMessages",ae,"messages"),de=ie(re,Ie("createdAt","asc"));x=Me(de,ge=>{const Se=ge.docs.map(Ge=>({id:Ge.id,...Ge.data()}));u(Se),setTimeout(fs,100)})}}catch(ae){console.error("메시지 로드 실패:",ae)}})(),()=>{x&&x()}},[n,m,s]);const fs=()=>{var x;(x=ee.current)==null||x.scrollIntoView({behavior:"smooth"})},Bt=()=>{var x;(x=Y.current)==null||x.scrollIntoView({behavior:"smooth"})},qt=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),$s())},Ht=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),Ye())},ys=x=>{if(!x)return"";const Z=x.toDate?x.toDate():new Date(x),ae=new Date,re=ae-Z;if(re<6e4)return"방금 전";if(re<36e5)return`${Math.floor(re/6e4)}분 전`;if(Z.toDateString()===ae.toDateString())return Z.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});const de=new Date(ae);return de.setDate(de.getDate()-1),Z.toDateString()===de.toDateString()?"어제":Z.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})},gs=x=>P.has(x);return e.jsxs("div",{className:`messenger-page-v3 ${_?"mobile-chat-active":""}`,children:[e.jsxs("div",{className:"messenger-sidebar-v3",children:[e.jsx("div",{className:"sidebar-header-v3",children:e.jsx("h2",{children:"💬 메신저"})}),e.jsxs("div",{className:"sidebar-search",children:[e.jsx(We,{size:18}),e.jsx("input",{type:"text",placeholder:"검색...",value:S,onChange:x=>X(x.target.value)})]}),e.jsxs("div",{className:"sidebar-section",children:[e.jsxs("div",{className:"section-header-v4",onClick:()=>N(!C),children:[e.jsx("span",{className:"section-title",children:"채널"}),C?e.jsx(ds,{size:18}):e.jsx(hs,{size:18})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"section-content",children:a.length===0?e.jsx("div",{className:"empty-hint",children:e.jsx("p",{children:"채널이 없습니다"})}):a.map(x=>e.jsxs("div",{className:`channel-item-v4 ${(n==null?void 0:n.id)===x.id?"active":""}`,onClick:()=>Ft(x),children:[e.jsx("div",{className:"channel-icon-v4",children:x.private?e.jsx(ss,{size:14}):e.jsx(st,{size:14})}),e.jsx("span",{className:"channel-name",children:x.name}),x.createdBy===s.uid&&e.jsx("button",{className:"btn-delete-tiny",onClick:Z=>{Z.stopPropagation(),Ut(x.id)},title:"삭제",children:e.jsx(ts,{size:12})})]},x.id))}),e.jsxs("button",{className:"btn-add-item",onClick:()=>f(!0),children:[e.jsx(Re,{size:14}),e.jsx("span",{children:"채널 추가"})]})]})]}),e.jsx("div",{className:"sidebar-divider"}),e.jsxs("div",{className:"sidebar-section",children:[e.jsxs("div",{className:"section-header-v4",onClick:()=>B(!T),children:[e.jsx("span",{className:"section-title",children:"다이렉트 메시지"}),T?e.jsx(ds,{size:18}):e.jsx(hs,{size:18})]}),T&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"section-content",children:ne?e.jsx("div",{className:"loading-hint",children:"로딩 중..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`dm-item-v4 ${(m==null?void 0:m.id)===s.uid?"active":""}`,onClick:()=>Us({id:s.uid,name:(t==null?void 0:t.name)||"나",email:s.email}),children:[e.jsx("div",{className:"dm-avatar",children:e.jsx(Le,{size:16})}),e.jsxs("span",{className:"dm-name",children:[(t==null?void 0:t.name)||"나"," (메모)"]})]}),b.length===0?e.jsx("div",{className:"empty-hint",children:e.jsx("p",{children:"대화 상대가 없습니다"})}):b.filter(x=>x.id!==s.uid).map(x=>e.jsxs("div",{className:`dm-item-v4 ${(m==null?void 0:m.id)===x.id?"active":""}`,onClick:()=>Us(x),children:[e.jsxs("div",{className:"dm-avatar",children:[e.jsx(Le,{size:16}),e.jsx(Qs,{size:8,className:`status-dot ${gs(x.id)?"online":"offline"}`,fill:"currentColor"})]}),e.jsx("span",{className:"dm-name",children:x.name||"이름 없음"}),U[x.id]>0&&e.jsx("span",{className:"unread-badge-v3",children:U[x.id]})]},x.id))]})}),e.jsxs("button",{className:"btn-add-item",onClick:()=>{alert("DM 시작 기능은 곧 추가됩니다!")},children:[e.jsx(Re,{size:14}),e.jsx("span",{children:"메시지 시작"})]})]})]})]}),e.jsx("div",{className:"messenger-chat-v3",children:!m&&!n?e.jsxs("div",{className:"chat-empty",children:[e.jsx(Ei,{size:64}),e.jsx("h3",{children:"대화를 시작하세요"}),e.jsx("p",{children:"좌측에서 채널 또는 대화 상대를 선택하세요"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"chat-header-v3",children:[e.jsx("button",{className:"mobile-back-btn",onClick:()=>M(!1),title:"목록으로",children:e.jsx(Lt,{size:20})}),e.jsx("div",{className:"chat-user-info-v3",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"chat-avatar-v3",children:[e.jsx(Le,{size:28}),e.jsx(Qs,{size:10,className:`status-indicator ${gs(m==null?void 0:m.id)?"online":"offline"}`,fill:"currentColor"})]}),e.jsxs("div",{children:[e.jsx("h3",{children:m==null?void 0:m.name}),e.jsx("p",{className:"chat-status",children:gs(m==null?void 0:m.id)?"🟢 온라인":"⚪ 오프라인"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"channel-avatar-v3",children:n!=null&&n.private?e.jsx(ss,{size:24}):e.jsx(st,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{children:n==null?void 0:n.name}),e.jsx("p",{children:(n==null?void 0:n.description)||"채널 설명 없음"})]})]})}),e.jsx("div",{className:"chat-actions-v3",children:e.jsx("button",{className:"btn-icon",title:"더보기",children:e.jsx(Di,{size:20})})})]}),e.jsx("div",{className:"chat-messages-v3",children:p.length===0?e.jsx("div",{className:"messages-empty",children:e.jsx("p",{children:"첫 메시지를 보내보세요! 👋"})}):e.jsxs(e.Fragment,{children:[p.map((x,Z)=>{const ae=x.senderId===s.uid,re=Z===0||p[Z-1].senderId!==x.senderId;return e.jsxs("div",{className:`message-v3 ${ae?"mine":"theirs"} ${re?"show-avatar":""}`,children:[!ae&&re&&e.jsx("div",{className:"message-avatar-v3",children:e.jsx(Le,{size:24})}),e.jsxs("div",{className:"message-content-v3",children:[!ae&&re&&e.jsx("span",{className:"message-sender",children:x.senderName}),e.jsx("div",{className:"message-bubble-v3",children:e.jsx("p",{children:x.message})}),e.jsxs("div",{className:"message-footer",children:[e.jsx("span",{className:"message-time",children:ys(x.timestamp)}),e.jsxs("button",{className:"btn-thread-v3",onClick:()=>Ot(x),children:[e.jsx(Ve,{size:14}),x.replyCount>0&&e.jsx("span",{children:x.replyCount})]})]})]})]},x.id)}),e.jsx("div",{ref:ee})]})}),e.jsxs("div",{className:"chat-input-v3",children:[e.jsx("button",{className:"btn-icon",title:"이모지",children:e.jsx(Li,{size:20})}),e.jsx("button",{className:"btn-icon",title:"파일 첨부",children:e.jsx(_i,{size:20})}),e.jsx("input",{ref:pe,type:"text",placeholder:"메시지 입력...",value:c,onChange:x=>A(x.target.value),onKeyPress:qt}),e.jsx("button",{className:"btn-send-v3",onClick:$s,disabled:!c.trim(),children:e.jsx(at,{size:20})})]})]})}),V&&$&&e.jsxs("div",{className:"thread-panel-v3",children:[e.jsxs("div",{className:"thread-header-v3",children:[e.jsxs("h3",{children:[e.jsx(Ve,{size:20}),e.jsx("span",{children:"스레드"})]}),e.jsx("button",{className:"btn-icon",onClick:vs,children:e.jsx(Ke,{size:20})})]}),e.jsxs("div",{className:"thread-content-v3",children:[e.jsxs("div",{className:"thread-parent-v3",children:[e.jsx("div",{className:"message-avatar-v3",children:e.jsx(Le,{size:24})}),e.jsxs("div",{children:[e.jsx("div",{className:"message-sender",children:$.senderName}),e.jsx("div",{className:"message-bubble-v3",children:e.jsx("p",{children:$.message})}),e.jsx("span",{className:"message-time",children:ys($.timestamp)})]})]}),e.jsx("div",{className:"thread-divider-v3",children:e.jsxs("span",{children:[te.length," 답글"]})}),e.jsxs("div",{className:"thread-messages-v3",children:[te.map(x=>e.jsxs("div",{className:"thread-reply-v3",children:[e.jsx("div",{className:"message-avatar-v3",children:e.jsx(Le,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"message-sender",children:x.senderName}),e.jsx("div",{className:"message-bubble-v3",children:e.jsx("p",{children:x.message})}),e.jsx("span",{className:"message-time",children:ys(x.timestamp)})]})]},x.id)),e.jsx("div",{ref:Y})]})]}),e.jsxs("div",{className:"thread-input-v3",children:[e.jsx("input",{ref:me,type:"text",placeholder:"스레드에 답글...",value:q,onChange:x=>G(x.target.value),onKeyPress:Ht}),e.jsx("button",{className:"btn-send-v3",onClick:Ye,disabled:!q.trim(),children:e.jsx(at,{size:18})})]})]}),o&&e.jsx("div",{className:"modal-overlay",onClick:()=>f(!1),children:e.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"새 채널 만들기"}),e.jsx("button",{onClick:()=>f(!1),children:e.jsx(Ke,{size:24})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"채널 이름 *"}),e.jsx("input",{type:"text",placeholder:"예: 공지사항",value:d,onChange:x=>j(x.target.value),autoFocus:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"채널 설명"}),e.jsx("textarea",{placeholder:"이 채널의 용도를 설명하세요",value:E,onChange:x=>D(x.target.value),rows:3})]}),e.jsxs("div",{className:"form-group-checkbox",children:[e.jsx("input",{type:"checkbox",id:"private-channel",checked:z,onChange:x=>h(x.target.checked)}),e.jsxs("label",{htmlFor:"private-channel",children:[e.jsx(ss,{size:16}),e.jsx("span",{children:"비공개 채널로 만들기"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"취소"}),e.jsx("button",{className:"btn-primary",onClick:$t,children:"채널 만들기"})]})]})})]})},tl=()=>{const{user:s,userData:t,setUserData:a}=we(),[i,n]=l.useState(!1),[r,o]=l.useState(!1),[f,d]=l.useState(""),[j,E]=l.useState({name:"",phone:"",bio:"",location:"",birthDate:""}),D=l.useRef(null);l.useEffect(()=>{t&&(E({name:t.name||"",phone:t.phone||"",bio:t.bio||"",location:t.location||"",birthDate:t.birthDate||""}),d(t.profileImage||""))},[t]);const z=()=>{n(!0)},h=()=>{n(!1),t&&E({name:t.name||"",phone:t.phone||"",bio:t.bio||"",location:t.location||"",birthDate:t.birthDate||""})},C=async()=>{if(s)try{o(!0);const y=le(k,"employees",s.uid);await xe(y,{...j,profileImage:f}),a({...t,...j,profileImage:f}),n(!1),alert("프로필이 업데이트되었습니다!")}catch(y){console.error("프로필 업데이트 실패:",y),alert("프로필 업데이트에 실패했습니다.")}finally{o(!1)}},N=()=>{var y;i&&((y=D.current)==null||y.click())},g=y=>{var P;const m=(P=y.target.files)==null?void 0:P[0];if(!m)return;const v=new FileReader;v.onloadend=()=>{d(v.result)},v.readAsDataURL(m)},I=()=>{if(!j.name)return"?";const y=j.name.split(" ");return y.length>=2?y[0][0]+y[1][0]:j.name.substring(0,2)},b=y=>y?new Date(y).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"미등록";return e.jsxs("div",{className:"profile-page",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs("div",{className:"profile-header-content",children:[e.jsx("h1",{children:"내 프로필"}),e.jsx("p",{children:"개인 정보를 관리하고 수정할 수 있습니다"})]}),i?e.jsxs("div",{className:"edit-actions",children:[e.jsxs("button",{className:"btn-cancel",onClick:h,disabled:r,children:[e.jsx(Ke,{size:18}),e.jsx("span",{children:"취소"})]}),e.jsxs("button",{className:"btn-save",onClick:C,disabled:r,children:[e.jsx(js,{size:18}),e.jsx("span",{children:r?"저장 중...":"저장"})]})]}):e.jsxs("button",{className:"btn-edit",onClick:z,children:[e.jsx(Ti,{size:18}),e.jsx("span",{children:"수정"})]})]}),e.jsxs("div",{className:"profile-content",children:[e.jsx("div",{className:"profile-sidebar",children:e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-image-section",children:[e.jsxs("div",{className:`profile-image-wrapper ${i?"editable":""}`,onClick:N,children:[f?e.jsx("img",{src:f,alt:"프로필",className:"profile-image"}):e.jsx("div",{className:"profile-image-placeholder",children:e.jsx("span",{className:"profile-initials",children:I()})}),i&&e.jsxs("div",{className:"profile-image-overlay",children:[e.jsx(mi,{size:24}),e.jsx("span",{children:"사진 변경"})]})]}),e.jsx("input",{ref:D,type:"file",accept:"image/*",onChange:g,style:{display:"none"}})]}),e.jsxs("div",{className:"profile-name-section",children:[i?e.jsx("input",{type:"text",className:"profile-name-input",value:j.name,onChange:y=>E({...j,name:y.target.value}),placeholder:"이름"}):e.jsx("h2",{children:j.name||"이름 없음"}),e.jsx("p",{className:"profile-email",children:(t==null?void 0:t.email)||(s==null?void 0:s.email)})]}),e.jsxs("div",{className:"profile-info-cards",children:[e.jsxs("div",{className:"info-card",children:[e.jsx("div",{className:"info-icon",children:e.jsx(di,{size:20})}),e.jsxs("div",{className:"info-content",children:[e.jsx("span",{className:"info-label",children:"부서"}),e.jsx("span",{className:"info-value",children:(t==null?void 0:t.department)||"미지정"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("div",{className:"info-icon",children:e.jsx(ci,{size:20})}),e.jsxs("div",{className:"info-content",children:[e.jsx("span",{className:"info-label",children:"직급"}),e.jsx("span",{className:"info-value",children:(t==null?void 0:t.position)||"미지정"})]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("div",{className:"info-icon",children:e.jsx(Te,{size:20})}),e.jsxs("div",{className:"info-content",children:[e.jsx("span",{className:"info-label",children:"입사일"}),e.jsx("span",{className:"info-value",children:t!=null&&t.joinDate?b(t.joinDate):"미등록"})]})]})]})]})}),e.jsxs("div",{className:"profile-main",children:[e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"연락처 정보"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Ps,{size:16}),e.jsx("span",{children:"이메일"})]}),e.jsx("input",{type:"email",value:(t==null?void 0:t.email)||(s==null?void 0:s.email),disabled:!0,className:"form-input disabled"}),e.jsx("small",{children:"이메일은 변경할 수 없습니다"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(It,{size:16}),e.jsx("span",{children:"전화번호"})]}),e.jsx("input",{type:"tel",value:j.phone,onChange:y=>E({...j,phone:y.target.value}),placeholder:"010-1234-5678",disabled:!i,className:`form-input ${i?"":"disabled"}`})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(Si,{size:16}),e.jsx("span",{children:"지역"})]}),e.jsx("input",{type:"text",value:j.location,onChange:y=>E({...j,location:y.target.value}),placeholder:"예: 서울특별시 강남구",disabled:!i,className:`form-input ${i?"":"disabled"}`})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(hi,{size:16}),e.jsx("span",{children:"생년월일"})]}),e.jsx("input",{type:"date",value:j.birthDate,onChange:y=>E({...j,birthDate:y.target.value}),disabled:!i,className:`form-input ${i?"":"disabled"}`})]})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"자기소개"}),e.jsx("div",{className:"form-group",children:e.jsx("textarea",{value:j.bio,onChange:y=>E({...j,bio:y.target.value}),placeholder:"간단한 자기소개를 작성해주세요...",disabled:!i,className:`form-textarea ${i?"":"disabled"}`,rows:6})})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{children:"권한 정보"}),e.jsxs("div",{className:"permissions-grid",children:[e.jsxs("div",{className:"permission-item",children:[e.jsx("span",{className:"permission-label",children:"관리자 권한"}),e.jsx("span",{className:`permission-badge ${t!=null&&t.isAdmin?"active":""}`,children:t!=null&&t.isAdmin?"있음":"없음"})]}),e.jsxs("div",{className:"permission-item",children:[e.jsx("span",{className:"permission-label",children:"승인자 권한"}),e.jsx("span",{className:`permission-badge ${t!=null&&t.isApprover?"active":""}`,children:t!=null&&t.isApprover?"있음":"없음"})]}),e.jsxs("div",{className:"permission-item",children:[e.jsx("span",{className:"permission-label",children:"계정 상태"}),e.jsx("span",{className:"permission-badge active",children:"활성화"})]})]})]})]})]})]})},al=()=>{const{userData:s}=we(),[t,a]=l.useState(!0),[i,n]=l.useState(!0),[r,o]=l.useState(!0),[f,d]=l.useState(!0),[j,E]=l.useState(!0),[D,z]=l.useState("light"),[h,C]=l.useState("ko"),[N,g]=l.useState("");l.useEffect(()=>{const y=localStorage.getItem("userSettings");if(y){const m=JSON.parse(y);a(m.emailNotifications??!0),n(m.pushNotifications??!0),o(m.messageNotifications??!0),d(m.approvalNotifications??!0),E(m.leaveNotifications??!0),z(m.theme||"light"),C(m.language||"ko")}},[]);const I=()=>{const y={emailNotifications:t,pushNotifications:i,messageNotifications:r,approvalNotifications:f,leaveNotifications:j,theme:D,language:h};localStorage.setItem("userSettings",JSON.stringify(y)),D==="dark"?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.remove("dark-theme"),g("저장되었습니다!"),setTimeout(()=>g(""),3e3)},b=y=>{z(y),y==="dark"?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.remove("dark-theme")};return e.jsxs("div",{className:"settings-page",children:[e.jsxs("div",{className:"settings-header",children:[e.jsxs("div",{className:"settings-header-content",children:[e.jsxs("h1",{children:[e.jsx(nt,{size:28}),e.jsx("span",{children:"설정"})]}),e.jsx("p",{children:"앱 설정 및 개인 환경 설정을 관리합니다"})]}),e.jsxs("button",{className:"btn-save-settings",onClick:I,children:[e.jsx(js,{size:18}),e.jsx("span",{children:"설정 저장"})]})]}),N&&e.jsxs("div",{className:"save-status-banner",children:[e.jsx(pi,{size:18}),e.jsx("span",{children:N})]}),e.jsxs("div",{className:"settings-content",children:[e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(Ds,{size:20}),e.jsx("h2",{children:"알림 설정"})]}),e.jsx("p",{className:"section-description",children:"받고 싶은 알림을 선택하세요"}),e.jsxs("div",{className:"settings-group",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(Ps,{size:18}),e.jsxs("div",{children:[e.jsx("h3",{children:"이메일 알림"}),e.jsx("p",{children:"중요한 업데이트를 이메일로 받습니다"})]})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:y=>a(y.target.checked)}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(Ds,{size:18}),e.jsxs("div",{children:[e.jsx("h3",{children:"푸시 알림"}),e.jsx("p",{children:"브라우저 푸시 알림을 받습니다"})]})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:y=>n(y.target.checked)}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(Ve,{size:18}),e.jsxs("div",{children:[e.jsx("h3",{children:"메시지 알림"}),e.jsx("p",{children:"새 메시지 도착 시 알림을 받습니다"})]})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:y=>o(y.target.checked)}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(Ss,{size:18}),e.jsxs("div",{children:[e.jsx("h3",{children:"승인 요청 알림"}),e.jsx("p",{children:"승인 요청이 있을 때 알림을 받습니다"})]})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:y=>d(y.target.checked)}),e.jsx("span",{className:"toggle-slider"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-info",children:[e.jsx(Ss,{size:18}),e.jsxs("div",{children:[e.jsx("h3",{children:"연차 알림"}),e.jsx("p",{children:"연차 승인/반려 시 알림을 받습니다"})]})]}),e.jsxs("label",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:y=>E(y.target.checked)}),e.jsx("span",{className:"toggle-slider"})]})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(tt,{size:20}),e.jsx("h2",{children:"테마 설정"})]}),e.jsx("p",{className:"section-description",children:"앱의 테마를 선택하세요"}),e.jsxs("div",{className:"theme-options",children:[e.jsxs("div",{className:`theme-card ${D==="light"?"active":""}`,onClick:()=>b("light"),children:[e.jsx("div",{className:"theme-preview light",children:e.jsx(zi,{size:32})}),e.jsx("h3",{children:"라이트 모드"}),e.jsx("p",{children:"밝은 배경으로 편안한 작업"})]}),e.jsxs("div",{className:`theme-card ${D==="dark"?"active":""}`,onClick:()=>b("dark"),children:[e.jsx("div",{className:"theme-preview dark",children:e.jsx(tt,{size:32})}),e.jsx("h3",{children:"다크 모드"}),e.jsx("p",{children:"어두운 배경으로 눈의 피로 감소"})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(yi,{size:20}),e.jsx("h2",{children:"언어 설정"})]}),e.jsx("p",{className:"section-description",children:"앱에서 사용할 언어를 선택하세요"}),e.jsx("div",{className:"language-select",children:e.jsxs("select",{value:h,onChange:y=>C(y.target.value),className:"select-input",children:[e.jsx("option",{value:"ko",children:"한국어"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ja",children:"日本語"})]})})]}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(ss,{size:20}),e.jsx("h2",{children:"보안 설정"})]}),e.jsx("p",{className:"section-description",children:"계정 보안을 관리합니다"}),e.jsxs("div",{className:"security-actions",children:[e.jsxs("button",{className:"security-btn",children:[e.jsx(ss,{size:18}),e.jsxs("div",{children:[e.jsx("h3",{children:"비밀번호 변경"}),e.jsx("p",{children:"정기적인 비밀번호 변경을 권장합니다"})]})]}),e.jsxs("button",{className:"security-btn",children:[e.jsx(Ss,{size:18}),e.jsxs("div",{children:[e.jsx("h3",{children:"2단계 인증"}),e.jsx("p",{children:"추가 보안 계층으로 계정을 보호합니다"})]})]})]})]}),e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(nt,{size:20}),e.jsx("h2",{children:"계정 정보"})]}),e.jsxs("div",{className:"account-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"계정 ID"}),e.jsx("span",{className:"info-value",children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"계정 유형"}),e.jsx("span",{className:"info-value",children:s!=null&&s.isAdmin?"관리자":"일반 사용자"})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"가입일"}),e.jsx("span",{className:"info-value",children:s!=null&&s.createdAt?new Date(s.createdAt.seconds*1e3).toLocaleDateString("ko-KR"):"정보 없음"})]})]})]})]})]})};function nl(){const[s,t]=l.useState("dashboard"),[a,i]=l.useState([]),[n,r]=l.useState(window.innerWidth>768),{userData:o,isAdmin:f,isSubAdmin:d,isApprover:j}=we();l.useEffect(()=>{E()},[]),l.useEffect(()=>{const h=()=>{window.innerWidth>768&&r(!0)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const E=async()=>{try{const C=(await se(O(k,"employees"))).docs.map(N=>({id:N.id,...N.data()}));i(C)}catch(h){console.error("사원 목록 로드 실패:",h)}},D=()=>{r(!n)},z=(h,C)=>{t(h)};return e.jsxs("div",{className:"app-container",children:[e.jsx(Ui,{onMenuToggle:D,onNavigate:z}),e.jsxs("div",{className:"main-content",children:[e.jsx(Oi,{activeTab:s,setActiveTab:t,isOpen:n,onClose:()=>r(!1)}),e.jsxs("div",{className:`content ${n?"menu-open":"menu-closed"}`,children:[s==="dashboard"&&e.jsx(Fi,{setActiveTab:t}),s==="calendar"&&e.jsx(Hi,{employees:a}),s==="annualLeave"&&e.jsx(Ki,{}),s==="approval"&&e.jsx(Yi,{}),s==="ptSchedule"&&e.jsx(Xi,{}),s==="department"&&e.jsx(Gi,{}),s==="notes"&&e.jsx(el,{}),s==="messenger"&&e.jsx(sl,{}),s==="admin"&&e.jsx(Qi,{}),s==="approval-line"&&e.jsx(Zi,{}),s==="admin-leave"&&e.jsx(Ji,{}),s==="profile"&&e.jsx(tl,{}),s==="settings"&&e.jsx(al,{}),s!=="dashboard"&&s!=="calendar"&&s!=="annualLeave"&&s!=="approval"&&s!=="ptSchedule"&&s!=="department"&&s!=="notes"&&s!=="messenger"&&s!=="admin"&&s!=="approval-line"&&s!=="admin-leave"&&s!=="profile"&&s!=="settings"&&e.jsxs("div",{className:"content-placeholder",children:[e.jsxs("h2",{children:[s," 페이지"]}),e.jsx("p",{children:"개발 중입니다..."})]})]})]})]})}function il(){const{user:s,loading:t,initialize:a}=we();return l.useEffect(()=>{const i=a();return()=>i()},[a]),t?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"18px",color:"var(--text-secondary)"},children:"로딩중..."}):s?e.jsx(nl,{}):e.jsx(ai,{})}Cs.createRoot(document.getElementById("root")).render(e.jsx(Ts.StrictMode,{children:e.jsx(il,{})}));
//# sourceMappingURL=index-gzNxTvHO.js.map
